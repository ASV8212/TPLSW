!function(a){a.tis.tisWidget("tisChart","",{}),a.extend(a.tis._tisChart.prototype,{defineInstance:function(){a.extend(!0,this,this._defaultSettings),this._createColorsCache()},_defaultSettings:{title:"Title",description:"Description",source:[],seriesGroups:[],categoryAxis:null,xAxis:{},valueAxis:null,renderEngine:"",enableAnimations:!0,enableAxisTextAnimation:!1,backgroundImage:"",background:"#FFFFFF",padding:{left:5,top:5,right:5,bottom:5},backgroundColor:"#FFFFFF",showBorderLine:!0,borderLineWidth:1,borderLineColor:null,borderColor:null,titlePadding:{left:5,top:5,right:5,bottom:10},showLegend:!0,legendLayout:null,enabled:!0,colorScheme:"scheme01",animationDuration:500,showToolTips:!0,toolTipShowDelay:500,toolTipDelay:500,toolTipHideDelay:4e3,toolTipMoveDuration:300,toolTipFormatFunction:null,toolTipAlignment:"dataPoint",localization:null,columnSeriesOverlap:!1,rtl:!1,legendPosition:null,greyScale:!1,axisPadding:5,enableCrosshairs:!1,crosshairsColor:"#BCBCBC",crosshairsDashStyle:"2,2",crosshairsLineWidth:1,enableEvents:!0,_itemsToggleState:[],_isToggleRefresh:!1,_isSelectorRefresh:!1,_sliders:[],_selectorRange:[],_rangeSelectorInstances:{},_resizeState:{},renderer:null,_isRangeSelectorInstance:!1,drawBefore:null,draw:null,_renderData:{},enableSampling:!0},_defaultLineColor:"#0080C0",_touchEvents:{mousedown:a.tis.mobile.getTouchEventName("touchstart"),click:a.tis.mobile.getTouchEventName("touchstart"),mouseup:a.tis.mobile.getTouchEventName("touchend"),mousemove:a.tis.mobile.getTouchEventName("touchmove"),mouseenter:"mouseenter",mouseleave:"mouseleave"},_getEvent:function(a){return this._isTouchDevice?this._touchEvents[a]:a},destroy:function(){this.host.remove()},_tisPlot:null,createInstance:function(b){if(!a.tis.dataAdapter)throw"tisdata.js is not loaded";var c=this;c._refreshOnDownloadComlete(),c._isTouchDevice=a.tis.mobile.isTouchDevice(),c._tisPlot||(c._tisPlot=new tisPlot),c.addHandler(c.host,c._getEvent("mousemove"),function(b){if(0!=c.enabled){c._isRangeSelectorInstance||c.host.css("cursor","default");var d=b.pageX||b.clientX||b.screenX,e=b.pageY||b.clientY||b.screenY,f=c.host.offset();if(c._isTouchDevice){var g=a.tis.position(b);d=g.left,e=g.top}d-=f.left,e-=f.top,c.onmousemove(d,e)}}),c.addHandler(c.host,c._getEvent("mouseleave"),function(a){if(0!=c.enabled){var b=c._mouseX,d=c._mouseY,e=c._plotRect;e&&b>=e.x&&b<=e.x+e.width&&d>=e.y&&d<=e.y+e.height||(c._cancelTooltipTimer(),c._hideToolTip(0),c._unselect())}}),c.addHandler(c.host,"click",function(b){if(0!=c.enabled){var d=b.pageX||b.clientX||b.screenX,e=b.pageY||b.clientY||b.screenY,f=c.host.offset();if(c._isTouchDevice){var g=a.tis.position(b);d=g.left,e=g.top}d-=f.left,e-=f.top,c._mouseX=d,c._mouseY=e,!isNaN(c._lastClickTs)&&(new Date).valueOf()-c._lastClickTs<100||(this._hostClickTimer=setTimeout(function(){if(c._isTouchDevice||(c._cancelTooltipTimer(),c._hideToolTip(),c._unselect()),c._pointMarker&&c._pointMarker.element){var a=c.seriesGroups[c._pointMarker.gidx],d=a.series[c._pointMarker.sidx];b.stopImmediatePropagation(),c._raiseItemEvent("click",a,d,c._pointMarker.iidx)}},100))}});var d=c.element.style;if(d){var e=!1;null!=d.width&&(e|=-1!=d.width.toString().indexOf("%")),null!=d.height&&(e|=-1!=d.height.toString().indexOf("%")),e&&a.tis.utilities.resize(this.host,function(){c.timer&&clearTimeout(c.timer),c.timer=setTimeout(function(){var a=c.enableAnimations;c.enableAnimations=!1,c.refresh(),c.enableAnimations=a},1)},!1,!0)}},_refreshOnDownloadComlete:function(){var b=this,c=this.source;if(c instanceof a.tis.dataAdapter){var d=c._options;(void 0==d||void 0!=d&&!d.autoBind)&&(c.autoSync=!1,c.dataBind());var e=this.element.id;if(0==c.records.length){var f=function(){b.ready&&b.ready(),b.refresh()};c.unbindDownloadComplete(e),c.bindDownloadComplete(e,f)}else b.ready&&b.ready();c.unbindBindingUpdate(e),c.bindBindingUpdate(e,function(){b._supressBindingRefresh||b.refresh()})}},propertyChangedHandler:function(a,b,c,d){void 0!=this.isInitialized&&0!=this.isInitialized&&("source"==b&&this._refreshOnDownloadComlete(),this.refresh())},_initRenderer:function(b){if(!a.tis.createRenderer)throw"Please include tisdraw.js";return a.tis.createRenderer(this,b)},_internalRefresh:function(){var b=this;if(!a.tis.isHidden(b.host)){b._stopAnimations(),b.renderer&&(b._isToggleRefresh||b._isUpdate)||(b._hideToolTip(0),b._isVML=!1,b.host.empty(),b._measureDiv=void 0,b._initRenderer(b.host));var c=b.renderer;if(c){var d=c.getRect();b._render({x:1,y:1,width:d.width,height:d.height}),this._raiseEvent("refreshBegin",{instance:this}),c instanceof a.tis.HTML5Renderer&&c.refresh(),b._isUpdate=!1,this._raiseEvent("refreshEnd",{instance:this})}}},saveAsPNG:function(a,b,c){return this._saveAsImage("png",a,b,c)},saveAsJPEG:function(a,b,c){return this._saveAsImage("jpeg",a,b,c)},saveAsPDF:function(a,b,c){return this._saveAsImage("pdf",a,b,c)},_saveAsImage:function(b,c,d,e){for(var f=!1,g=0;g<this.seriesGroups.length&&!f;g++){var h=this._getXAxis(g);h&&h.rangeSelector&&(f=!0)}return a.tis._widgetToImage(this,b,c,d,e,f?this._selectorSaveAsImageCallback:void 0)},_selectorSaveAsImageCallback:function(b,c){for(var d=b,e=0;e<d.seriesGroups.length;e++){var f=d._getXAxis(e);if(f&&f.rangeSelector&&!f.rangeSelector.renderTo){var g=d._rangeSelectorInstances[e];if(g){var h=g.tisChart("getInstance"),j=(h.renderEngine,h.renderer.getRect()),k=h.renderer.getContainer().find("canvas")[0],l=k.getContext("2d"),m=d._sliders[e],n="horizontal"==d.seriesGroups[e].orientation,o=n?"height":"width",p=n?"width":"height",q=n?"y":"x",r=n?"x":"y",s={};s[q]=m.startOffset+m.rect[q],s[r]=m.rect[r],s[o]=m.endOffset-m.startOffset,s[p]=m.rect[p];var t=f.rangeSelector.colorSelectedRange||"blue",v=(f.rangeSelector.colorUnselectedRange,f.rangeSelector.colorRangeLine||"grey"),w=[];w.push(h.renderer.rect(s.x,s.y,s.width,s.height,{fill:t,opacity:.1})),n?(w.push(h.renderer.line(a.tis._ptrnd(m.rect.x+m.rect.width),a.tis._ptrnd(m.rect.y),a.tis._ptrnd(m.rect.x+m.rect.width),a.tis._ptrnd(s.y),{stroke:v,opacity:.5})),w.push(h.renderer.line(a.tis._ptrnd(m.rect.x+m.rect.width),a.tis._ptrnd(s.y+s.height),a.tis._ptrnd(m.rect.x+m.rect.width),a.tis._ptrnd(m.rect.y+m.rect.height),{stroke:v,opacity:.5})),w.push(h.renderer.line(a.tis._ptrnd(m.rect.x),a.tis._ptrnd(s.y),a.tis._ptrnd(m.rect.x+m.rect.width),a.tis._ptrnd(s.y),{stroke:v,opacity:.5})),w.push(h.renderer.line(a.tis._ptrnd(m.rect.x),a.tis._ptrnd(s.y+s.height),a.tis._ptrnd(m.rect.x+m.rect.width),a.tis._ptrnd(s.y+s.height),{stroke:v,opacity:.5}))):(w.push(h.renderer.line(a.tis._ptrnd(m.rect.x),a.tis._ptrnd(m.rect.y),a.tis._ptrnd(s.x),a.tis._ptrnd(m.rect.y),{stroke:v,opacity:.5})),w.push(h.renderer.line(a.tis._ptrnd(s.x+s.width),a.tis._ptrnd(m.rect.y),a.tis._ptrnd(m.rect.x+m.rect.width),a.tis._ptrnd(m.rect.y),{stroke:v,opacity:.5})),w.push(h.renderer.line(a.tis._ptrnd(s.x),a.tis._ptrnd(m.rect.y),a.tis._ptrnd(s.x),a.tis._ptrnd(m.rect.y+m.rect.height),{stroke:v,opacity:.5})),w.push(h.renderer.line(a.tis._ptrnd(s.x+s.width),a.tis._ptrnd(m.rect.y),a.tis._ptrnd(s.x+s.width),a.tis._ptrnd(m.rect.y+m.rect.height),{stroke:v,opacity:.5}))),h.renderer.refresh();var x=l.getImageData(j.x,j.y,j.width,j.height);c.getContext("2d").putImageData(x,parseInt(g.css("left")),parseInt(g.css("top")),1,1,j.width,j.height);for(var z=0;z<w.length;z++)h.renderer.removeElement(w[z]);h.renderer.refresh()}}}return!0},refresh:function(){this._internalRefresh()},update:function(){this._isUpdate=!0,this._internalRefresh()},_seriesTypes:["line","stackedline","stackedline100","spline","stackedspline","stackedspline100","stepline","stackedstepline","stackedstepline100","area","stackedarea","stackedarea100","splinearea","stackedsplinearea","stackedsplinearea100","steparea","stackedsteparea","stackedsteparea100","rangearea","splinerangearea","steprangearea","column","stackedcolumn","stackedcolumn100","rangecolumn","scatter","stackedscatter","stackedscatter100","bubble","stackedbubble","stackedbubble100","pie","donut","candlestick","ohlc","waterfall","stackedwaterfall"],clear:function(){var a=this;for(var b in a._defaultSettings)a[b]=a._defaultSettings[b];a.title="",a.description="",a.refresh()},_validateSeriesGroups:function(){if(!a.isArray(this.seriesGroups))throw"Invalid property: 'seriesGroups' property is required and must be a valid array.";for(var b=0;b<this.seriesGroups.length;b++){var c=this.seriesGroups[b];if(!c.type)throw"Invalid property: Each series group must have a valid 'type' property.";if(!a.isArray(c.series))throw"Invalid property: Each series group must have a 'series' property which must be a valid array."}},_render:function(b){var c=this,d=c.renderer;c._validateSeriesGroups(),c._colorsCache.clear(),!c._isToggleRefresh&&c._isUpdate&&c._renderData&&c._renderDataClone(),c._renderData=[],d.clear(),c._unselect(),c._hideToolTip(0);var e=c.backgroundImage;void 0==e||""==e?c.host.css({"background-image":""}):c.host.css({"background-image":-1!=e.indexOf("(")?e:"url('"+e+"')"}),c._rect=b;var f=c.padding||{left:5,top:5,right:5,bottom:5},g=d.createClipRect(b),h=d.beginGroup();d.setClip(h,g);var i=d.rect(b.x,b.y,b.width-2,b.height-2);if(void 0==e||""==e?d.attr(i,{fill:c.backgroundColor||c.background||"white"}):d.attr(i,{fill:"transparent"}),0!=c.showBorderLine){var j=void 0==c.borderLineColor?c.borderColor:c.borderLineColor;void 0==j&&(j=c._defaultLineColor);var k=this.borderLineWidth;(isNaN(k)||k<0||k>10)&&(k=1),d.attr(i,{"stroke-width":k,stroke:j})}else a.tis.browser.msie&&a.tis.browser.version<9&&d.attr(i,{"stroke-width":1,stroke:c.backgroundColor||"white"});a.isFunction(c.drawBefore)&&c.drawBefore(d,b);var l={x:f.left,y:f.top,width:b.width-f.left-f.right,height:b.height-f.top-f.bottom};c._paddedRect=l;var n,m=c.titlePadding||{left:2,top:2,right:2,bottom:2};if(c.title&&c.title.length>0){var o=c.toThemeProperty("tis-chart-title-text",null);n=d.measureText(c.title,0,{class:o}),d.text(c.title,l.x+m.left,l.y+m.top,l.width-(m.left+m.right),n.height,0,{class:o},!0,"center","center"),l.y+=n.height,l.height-=n.height}if(c.description&&c.description.length>0){var p=c.toThemeProperty("tis-chart-title-description",null);n=d.measureText(c.description,0,{class:p}),d.text(c.description,l.x+m.left,l.y+m.top,l.width-(m.left+m.right),n.height,0,{class:p},!0,"center","center"),l.y+=n.height,l.height-=n.height}(c.title||c.description)&&(l.y+=m.bottom+m.top,l.height-=m.bottom+m.top);var q={x:l.x,y:l.y,width:l.width,height:l.height};c._plotRect=q,c._buildStats(q);for(var t,r=c._isPieOnlySeries(),s=c.seriesGroups,u={xAxis:{},valueAxis:{}},v=0;v<s.length&&!r;v++)if("pie"!=s[v].type&&"donut"!=s[v].type){var w=c._getXAxis(v);if(!w)throw"seriesGroup["+v+"] is missing xAxis definition";var x=w==c._getXAxis()?-1:v;u.xAxis[x]=0}var y=c.axisPadding;isNaN(y)&&(y=5);var z={left:0,right:0,leftCount:0,rightCount:0},A=[];for(v=0;v<s.length;v++){var B=s[v];if("pie"!=B.type&&"donut"!=B.type&&1!=B.spider&&1!=B.polar){t="horizontal"==B.orientation;var w=c._getXAxis(v),x=w==c._getXAxis()?-1:v,C=c._getValueAxis(v),D=C==c._getValueAxis()?-1:v,E=t?w.axisSize:C.axisSize,F={x:0,y:q.y,width:q.width,height:q.height},G=t?c._getXAxis(v).position:C.position;E&&"auto"!=E||(t?(E=this._renderXAxis(v,F,!0,q).width,1==(1&u.xAxis[x])?E=0:E>0&&(u.xAxis[x]|=1)):(E=c._renderValueAxis(v,F,!0,q).width,1==(1&u.valueAxis[D])?E=0:E>0&&(u.valueAxis[D]|=1))),"left"!=G&&1==c.rtl&&(G="right"),"right"!=G&&(G="left"),z[G+"Count"]>0&&z[G]>0&&E>0&&(z[G]+=y),A.push({width:E,position:G,xRel:z[G]}),z[G]+=E,z[G+"Count"]++}else A.push({width:0,position:0,xRel:0})}var H=Math.max(1,Math.max(b.width,b.height)),I={top:0,bottom:0,topCount:0,bottomCount:0},J=[];for(v=0;v<s.length;v++){var B=s[v];if("pie"!=B.type&&"donut"!=B.type&&1!=B.spider&&1!=B.polar){t="horizontal"==B.orientation;var C=this._getValueAxis(v),D=C==c._getValueAxis()?-1:v,w=c._getXAxis(v),x=w==c._getXAxis()?-1:v,K=t?C.axisSize:w.axisSize,G=t?C.position:w.position;K&&"auto"!=K||(t?(K=c._renderValueAxis(v,{x:0,y:0,width:H,height:0},!0,q).height,2==(2&u.valueAxis[D])?K=0:K>0&&(u.valueAxis[D]|=2)):(K=c._renderXAxis(v,{x:0,y:0,width:H,height:0},!0).height,2==(2&u.xAxis[x])?K=0:K>0&&(u.xAxis[x]|=2))),"top"!=G&&(G="bottom"),I[G+"Count"]>0&&I[G]>0&&K>0&&(I[G]+=y),J.push({height:K,position:G,yRel:I[G]}),I[G]+=K,I[G+"Count"]++}else J.push({height:0,position:0,yRel:0})}c._createAnimationGroup("series");var L=0!=c.showLegend,M=L?c._renderLegend(c.legendLayout?c._rect:l,!0):{width:0,height:0};if(!this.legendLayout||isNaN(this.legendLayout.left)&&isNaN(this.legendLayout.top)||(M={width:0,height:0}),l.height<I.top+I.bottom+M.height||l.width<z.left+z.right)return void d.endGroup();q.height-=I.top+I.bottom+M.height,q.x+=z.left,q.width-=z.left+z.right,q.y+=I.top;var N=[];if(!r){c._getXAxis().tickMarksColor||c._defaultLineColor;for(v=0;v<s.length;v++){var B=s[v];if(1!=B.polar&&1!=B.spider&&"pie"!=B.type&&"donut"!=B.type){t="horizontal"==B.orientation;var x=c._getXAxis(v)==c._getXAxis()?-1:v,D=c._getValueAxis(v)==c._getValueAxis()?-1:v,F={x:q.x,y:0,width:q.width,height:J[v].height};if("top"!=J[v].position?F.y=q.y+q.height+J[v].yRel:F.y=q.y-J[v].yRel-J[v].height,t){if(4==(4&u.valueAxis[D]))continue;if(!c._isGroupVisible(v))continue;c._renderValueAxis(v,F,!1,q),u.valueAxis[D]|=4}else{if(N.push(F),4==(4&u.xAxis[x]))continue;if(!c._isGroupVisible(v))continue;c._renderXAxis(v,F,!1,q),u.xAxis[x]|=4}}}}if(L){var P=c.legendLayout?c._rect:l,Q=l.x+a.tis._ptrnd((l.width-M.width)/2),R=q.y+q.height+I.bottom,E=l.width,K=M.height;c.legendLayout&&(isNaN(c.legendLayout.left)||(Q=c.legendLayout.left),isNaN(c.legendLayout.top)||(R=c.legendLayout.top),isNaN(c.legendLayout.width)||(E=c.legendLayout.width),isNaN(c.legendLayout.height)||(K=c.legendLayout.height)),Q+E>P.x+P.width&&(E=P.x+P.width-Q),R+K>P.y+P.height&&(K=P.y+P.height-R),c._renderLegend({x:Q,y:R,width:E,height:K})}if(c._hasHorizontalLines=!1,!r)for(v=0;v<s.length;v++){var B=s[v];if(1!=B.polar&&1!=B.spider&&"pie"!=B.type&&"donut"!=B.type){t="horizontal"==s[v].orientation;var F={x:q.x-A[v].xRel-A[v].width,y:q.y,width:A[v].width,height:q.height};"left"!=A[v].position&&(F.x=q.x+q.width+A[v].xRel);var x=c._getXAxis(v)==c._getXAxis()?-1:v,D=c._getValueAxis(v)==c._getValueAxis()?-1:v;if(t){if(N.push(F),8==(8&u.xAxis[x]))continue;if(!c._isGroupVisible(v))continue;c._renderXAxis(v,F,!1,q),u.xAxis[x]|=8}else{if(8==(8&u.valueAxis[D]))continue;if(!c._isGroupVisible(v))continue;c._renderValueAxis(v,F,!1,q),u.valueAxis[D]|=8}}}if(!(q.width<=0||q.height<=0)){for(c._plotRect={x:q.x,y:q.y,width:q.width,height:q.height},v=0;v<s.length;v++)this._drawPlotAreaLines(v,!0,{gridLines:!1,tickMarks:!1,alternatingBackground:!0}),this._drawPlotAreaLines(v,!1,{gridLines:!1,tickMarks:!1,alternatingBackground:!0});for(v=0;v<s.length;v++)this._drawPlotAreaLines(v,!0,{gridLines:!0,tickMarks:!0,alternatingBackground:!1}),this._drawPlotAreaLines(v,!1,{gridLines:!0,tickMarks:!0,alternatingBackground:!1});var S=!1;for(v=0;v<s.length&&!S;v++){var B=s[v];if(void 0!==B.annotations||a.isFunction(B.draw)||a.isFunction(B.drawBefore)){S=!0;break}}var T=d.beginGroup();if(!S){var U=d.createClipRect({x:q.x-2,y:q.y,width:q.width+4,height:q.height});d.setClip(T,U)}for(v=0;v<s.length;v++){var B=s[v],V=!1;for(var W in c._seriesTypes)if(c._seriesTypes[W]==B.type){V=!0;break}if(!V)throw'Invalid serie type "'+B.type+'"';a.isFunction(B.drawBefore)&&B.drawBefore(d,b,v,this),1!=B.polar&&1!=B.spider||-1==B.type.indexOf("pie")&&-1==B.type.indexOf("donut")&&c._renderSpiderAxis(v,q),c._renderAxisBands(v,q,!0),c._renderAxisBands(v,q,!1)}for(v=0;v<s.length;v++){var B=s[v];if(c._isColumnType(B.type)?c._renderColumnSeries(v,q):-1!=B.type.indexOf("pie")||-1!=B.type.indexOf("donut")?c._renderPieSeries(v,q):-1!=B.type.indexOf("line")||-1!=B.type.indexOf("area")?c._renderLineSeries(v,q):-1!=B.type.indexOf("scatter")||-1!=B.type.indexOf("bubble")?c._renderScatterSeries(v,q):-1==B.type.indexOf("candlestick")&&-1==B.type.indexOf("ohlc")||c._renderCandleStickSeries(v,q,-1!=B.type.indexOf("ohlc")),B.annotations){if(!this._moduleAnnotations)throw"Please include 'tischart.annotations.js'";for(var X=0;X<B.annotations.length;X++)c._renderAnnotation(v,B.annotations[X],q)}a.isFunction(B.draw)&&c.draw(d,b,v,this)}if(d.endGroup(),0==c.enabled){var Y=d.rect(b.x,b.y,b.width,b.height);d.attr(Y,{fill:"#777777",opacity:.5,stroke:"#00FFFFFF"})}a.isFunction(c.draw)&&c.draw(d,b),d.endGroup(),c._startAnimation("series");var Z="";if(-1==location.hostname.indexOf(Z.substring(4))){var $={class:c.toThemeProperty("tis-chart-legend-text",null),opacity:.5},_=d.measureText(Z,0,$);d.text(Z,b.x+b.width-_.width-5,b.y+b.height-_.height-5,_.width,_.height,0,$)}for(var ba=!1,v=0;v<c.seriesGroups.length&&!ba;v++){var w=c._getXAxis(v);w&&w.rangeSelector&&(ba=!0)}if(ba){if(!this._moduleRangeSelector)throw"Please include 'tischart.rangeselector.js'";var ca=[];for(this._isSelectorRefresh||(c.removeHandler(a(document),c._getEvent("mousemove"),c._onSliderMouseMove),c.removeHandler(a(document),c._getEvent("mousedown"),c._onSliderMouseDown),c.removeHandler(a(document),c._getEvent("mouseup"),c._onSliderMouseUp)),c._isSelectorRefresh||(c._rangeSelectorInstances={}),v=0;v<c.seriesGroups.length;v++){var da=this._getXAxis(v);-1==ca.indexOf(da)&&this._renderXAxisRangeSelector(v,N[v])&&ca.push(da)}}}},_isPieOnlySeries:function(){var a=this.seriesGroups;if(0==a.length)return!1;for(var b=0;b<a.length;b++)if("pie"!=a[b].type&&"donut"!=a[b].type)return!1;return!0},_renderChartLegend:function(b,c,d,e){var f=this,g=f.renderer,h={x:c.x,y:c.y,width:c.width,height:c.height},i=3;h.width>=2*i&&(h.x+=i,h.width-=2*i),h.height>=2*i&&(h.y+=i,h.height-=2*i);for(var j={width:h.width,height:0},k=0,l=0,m=20,n=0,o=10,p=10,q=0,r=0;r<b.length;r++){var s=b[r].css;s||(s=f.toThemeProperty("tis-chart-legend-text",null)),m=20;var t=b[r].text,u=g.measureText(t,0,{class:s});u.height>m&&(m=u.height),u.width>q&&(q=u.width),e?(0!=r&&(l+=m),l>h.height&&(l=0,k+=q+2*p+o,q=u.width,j.width=k+q)):(0!=k&&(k+=p),k+2*o+u.width>h.width&&u.width<h.width&&(k=0,l+=m,m=20,n=h.width,j.height=l+m));var v=!1;if(u.width>h.width){v=!0;for(var w=h.width,x=t,y=x.split(/\s+/),z=[],A="",B=0;B<y.length;B++){var C=A+(A.length>0?" ":"")+y[B],D=f.renderer.measureText(C,0,{class:s});D.width>w&&C.length>0&&A.length>0?(z.push({text:A}),A=y[B]):A=C,B+1==y.length&&z.push({text:A})}u.width=0;for(var E=0,F=0;F<z.length;F++){var G=z[F].text,D=f.renderer.measureText(G,0,{class:s});u.width=Math.max(u.width,D.width),E+=u.height}u.height=E}var H=k+u.width<h.width&&l+u.height<c.height;if(f.legendLayout)var H=h.x+k+u.width<f._rect.x+f._rect.width&&h.y+l+u.height<f._rect.y+f._rect.height;if(!d&&H){var I=b[r].seriesIndex,J=b[r].groupIndex,K=b[r].itemIndex,L=b[r].fillColor,M=b[r].lineColor,N=f._isSerieVisible(J,I,K),O=g.beginGroup(),P=N?b[r].opacity:.1;if(v){for(var x=t,w=h.width,y=x.split(/\s+/),R=0,z=[],A="",B=0;B<y.length;B++){var C=A+(A.length>0?" ":"")+y[B],D=f.renderer.measureText(C,0,{class:s});D.width>w&&C.length>0&&A.length>0?(z.push({text:A,dy:R}),R+=D.height,A=y[B]):A=C,B+1==y.length&&z.push({text:A,dy:R})}for(var F=0;F<z.length;F++){var G=z[F].text;R=z[F].dy;var D=f.renderer.measureText(G,0,{class:s});e?f.renderer.text(G,h.x+k+1.5*o,h.y+l+R,u.width,m,0,{class:s},!1,"left","center"):f.renderer.text(G,h.x+k+1.5*o,h.y+l+R,u.width,m,0,{class:s},!1,"center","center")}var S=g.rect(h.x+k,h.y+l+o/2+R/2,o,o);e&&(l+=R),f.renderer.attr(S,{fill:L,"fill-opacity":P,stroke:M,"stroke-width":1,"stroke-opacity":b[r].opacity})}else{var S=g.rect(h.x+k,h.y+l+o/2,o,o);f.renderer.attr(S,{fill:L,"fill-opacity":P,stroke:M,"stroke-width":1,"stroke-opacity":b[r].opacity}),e?f.renderer.text(t,h.x+k+1.5*o,h.y+l,u.width,u.height+o/2,0,{class:s},!1,"left","center"):f.renderer.text(t,h.x+k+1.5*o,h.y+l,u.width,m,0,{class:s},!1,"center","center")}f.renderer.endGroup(),f._setLegendToggleHandler(J,I,K,O)}e||(k+=u.width+2*o,n<k&&(n=k))}if(d)return j.height=a.tis._ptrnd(l+m+5),j.width=a.tis._ptrnd(n),j},isSerieVisible:function(a,b,c){return this._isSerieVisible(a,b,c)},_isSerieVisible:function(b,c,d){for(;this._itemsToggleState.length<b+1;)this._itemsToggleState.push([]);for(var e=this._itemsToggleState[b];e.length<c+1;)e.push(!!isNaN(d)||[]);var f=e[c];if(isNaN(d))return f;for(a.isArray(f)||(e[c]=f=[]);f.length<d+1;)f.push(!0);return f[d]},isGroupVisible:function(a){return this._isGroupVisible(a)},_isGroupVisible:function(a){var b=!1,c=this.seriesGroups[a].series;if(!c)return b;for(var d=0;d<c.length;d++)if(this._isSerieVisible(a,d)){b=!0;break}return b},_toggleSerie:function(b,c,d,e){var f=!this._isSerieVisible(b,c,d);void 0!=e&&(f=e);var g=this.seriesGroups[b],h=g.series[c];if(this._raiseEvent("toggle",{state:f,seriesGroup:g,serie:h,elementIndex:d}),isNaN(d))this._itemsToggleState[b][c]=f;else{var i=this._itemsToggleState[b][c];for(a.isArray(i)||(i=[]);i.length<d;)i.push(!0);i[d]=f}this._isToggleRefresh=!0,this.update(),this._isToggleRefresh=!1},showSerie:function(a,b,c){this._toggleSerie(a,b,c,!0)},hideSerie:function(a,b,c){this._toggleSerie(a,b,c,!1)},_setLegendToggleHandler:function(a,b,c,d){var e=this.seriesGroups[a],f=e.series[b],g=f.enableSeriesToggle;if(void 0==g&&(g=0!=e.enableSeriesToggle),g){var h=this;this.renderer.addHandler(d,"click",function(d){h._toggleSerie(a,b,c)})}},_renderLegend:function(a,b){for(var c=this,d=[],e=0;e<c.seriesGroups.length;e++){var f=c.seriesGroups[e];if(0!=f.showLegend)for(var g=0;g<f.series.length;g++){var h=f.series[g];if(0!=h.showLegend){var j,i=c._getSerieSettings(e,g);if("pie"!=f.type&&"donut"!=f.type){var l=h.legendFormatSettings||f.legendFormatSettings,m=h.legendFormatFunction||f.legendFormatFunction;j=c._formatValue(h.displayText||h.dataField||"",l,m,e,g,NaN);var p=c._getSeriesColors(e,g),q=this._get([h.legendFillColor,h.legendColor,p.fillColor]),r=this._get([h.legendLineColor,h.legendColor,p.lineColor]);d.push({groupIndex:e,seriesIndex:g,text:j,css:h.displayTextClass,fillColor:q,lineColor:r,opacity:i.opacity})}else for(var k=c._getXAxis(e),l=h.legendFormatSettings||f.legendFormatSettings||k.formatSettings||h.formatSettings||f.formatSettings,m=h.legendFormatFunction||f.legendFormatFunction||k.formatFunction||h.formatFunction||f.formatFunction,n=c._getDataLen(e),o=0;o<n;o++){j=c._getDataValue(o,h.displayText,e),j=c._formatValue(j,l,m,e,g,o);var p=c._getColors(e,g,o);d.push({groupIndex:e,seriesIndex:g,itemIndex:o,text:j,css:h.displayTextClass,fillColor:p.fillColor,lineColor:p.lineColor,opacity:i.opacity})}}}}return c._renderChartLegend(d,a,b,c.legendLayout&&"vertical"==c.legendLayout.flow)},_getInterval:function(a,b){if(!a)return b;var c=this._get([a.unitInterval,b]);return isNaN(a.step)||(c=a.step*b),c},_getOffsets:function(a,b,c,d,e,f,g,h,i){var j=this._getInterval(e[a],h),k=[];(""==a||e[a].visible&&"custom"!=e[a].visible)&&(k=this._generateIntervalValues(d,j,h,g,i));var l;if("labels"!=a){var m=g?f.left:0;if(!g&&h>1&&(m=f.left*(h+1)),1==k.length&&(m*=2),l=this._valuesToOffsets(k,b,d,c,f,!1,m),!g){var n=(f.left+f.right)*j/h;b.flip?l.unshift(l[0]+n):l.push(l[l.length-1]+n)}}else{var m=f.left;1==k.length&&(m*=2),l=this._valuesToOffsets(k,b,d,c,f,g,m)}var o=this._arraysToObjectsArray([k,l],["value","offset"]);if(b[a]&&b[a].custom)for(var p=this._objectsArraysToArray(b[a].custom,"value"),q=this._objectsArraysToArray(b[a].custom,"offset"),r=this._valuesToOffsets(p,b,d,c,f,g,f.left),s=0;s<b[a].custom.length;s++)o.push({value:p[s],offset:isNaN(q[s])?r[s]:q[s]});return o},_renderXAxis:function(b,c,d,e){var f=this,g=f._getXAxis(b),h=f.seriesGroups[b],i="horizontal"==h.orientation,j={width:0,height:0},k=f._getAxisSettings(g);if(!g||!k.visible||"spider"==h.type)return j;if(!f._isGroupVisible(b)||this._isPieGroup(b))return j;for(var l=f._alignValuesWithTicks(b);f._renderData.length<b+1;)f._renderData.push({});f.rtl&&(g.flip=!0);var m=i?c.height:c.width,n=g.text,o=f._calculateXOffsets(b,m),p=o.axisStats,q=g.rangeSelector,r=0;if(q){if(!this._moduleRangeSelector)throw"Please include 'tischart.rangeselector.js'";r=this._selectorGetSize(g)}var s=i&&"right"==g.position||!i&&"top"==g.position;!d&&q&&(i?(c.width-=r,"right"!=g.position&&(c.x+=r)):(c.height-=r,"top"==g.position&&(c.y+=r)));var t={rangeLength:o.rangeLength,itemWidth:o.itemWidth,intervalWidth:o.intervalWidth,data:o,settings:k,isMirror:s,rect:c};f._renderData[b].xAxis=t;var u=p.interval;if(isNaN(u))return j;i&&(k.title.angle-=90,k.labels.angle-=90);var y,v=this._getInterval(k.gridLines,u),w=this._getInterval(k.tickMarks,u),x=this._getInterval(k.labels,u),z=p.min,A=p.max,B=o.padding,C=1==g.flip||f.rtl,D={min:z,max:A};p.logAxis.enabled&&(D.min=p.logAxis.minPow,D.max=p.logAxis.maxPow),"date"==g.type?(k.gridLines.offsets=this._generateDTOffsets(z,A,m,B,v,u,p.dateTimeUnit,l,NaN,!1,C),k.tickMarks.offsets=this._generateDTOffsets(z,A,m,B,w,u,p.dateTimeUnit,l,NaN,!1,C),y=this._generateDTOffsets(z,A,m,B,x,u,p.dateTimeUnit,l,NaN,!0,C)):(k.gridLines.offsets=this._getOffsets("gridLines",g,m,p,k,B,l,u),k.tickMarks.offsets=this._getOffsets("tickMarks",g,m,p,k,B,l,u),y=this._getOffsets("labels",g,m,p,k,B,l,u));var H,E=f.renderer.getRect();E.width,c.x,c.width,f._getDataLen(b);f._elementRenderInfo&&f._elementRenderInfo.length>b&&(H=f._elementRenderInfo[b].xAxis);var J,I=[];k.labels.formatFunction&&(J=k.labels.formatFunction);var K;k.labels.formatSettings&&(K=a.extend({},k.labels.formatSettings)),"date"==g.type&&(g.dateFormat&&!J?K?K.dateFormat=K.dateFormat||g.dateFormat:K={dateFormat:g.dateFormat}:J||K&&(!K||K.dateFormat)||(J=this._getDefaultDTFormatFn(g.baseUnit||"day")));for(var L=0;L<y.length;L++){var M=y[L].value,N=y[L].offset;if(!isNaN(N)){var O=void 0;"date"!=g.type&&p.useIndeces&&g.dataField&&(O=Math.round(M),void 0==(M=f._getDataValue(O,g.dataField))&&(M=""));var n=f._formatValue(M,K,J,b,void 0,O);void 0!=n&&""!=n.toString()||(isNaN(O)&&(O=L),O>=p.filterRange.min&&O<=p.filterRange.max&&(n=p.useIndeces?(p.min+O).toString():void 0==M?"":M.toString()));var P={key:M,text:n,targetX:N,x:N};H&&H.itemOffsets[M]&&(P.x=H.itemOffsets[M].x,P.y=H.itemOffsets[M].y),I.push(P)}}var Q=f._getAnimProps(b),R=Q.enabled&&I.length<500?Q.duration:0;0==f.enableAxisTextAnimation&&(R=0);var S={items:I,renderData:t},T=f._renderAxis(i,s,k,{x:c.x,y:c.y,width:c.width,height:c.height},e,u,!1,!0,S,d,R);return i?T.width+=r:T.height+=r,T},_animateAxisText:function(a,b){for(var c=a.items,d=a.textSettings,e=0;e<c.length;e++){var f=c[e];if(f&&f.visible){var g=f.targetX,h=f.targetY;isNaN(f.x)||isNaN(f.y)||(g=f.x+(g-f.x)*b,h=f.y+(h-f.y)*b),f.element&&(this.renderer.removeElement(f.element),f.element=void 0),f.element=this.renderer.text(f.text,g,h,f.width,f.height,d.angle,{class:d.style},!1,d.halign,d.valign,d.textRotationPoint)}}},_getPolarAxisCoords:function(b,c){var d=this.seriesGroups[b],e=c.x+a.tis.getNum([d.offsetX,c.width/2]),f=c.y+a.tis.getNum([d.offsetY,c.height/2]),g=Math.min(c.width,c.height),h=d.radius;this._isPercent(h)&&(h=parseFloat(h)/100*g/2),isNaN(h)&&(h=g/2*.6);var i=this._alignValuesWithTicks(b),j=this._get([d.startAngle,d.minAngle,0])-90;j=isNaN(j)?0:2*Math.PI*j/360;var k=this._get([d.endAngle,d.maxAngle,360])-90;if(k=isNaN(k)?2*Math.PI:2*Math.PI*k/360,j>k){var l=j;j=k,k=l}var m=a.tis._rnd(Math.abs(j-k)/(2*Math.PI),.001,!0),n=2*Math.PI*h*m,o=this._calcGroupOffsets(b,c).xoffsets;if(o){var p=!(Math.abs(Math.abs(k-j)-2*Math.PI)>1e-5);if(d.spider){axisStats=this._getXAxisStats(b,this._getXAxis(b),n);var q=axisStats.interval;(isNaN(q)||0==q)&&(q=1);var r=(axisStats.max-axisStats.min)/q+(p?1:0);if((r=Math.round(r))>2){var s=Math.cos(Math.abs(k-j)/2/r);s=a.tis._rnd(s,.01),0==s&&(s=1);var t=h/s;t>h&&i&&(h=t)}}return h=a.tis._ptrnd(h),{x:e,y:f,r:h,adjR:this._get([t,h]),itemWidth:o.itemWidth,rangeLength:o.rangeLength,valuesOnTicks:i,startAngle:j,endAngle:k,isClosedCircle:p,axisSize:n}}},_toPolarCoord:function(b,c,d,e){var f=Math.abs(b.startAngle-b.endAngle)/(2*Math.PI),g=2*(d-c.x)*Math.PI*f/Math.max(1,c.width)+b.startAngle,h=(c.height+c.y-e)*b.r/Math.max(1,c.height),i=b.x+h*Math.cos(g),j=b.y+h*Math.sin(g);return{x:a.tis._ptrnd(i),y:a.tis._ptrnd(j)}},_renderSpiderAxis:function(b,c){var d=this,e=d._getXAxis(b),f=this._getAxisSettings(e);if(e&&f.visible){var g=d.seriesGroups[b],h=d._getPolarAxisCoords(b,c);if(h){var i=a.tis._ptrnd(h.x),j=a.tis._ptrnd(h.y),k=h.adjR,l=h.startAngle,m=h.endAngle;if(!(k<1)){var n=a.tis._rnd(Math.abs(l-m)/(2*Math.PI),.001,!0),o=2*Math.PI*k*n,p=h.isClosedCircle,q=this._renderData[b].xoffsets;if(q.rangeLength){var r=q.axisStats.interval;(isNaN(r)||r<1)&&(r=1);var s="horizontal"==g.orientation;for(s&&"right"==e.position||!s&&e.position;d._renderData.length<b+1;)d._renderData.push({});var u={rangeLength:q.rangeLength,itemWidth:q.itemWidth,data:q,rect:c,settings:f};d._renderData[b].xAxis=u,d._renderData[b].polarCoords=h;for(var v=!0,w=0;w<b;w++){var y=(d._renderData[w].xAxis,d._renderData[w].polarCoords),z=d._getXAxis(w),A=!1;for(var B in h)if(h[B]!=y[B]){A=!0;break}A&&z==e||(v=!1)}var K,C=f.gridLines,D=f.tickMarks,E=f.labels,F=this._getInterval(C,r),G=this._getInterval(D,r),H=this._getInterval(E,r),I=d._alignValuesWithTicks(b),J=d.renderer,L=q.axisStats,M=L.min,N=L.max,O=this._getPaddingSize(q.axisStats,e,I,o,!0,p,!1),P=1==e.flip||d.rtl;"date"==e.type?(C.offsets=this._generateDTOffsets(M,N,o,O,F,r,e.baseUnit,!0,0,!1,P),D.offsets=this._generateDTOffsets(M,N,o,O,G,r,e.baseUnit,!0,0,!1,P),K=this._generateDTOffsets(M,N,o,O,H,r,e.baseUnit,!0,0,!0,P)):(f.gridLines.offsets=this._getOffsets("gridLines",e,o,L,f,O,!0,r),f.tickMarks.offsets=this._getOffsets("tickMarks",e,o,L,f,O,!0,r),K=this._getOffsets("labels",e,o,L,f,O,!0,r));var T,Q=d.renderer.getRect();Q.width,c.x,c.width,d._getDataLen(b);d._elementRenderInfo&&d._elementRenderInfo.length>b&&(T=d._elementRenderInfo[b].xAxis);for(var U=[],V=this._getDataLen(b),w=0;w<K.length;w++){var W=K[w].offset,X=K[w].value;if("date"!=e.type&&L.useIndeces&&e.dataField){var Y=Math.round(X);if(Y>=V)continue;X=d._getDataValue(Y,e.dataField),void 0==X&&(X="")}var Z=d._formatValue(X,E.formatSettings,E.formatFunction,b,void 0,Y);void 0!=Z&&""!=Z.toString()||(Z=L.useIndeces?(L.min+w).toString():void 0==X?"":X.toString());var $={key:X,text:Z,targetX:W,x:W};T&&T.itemOffsets[X]&&($.x=T.itemOffsets[X].x,$.y=T.itemOffsets[X].y),U.push($)}var aa={stroke:C.color,fill:"none","stroke-width":C.width,"stroke-dasharray":C.dashStyle||""};if(!g.spider)if(1==n)J.circle(i,j,k,aa);else{var ba=-l/Math.PI*180,ca=-m/Math.PI*180;this.renderer.pieslice(i,j,0,k,Math.min(ba,ca),Math.max(ba,ca),void 0,aa)}var da=U.length,fa=(Math.PI,l);if(C.visible&&v){I||p||C.offsets.unshift({offset:-O.right});for(var w=0;w<C.offsets.length;w++){var ia=C.offsets[w].offset;I||(ia+=p?O.right/2:O.right);var ja=fa+2*ia*Math.PI*n/Math.max(1,o);if(!(ja-m>.01)){var ka=a.tis._ptrnd(i+k*Math.cos(ja)),la=a.tis._ptrnd(j+k*Math.sin(ja));J.line(i,j,ka,la,aa)}}}if(D.visible&&v){var ma=5,na={stroke:D.color,fill:"none","stroke-width":D.width,"stroke-dasharray":D.dashStyle||""};I||p||D.offsets.unshift({offset:-O.right});for(var w=0;w<D.offsets.length;w++){var ia=D.offsets[w].offset;I||(ia+=p?O.right/2:O.right);var ja=fa+2*ia*Math.PI*n/Math.max(1,o);if(!(ja-m>.01)){var oa={x:i+k*Math.cos(ja),y:j+k*Math.sin(ja)},pa={x:i+(k+ma)*Math.cos(ja),y:j+(k+ma)*Math.sin(ja)};J.line(a.tis._ptrnd(oa.x),a.tis._ptrnd(oa.y),a.tis._ptrnd(pa.x),a.tis._ptrnd(pa.y),na)}}}var qa=[];if(g.spider){var ra=[];ra="date"==e.type?this._generateDTOffsets(M,N,o,O,r,r,e.baseUnit,!0,0,!1,P):this._getOffsets("",e,o,L,f,O,!0,r),I||p||ra.unshift({offset:-O.right});for(var w=0;w<ra.length;w++){var ia=ra[w].offset;I||(ia+=p?O.right/2:O.right);var ja=fa+2*ia*Math.PI*n/Math.max(1,o);ja-m>.01||qa.push(ja)}u.offsetAngles=qa}var sa=d._renderSpiderValueAxis(b,c,I?h.adjR:h.r,qa);if(sa||(sa=[]),g.spider){if(!I)for(var w=0;w<sa.length;w++)sa[w]=sa[w]*h.adjR/h.r;sa.push(k),this._renderSpiderLines(i,j,sa,h,qa,aa)}if(v&&E.visible){u.polarLabels=[];for(var w=0;w<U.length;w++){var ia=U[w].x,ja=fa+2*ia*Math.PI*n/Math.max(1,o);ja=(360-ja/(2*Math.PI)*360)%360,ja<0&&(ja=360+ja);var wa,ta=J.measureText(U[w].text,0,{class:f.labels.style}),ua=(I?h.adjR:h.r)+(D.visible?7:2),va=f.labels;if(va.autoRotate){var xa=a.tis._ptRotate(i-ta.width/2,j-ua-ta.height,i,j,-ja/180*Math.PI),ya=a.tis._ptRotate(i+ta.width/2,j-ua,i,j,-ja/180*Math.PI);ta.width=Math.abs(xa.x-ya.x),ta.height=Math.abs(xa.y-ya.y),wa={x:Math.min(xa.x,ya.x),y:Math.min(xa.y,ya.y)}}else wa=this._adjustTextBoxPosition(i,j,ta,ua,ja,!1,!1,!1);u.polarLabels.push({x:wa.x,y:wa.y,value:U[w].text}),J.text(U[w].text,wa.x,wa.y,ta.width,ta.height,va.autoRotate?90-ja:va.angle,{class:va.style},!1,va.halign,va.valign)}}}}}}},_renderSpiderLines:function(b,c,d,e,f,g){for(var h=this.renderer,k=(e.startAngle,e.endAngle,e.isClosedCircle),l=0;l<d.length;l++){for(var m=d[l],n=void 0,o=void 0,p=0;p<f.length;p++){var q=f[p],r=a.tis._ptrnd(b+m*Math.cos(q)),s=a.tis._ptrnd(c+m*Math.sin(q));n&&h.line(n.x,n.y,r,s,g),n={x:r,y:s},o||(o={x:r,y:s})}o&&k&&h.line(n.x,n.y,o.x,o.y,g)}},_renderSpiderValueAxis:function(b,c,d,e){var g=this.seriesGroups[b],h=this._getPolarAxisCoords(b,c);if(h){var i=a.tis._ptrnd(h.x),j=a.tis._ptrnd(h.y);d=d||h.r;var k=h.startAngle,l=h.endAngle,m=a.tis._rnd(Math.abs(k-l)/(2*Math.PI),.001,!0);if(!(d<1)){d=a.tis._ptrnd(d);var n=this._getValueAxis(b);if(settings=this._getAxisSettings(n),n&&0!=settings.visible){var o=this._stats.seriesGroups[b].mu,p=settings.labels,q=p.formatSettings;-1!=g.type.indexOf("stacked")&&-1!=g.type.indexOf("100")&&!q&&(q={sufix:"%"});var s=this._get([p.step,p.unitInterval/o]);isNaN(s)&&(s=1),s=Math.max(1,Math.round(s)),this._calcValueAxisItems(b,d,s);var t=settings.gridLines,u=settings.tickMarks,x=(this._getInterval(t,o),this._getInterval(u,o),settings.labels),y={stroke:t.color,fill:"none","stroke-width":1,"stroke-dasharray":t.dashStyle||""},z=this._renderData[b].valueAxis,A=z.items,B=k;if(A.length&&settings.line.visible){isNaN(settings.line.angle)||(B=2*Math.PI*settings.line.angle/360);var C=i+Math.cos(B)*d,D=j+Math.sin(B)*d;if(-1==e.indexOf(B)){var E=a.extend({},y);E["stroke-width"]=settings.line.lineWidth,E.stroke=settings.line.color,E["stroke-dasharray"]=settings.line.dashStyle,this.renderer.line(i,j,C,D,E)}}A=A.reverse();var F=this.renderer;z.polarLabels=[];for(var G=0;G<A.length-1;G++){var H=A[G];if(!isNaN(H)){var I=x.formatFunction?x.formatFunction(H):this._formatNumber(H,q),J=F.measureText(I,0,{class:x.style}),K=i+(0!=n.showTickMarks?3:2),L=j-z.itemWidth*G-J.height/2,M=a.tis._ptRotate(K,L,i,j,B),N=a.tis._ptRotate(K+J.width,L+J.height,i,j,B);K=Math.min(M.x,N.x),L=Math.min(M.y,N.y),J.width=Math.abs(M.x-N.x),J.height=Math.abs(M.y-N.y),K+=settings.labels.textOffset.x,L+=settings.labels.textOffset.y,z.polarLabels.push({x:K,y:L,value:I}),F.text(I,K,L,J.width,J.height,x.autoRotate?90+180*k/Math.PI:x.angle,{class:x.style},!1,x.halign,x.valign)}}var O=1==n.logarithmicScale,P=O?A.length:z.rangeLength;aIncrement=2*Math.PI/P;var Q=0!=n.valuesOnTicks,R=this._stats.seriesGroups[b],S=R.mu,T=1==n.logarithmicScale;n.logarithmicScaleBase;T&&(S=1);var V={min:R.min,max:R.max,logAxis:{enabled:1==T,base:n.logarithmicScaleBase,minPow:R.minPow,maxPow:R.maxPow}};(t.visible||g.spider||n.alternatingBackgroundColor||n.alternatingBackgroundColor2)&&(t.offsets=this._getOffsets("gridLines",n,d,V,settings,{left:0,right:0},Q,S));var W=[];if(t.visible||g.spider)for(var y={stroke:t.color,fill:"none","stroke-width":1,"stroke-dasharray":t.dashStyle||""},G=0;G<t.offsets.length;G++){var L=a.tis._ptrnd(t.offsets[G].offset);if(L!=d)if(g.spider)W.push(L);else if(1!=m){var X=-k/Math.PI*180,Y=-l/Math.PI*180;this.renderer.pieslice(i,j,0,L,Math.min(X,Y),Math.max(X,Y),void 0,y)}else F.circle(i,j,L,y)}if(n.tickMarks&&(n.tickMarks.visible||n.showTickMarks)||(u.visible=!1),u.visible){u.offsets=this._getOffsets("tickMarks",n,d,V,settings,{left:0,right:0},Q,S),tickMarkSize=2*u.size;for(var y={stroke:u.color,fill:"none","stroke-width":1,"stroke-dasharray":u.dashStyle||""},G=0;G<u.offsets.length;G++){var Z=u.offsets[G].offset,M={x:i+Z*Math.cos(B)-tickMarkSize/2*Math.sin(B+Math.PI/2),y:j+Z*Math.sin(B)-tickMarkSize/2*Math.cos(B+Math.PI/2)},N={x:i+Z*Math.cos(B)+tickMarkSize/2*Math.sin(B+Math.PI/2),y:j+Z*Math.sin(B)+tickMarkSize/2*Math.cos(B+Math.PI/2)};F.line(a.tis._ptrnd(M.x),a.tis._ptrnd(M.y),a.tis._ptrnd(N.x),a.tis._ptrnd(N.y),y)}}return W}}}},_renderAxis:function(b,c,d,e,f,g,h,i,j,k,l){if(d.customDraw&&!k)return{width:NaN,height:NaN};var m=d.title,n=d.labels,p=(d.gridLines,d.tickMarks),q=d.padding,r=p.visible?p.size:0,s=2,t={width:0,height:0},u={width:0,height:0};b?t.height=u.height=e.height:t.width=u.width=e.width,!k&&c&&b&&(e.x-=e.width);var v=j.renderData,w=v.itemWidth;if(m.visible&&void 0!=m.text&&""!=m){var x=m.angle,y=this.renderer.measureText(m.text,x,{class:m.style});u.width=y.width,u.height=y.height,k||this.renderer.text(m.text,e.x+m.offset.x+(b?c?-q.right-s+2*e.width-u.width:s+q.left:0),e.y+m.offset.y+(b?0:c?q.top+s:e.height-s-u.height-q.bottom),b?u.width:e.width,b?e.height:u.height,x,{class:m.style},!0,m.halign,m.valign,m.rotationPoint)}var z=0,A=i?-w/2:0;i&&!b&&(n.halign="center");var B=e.x,C=e.y,D=n.textOffset;D&&(isNaN(D.x)||(B+=D.x),isNaN(D.y)||(C+=D.y)),b?(B+=q.left+s+(u.width>0?u.width+s:0)+(c?e.width-u.width:0),C+=A):(B+=A,c?(C+=u.height>0?u.height+3*s:2*s,C+=r-(i?r:r/4)):C+=i?r:r/4,C+=q.top);var E=0,F=0,G=j.items;v.itemOffsets={},!this._isToggleRefresh&&this._isUpdate||(l=0);for(var H=!1,I=0,J=0;J<G.length&&n.visible;J++,z+=w)if(G[J]&&!isNaN(w)){var K=G[J].text;isNaN(G[J].targetX)||(z=G[J].targetX);var y=this.renderer.measureText(K,n.angle,{class:n.style});if(y.width>F&&(F=y.width),y.height>E&&(E=y.height),I+=b?E:F,!k){if(b&&z>e.height+2||!b&&z>e.width+2)continue;var L=b?B+(c?0==u.width?r:r-s:0):B+z,M=b?C+z:C;v.itemOffsets[G[J].key]={x:L,y:M},H||(!isNaN(G[J].x)||!isNaN(G[J].y)&&l)&&(H=!0),G[J].targetX=L,G[J].targetY=M,G[J].width=b?e.width-q.left-q.right-2*s-r-(u.width>0?u.width+s:0):w,G[J].height=b?w:e.height-q.top-q.bottom-2*s-r-(u.height>0?u.height+s:0),G[J].visible=!0}}if(v.avgWidth=0==G.length?0:I/G.length,!k){var N={items:G,textSettings:n};if(!isNaN(l)&&H||(l=0),this._animateAxisText(N,0==l?1:0),0!=l){var O=this;this._enqueueAnimation("series",void 0,void 0,l,function(a,b,c){O._animateAxisText(b,c)},N)}}t.width+=2*s+r+u.width+F+(b&&u.width>0?s:0),t.height+=2*s+r+u.height+E+(!b&&u.height>0?s:0),b?t.width+=q.left+q.right:t.height+=q.top+q.bottom;if(!k&&d.line.visible){var Q={stroke:d.line.color,"stroke-width":d.line.width,"stroke-dasharray":d.line.dashStyle||""};if(b){var L=e.x+e.width+(c?q.left:-q.right);L=a.tis._ptrnd(L),this.renderer.line(L,e.y,L,e.y+e.height,Q)}else{var M=a.tis._ptrnd(e.y+(c?e.height-q.bottom:q.top));this.renderer.line(a.tis._ptrnd(e.x),M,a.tis._ptrnd(e.x+e.width+1),M,Q)}}return t.width=a.tis._rup(t.width),t.height=a.tis._rup(t.height),t},_drawPlotAreaLines:function(b,c,d){var e=this.seriesGroups[b],f="horizontal"!=e.orientation;if(this._renderData&&!(this._renderData.length<=b)){var g=c?"valueAxis":"xAxis",h=this._renderData[b][g];if(h){var i=this._renderData.axisDrawState;i||(i=this._renderData.axisDrawState={});var k,j="";c?(j="valueAxis_"+(e.valueAxis?b:"")+(f?"swap":""),k=this._getValueAxis(b)):(j="xAxis_"+(e.xAxis||e.categoryAxis?b:"")+(f?"swap":""),k=this._getXAxis(b)),i=i[j]?i[j]:i[j]={},c||(f=!f);var l=h.settings;if(l&&!l.customDraw){var m=l.gridLines,n=l.tickMarks,o=l.padding,p=h.rect,q=this._plotRect;if(m&&n){var r=.5,s={},t={stroke:m.color,"stroke-width":m.width,"stroke-dasharray":m.dashStyle||""},u=c?p.y+p.height:p.x,v=m.offsets;if(c&&!k.flip&&(v=a.extend([],v),v=v.reverse()),v&&v.length>0)for(var w=NaN,y=(v.length,0);y<v.length;y++)if(f?(lineOffset=a.tis._ptrnd(p.y+v[y].offset),lineOffset<p.y-r&&(lineOffset=a.tis._ptrnd(p.y)),lineOffset>p.y+p.height&&(lineOffset=p.y+p.height)):(lineOffset=a.tis._ptrnd(p.x+v[y].offset),lineOffset>p.x+p.width+r&&(lineOffset=a.tis._ptrnd(p.x+p.width))),!isNaN(lineOffset)&&(isNaN(w)||!(Math.abs(lineOffset-w)<2))){if(w=lineOffset,d.gridLines&&0!=m.visible&&1!=i.gridLines&&(f?this.renderer.line(a.tis._ptrnd(q.x),lineOffset,a.tis._ptrnd(q.x+q.width),lineOffset,t):this.renderer.line(lineOffset,a.tis._ptrnd(q.y),lineOffset,a.tis._ptrnd(q.y+q.height),t)),s[lineOffset]=!0,d.alternatingBackground&&(m.alternatingBackgroundColor||m.alternatingBackgroundColor2)&&1!=i.alternatingBackground){var z=y%2==0?m.alternatingBackgroundColor2:m.alternatingBackgroundColor;if(y>0&&z){var A;A=f?this.renderer.rect(a.tis._ptrnd(q.x),u,a.tis._ptrnd(q.width-1),lineOffset-u,t):this.renderer.rect(u,a.tis._ptrnd(q.y),lineOffset-u,a.tis._ptrnd(q.height),t),this.renderer.attr(A,{"stroke-width":0,fill:z,opacity:m.alternatingBackgroundOpacity||1})}}u=lineOffset}var t={stroke:n.color,"stroke-width":n.width,"stroke-dasharray":n.dashStyle||""};if(d.tickMarks&&n.visible&&1!=i.tickMarks)for(var B=n.size,v=n.offsets,w=NaN,y=0;y<v.length;y++)if(f?(lineOffset=a.tis._ptrnd(p.y+v[y].offset),lineOffset<p.y-r&&(lineOffset=a.tis._ptrnd(p.y)),lineOffset>p.y+p.height&&(lineOffset=p.y+p.height)):(lineOffset=a.tis._ptrnd(p.x+v[y].offset),lineOffset>p.x+p.width+r&&(lineOffset=a.tis._ptrnd(p.x+p.width))),!isNaN(lineOffset)&&(isNaN(w)||!(Math.abs(lineOffset-w)<2))){if(s[lineOffset-1]?lineOffset--:s[lineOffset+1]&&lineOffset++,f){if(lineOffset>p.y+p.height+r)break}else if(lineOffset>p.x+p.width+r)break;w=lineOffset;var C=h.isMirror?B:-B;if(f){var D=p.x+p.width+("right"==k.position?o.left:-o.right);c||(D=p.x+(h.isMirror?o.left:-o.right+p.width)),this.renderer.line(D,lineOffset,D+C,lineOffset,t)}else{var E=p.y+(h.isMirror?p.height:0);E+=h.isMirror?-o.bottom:o.top,E=a.tis._ptrnd(E),this.renderer.line(lineOffset,E,lineOffset,E-C,t)}}i.tickMarks=i.tickMarks||d.tickMarks,i.gridLines=i.gridLines||d.gridLines,i.alternatingBackground=i.alternatingBackground||d.alternatingBackground}}}}},_calcValueAxisItems:function(a,b,c){var d=this._stats.seriesGroups[a];if(!d||!d.isValid)return!1;var e=this.seriesGroups[a],g=(e.orientation,this._getValueAxis(a)),h=0!=g.valuesOnTicks,j=(g.dataField,d.intervals),k=b/j,l=d.min,m=d.mu,n=1==g.logarithmicScale,o=g.logarithmicScaleBase||10,p=-1!=e.type.indexOf("stacked")&&-1!=e.type.indexOf("100");for(n&&(m=isNaN(g.unitInterval)?1:g.unitInterval),h||(j=Math.max(j-1,1));this._renderData.length<a+1;)this._renderData.push({});this._renderData[a].valueAxis={};var q=this._renderData[a].valueAxis;q.itemWidth=q.intervalWidth=k,q.items=[];for(var r=q.items,s=0;s<=j;s++){var t=0;t=n?p?d.max/Math.pow(o,j-s):l*Math.pow(o,s):h?l+s*m:l+(s+.5)*m,s%c==0?r.push(t):r.push(NaN)}return q.rangeLength=n&&!p?d.intervals:d.intervals*m,1!=g.flip&&(r=r.reverse()),!0},_getDecimalPlaces:function(a,b,c){var d=0;isNaN(c)&&(c=10);for(var e=0;e<a.length;e++){var f=void 0===b?a[e]:a[e][b];if(!isNaN(f)){for(var g=f.toString(),h=0;h<g.length;h++)if((g[h]<"0"||g[h]>"9")&&(d=g.length-(h+1))>=0)return Math.min(d,c);for(d>0&&(f*=Math.pow(10,d));Math.round(f)!=f&&d<c;)d++,f*=10}}return d},_renderValueAxis:function(a,b,c,d){var e=this.seriesGroups[a],f="horizontal"==e.orientation,g=this._getValueAxis(a);if(!g)throw"SeriesGroup "+a+" is missing valueAxis definition";var h={width:0,height:0};if(!this._isGroupVisible(a)||this._isPieOnlySeries()||"spider"==e.type)return h;var i=0!=g.valuesOnTicks,j=this._stats.seriesGroups[a],k=j.mu,l=1==g.logarithmicScale;g.logarithmicScaleBase;if(l&&(k=isNaN(g.unitInterval)?1:g.unitInterval),0==k&&(k=1),isNaN(k))return h;var n=this._getAxisSettings(g),o=n.title,p=n.labels,q=g.labels||{};this._get([g.horizontalTextAlignment,q.horizontalAlignment])||0!=p.angle||(p.halign=f?"center":"right"==g.position?"left":"right");var s=this._get([p.step,p.unitInterval/k]);if(isNaN(s)&&(s=1),s=Math.max(1,Math.round(s)),!this._calcValueAxisItems(a,f?b.width:b.height,s)||!n.visible)return h;f||(o.angle=this.rtl?90:-90,"centercenter"==o.rotationPoint&&("top"==o.valign?o.rotationPoint="rightcenter":"bottom"==o.valign&&(o.rotationPoint="leftcenter")));var t=this._renderData[a].valueAxis,u=p.formatSettings;-1!=e.type.indexOf("stacked")&&-1!=e.type.indexOf("100")&&!u&&(u={sufix:"%"}),p.formatFunction||u&&u.decimalPlaces||(u=u||{},u.decimalPlaces=this._getDecimalPlaces([j.min,j.max,k],void 0,3));var w=n.gridLines,y=(l||this._getInterval(w,k),f?b.width:b.height),z=1==g.flip;g.flip=!z;var A={min:j.min,max:j.max,logAxis:{enabled:1==l,base:g.logarithmicScaleBase,minPow:j.minPow,maxPow:j.maxPow}};(w.visible||g.alternatingBackgroundColor||g.alternatingBackgroundColor2)&&(w.offsets=this._getOffsets("gridLines",g,y,A,n,{left:0,right:0},i,k));var B=n.tickMarks;B.visible&&(B.offsets=this._getOffsets("tickMarks",g,y,A,n,{left:0,right:0},i,k)),labelOffsets=this._getOffsets("labels",g,y,A,n,{left:0,right:0},i,k,!i),g.flip=z;var D,C=[];this._elementRenderInfo&&this._elementRenderInfo.length>a&&(D=this._elementRenderInfo[a].valueAxis);for(var E=0;E<labelOffsets.length;E++){var F=labelOffsets[E].value;if(isNaN(labelOffsets[E].offset))C.push(void 0);else{var G=p.formatFunction?p.formatFunction(F):isNaN(F)?F:this._formatNumber(F,u),H={key:F,text:G};D&&D.itemOffsets[F]&&(H.x=D.itemOffsets[F].x,H.y=D.itemOffsets[F].y),H.targetX=labelOffsets[E].offset,isNaN(H.targetX)||C.push(H)}}var I=f&&"top"==g.position||!f&&"right"==g.position||!f&&this.rtl&&"left"!=g.position,J={items:C,renderData:t},K=this._getAnimProps(a),L=K.enabled&&C.length<500?K.duration:0;return 0==this.enableAxisTextAnimation&&(L=0),t.settings=n,t.isMirror=I,t.rect=b,this._renderAxis(!f,I,n,b,d,k,l,!0,J,c,L)},_objectsArraysToArray:function(b,c){var d=[];if(!a.isArray(b))return d;for(var e=0;e<b.length;e++)d.push(b[e][c]);return d},_arraysToObjectsArray:function(a,b){var c=[];if(a.length!=b.length)return c;for(var d=0;d<a.length;d++)for(var e=0;e<a[d].length;e++)c.length<=e&&c.push({}),c[e][b[d]]=a[d][e];return c},_valuesToOffsets:function(b,c,d,e,f,g,h){var i=[];if(!c||!a.isArray(b))return i;var j=d.logAxis.base,k=d.logAxis.enabled?"logarithmic":"linear",l=c.flip,m=e,n=0,o=0;f&&!isNaN(f.left)&&(n=f.left),f&&!isNaN(f.right)&&(o=f.right),m=e-n-o,e=m;for(var p=0;p<b.length;p++)x=this._tisPlot.scale(b[p],{min:d.min.valueOf(),max:d.max.valueOf(),type:k,base:j},{min:0,max:g?e:m,flip:l},{}),isNaN(x)?i.push(NaN):(isNaN(h)||(x+=h),x<=e+n+o+1?i.push(a.tis._ptrnd(x)):i.push(NaN));return i},_generateIntervalValues:function(a,b,c,d,e){var f=[],g=a.min,h=a.max;if(a.logAxis&&a.logAxis.enabled&&(g=a.logAxis.minPow,h=a.logAxis.maxPow),void 0==g||void 0==h)return f;if(g==h)return a.logAxis&&a.logAxis.enabled?[Math.pow(a.logAxis.base,g)]:[g];var i=1;c<1&&(i=1e6,g*=i,h*=i,c*=i);for(var j=g;j<=h;j+=c)f.push(j/i+(e?c/2:0));if(b>c){for(var k=[],l=Math.round(b/c),j=0;j<f.length;j++)j%l==0&&k.push(f[j]);f=k}if(a.logAxis&&a.logAxis.enabled)for(var j=0;j<f.length;j++)f[j]=Math.pow(a.logAxis.base,f[j]);return f},_generateDTOffsets:function(b,c,d,e,f,g,h,i,j,k,l){h||(h="day");var m=[];if(b>c)return m;if(b==c)return k?m.push({offset:i?d/2:e.left,value:b}):i&&m.push({offset:d/2,value:b}),m;var n=d-e.left-e.right,o=b,p=e.left,q=p;g=Math.max(g,1);var r=g,s=Math.min(1,g);for(g>1&&"millisecond"!=h&&(g=1);a.tis._ptrnd(q)<=a.tis._ptrnd(e.left+n+(i?0:e.right));){m.push({offset:q,value:o});var t=new Date(o.valueOf());if("millisecond"==h)t.setMilliseconds(o.getMilliseconds()+g);else if("second"==h)t.setSeconds(o.getSeconds()+g);else if("minute"==h)t.setMinutes(o.getMinutes()+g);else if("hour"==h){var u=t.valueOf();t.setHours(o.getHours()+g),u==t.valueOf()&&t.setHours(o.getHours()+g+1)}else"day"==h?t.setDate(o.getDate()+g):"month"==h?t.setMonth(o.getMonth()+g):"year"==h&&t.setFullYear(o.getFullYear()+g);o=t,q=p+(o.valueOf()-b.valueOf())*s/(c.valueOf()-b.valueOf())*n}if(l)for(var v=0;v<m.length;v++)m[v].offset=d-m[v].offset;if(r>1&&"millisecond"!=h){for(var w=[],v=0;v<m.length;v+=r)w.push({offset:m[v].offset,value:m[v].value});m=w}if(!i&&!k&&m.length>1){var w=[];w.push({offset:0,value:void 0});for(var v=1;v<m.length;v++)w.push({offset:m[v-1].offset+(m[v].offset-m[v-1].offset)/2,value:void 0});var x=w.length;x>1?w.push({offset:w[x-1].offset+(w[x-1].offset-w[x-2].offset)}):w.push({offset:d,value:void 0}),m=w}if(f>g){for(var w=[],y=Math.round(f/r),v=0;v<m.length;v++)v%y==0&&w.push({offset:m[v].offset,value:m[v].value});m=w}return m},_hasStackValueReversal:function(a,b){var c=this.seriesGroups[a];if(-1==c.type.indexOf("stacked"))return!1;for(var e=-1!=c.type.indexOf("waterfall"),f=this._getDataLen(a),g=0,h=!1,i=[],j=0;j<c.series.length;j++)i[j]=this._isSerieVisible(a,j);for(var k=0;k<f;k++){var o=void 0;e||(h=!1);for(var p=0;p<c.series.length;p++)if(i[p]&&(val=this._getDataValueAsNumber(k,c.series[p].dataField,a),!isNaN(val))){if(c.series[p].summary){var q=this._getDataValue(k,c.series[p].summary,a);if(void 0!==q)continue}var r=h?val<0:val<b;if(h=!0,void 0==o&&(o=r),r!=o)return!0;o=r,g+=val}}return!1},_getValueAxis:function(a){var b=void 0==a?this.valueAxis:this.seriesGroups[a].valueAxis||this.valueAxis;return b||(b=this.valueAxis={}),b},_buildStats:function(a){var b={seriesGroups:[]};this._stats=b;for(var c=0;c<this.seriesGroups.length;c++){var d=this.seriesGroups[c];b.seriesGroups[c]={};var e=this._getXAxis(c),f=this._getValueAxis(c),g=this._getXAxisStats(c,e,"horizontal"!=d.orientation?a.width:a.height),h=b.seriesGroups[c];h.isValid=!0;var i="horizontal"==d.orientation?a.width:a.height,j=1==f.logarithmicScale,k=f.logarithmicScaleBase;isNaN(k)&&(k=10);var l=-1!=d.type.indexOf("stacked"),m=l&&-1!=d.type.indexOf("100"),n=-1!=d.type.indexOf("range"),o=-1!=d.type.indexOf("waterfall");if(o&&!this._moduleWaterfall)throw"Please include 'tischart.waterfall.js'";m&&(h.psums=[],h.nsums=[]);var p=NaN,q=NaN,r=NaN,s=NaN,t=f?f.baselineValue:NaN;isNaN(t)&&(t=j&&!m?1:0);var u=!1;0!=t&&l&&(u=this._hasStackValueReversal(c,t))&&(t=0),l&&o&&(u=this._hasStackValueReversal(c,t));var v=this._getDataLen(c),w=0,x=NaN,y=[];if(o)for(var z=0;z<d.series.length;z++)y.push(NaN);for(var A=NaN,B=0;B<v&&h.isValid;B++){if(e.rangeSelector){var C=e.dataField?this._getDataValue(B,e.dataField,c):B;if(C&&g.isDateTime&&(C=this._castAsDate(C,e.dateFormat)),g.useIndeces&&(C=B),C&&(C.valueOf()<g.min.valueOf()||C.valueOf()>g.max.valueOf()))continue}var D=f.minValue,E=f.maxValue;f.baselineValue&&(D=isNaN(D)?t:Math.min(t,D),E=isNaN(E)?t:Math.max(t,E));for(var F=0,G=0,z=0;d.series&&z<d.series.length;z++)if(this._isSerieVisible(c,z)){var H=NaN,I=NaN,J=NaN;if(-1!=d.type.indexOf("candle")||-1!=d.type.indexOf("ohlc")){var K=["Open","Low","Close","High"];for(var L in K){var M=this._getDataValueAsNumber(B,d.series[z]["dataField"+K[L]],c);isNaN(M)||(J=isNaN(I)?M:Math.min(J,M),I=isNaN(I)?M:Math.max(I,M))}}else if(n){var N=this._getDataValueAsNumber(B,d.series[z].dataFieldFrom,c),O=this._getDataValueAsNumber(B,d.series[z].dataFieldTo,c);I=Math.max(N,O),J=Math.min(N,O)}else{if(H=this._getDataValueAsNumber(B,d.series[z].dataField,c),o){if(this._isSummary(c,B)){var P=this._getDataValue(B,d.series[z].summary,c);if(void 0!==P)continue}l?(isNaN(A)||(H+=A),A=H):(isNaN(y[z])?y[z]=H:H+=y[z],y[z]=H)}if(isNaN(H)||j&&H<=0)continue;J=I=H}(isNaN(E)||I>E)&&(isNaN(f.maxValue)||I<=f.maxValue)&&(E=I),(isNaN(D)||J<D)&&(isNaN(f.minValue)||J>=f.minValue)&&(D=J),isNaN(H)||!l||o||(H>t?F+=H:H<t&&(G+=H))}if(m||(isNaN(f.maxValue)||(F=Math.min(f.maxValue,F)),isNaN(f.minValue)||(G=Math.max(f.minValue,G))),j&&m)for(var z=0;z<d.series.length;z++)if(this._isSerieVisible(c,z)){var H=this._getDataValueAsNumber(B,d.series[z].dataField,c);if(isNaN(H)||H<=0)x=.01;else{var Q=0==F?0:H/F;(isNaN(x)||Q<x)&&(x=Q)}}else x=.01;var R=F-G;w<R&&(w=R),m&&(h.psums[B]=F,h.nsums[B]=G),(E>q||isNaN(q))&&(q=E),(D<p||isNaN(p))&&(p=D),(F>r||isNaN(r))&&(r=F),(G<s||isNaN(s))&&(s=G)}m&&(r=0==r?0:Math.max(r,-s),s=0==s?0:Math.min(s,-r)),p==q&&(0==p?(p=-1,q=1):p<0?q=0:j?1==p&&(p/=k,q*=k):p=0);var S={gmin:p,gmax:q,gsumP:r,gsumN:s,gbase:t,isLogAxis:j,logBase:k,minPercent:x,gMaxRange:w,isStacked:l,isStacked100:m,isWaterfall:o,hasStackValueReversal:u,valueAxis:f,valueAxisSize:i};S.isStacked&&(S.gsumN<0&&(S.gmin=Math.min(S.gmin,S.gbase+S.gsumN)),S.gsumP>0&&(S.gmax=Math.max(S.gmax,S.gbase+S.gsumP))),h.context=S}this._mergeCommonValueAxisStats();for(var B=0;B<b.seriesGroups.length;B++){var h=b.seriesGroups[B];if(h.isValid){var T=this._calcOutputGroupStats(h.context);for(var L in T)h[L]=T[L];delete h.context}}},_mergeCommonValueAxisStats:function(){for(var a={},b=0;b<this.seriesGroups.length;b++)if(this._isGroupVisible(b)&&!this.seriesGroups[b].valueAxis){var c=this._stats.seriesGroups[b].context;a.gbase=c.gbase,(isNaN(a.gmin)||c.gmin<a.gmin)&&(a.gmin=c.gmin),(isNaN(a.gmax)||c.gmax>a.gmax)&&(a.gmax=c.gmax),(isNaN(a.gsumP)||c.gsumP>a.gsumP)&&(a.gsumP=c.gsumP),(isNaN(a.gsumN)||c.gsumN<a.gsumN)&&(a.gsumN=c.gsumN),(isNaN(a.logBase)||c.logBase<a.logBase)&&(a.logBase=c.logBase),(isNaN(a.minPercent)||c.minPercent<a.minPercent)&&(a.minPercent=c.minPercent),a.gsumN>0&&(a.gmin=Math.min(a.gmin,a.gbase+a.gsumN)),a.gsumP>0&&(a.gmax=Math.max(a.gmax,a.gbase+a.gsumP))}for(var b=0;b<this.seriesGroups.length;b++)if(!this.seriesGroups[b].valueAxis){var d=this._stats.seriesGroups[b].context;for(var e in a)d[e]=a[e]}},_calcOutputGroupStats:function(b){var c=b.gmin,d=b.gmax,e=b.gsumP,f=b.gsumN,g=b.gbase,h=b.isLogAxis,i=b.logBase,j=b.minPercent,k=b.gMaxRange,l=b.isStacked,m=b.isStacked100,n=b.isWaterfall,o=b.hasStackValueReversal,p=b.valueAxis,q=b.valueAxisSize,r=b.valueAxis.unitInterval;r||(r=this._calcInterval(c,d,Math.max(q/80,2))),c==d&&(c=g,d*=2);var s=NaN,t=0,u=0;if(h){if(m){s=0;var v=1;for(t=u=a.tis.log(100,i);v>j;)v/=i,t--,s++;c=Math.pow(i,t)}else l&&!n&&(d=Math.max(d,e)),u=a.tis._rnd(a.tis.log(d,i),1,!0),d=Math.pow(i,u),t=a.tis._rnd(a.tis.log(c,i),1,!1),c=Math.pow(i,t);r=i}c<f&&(f=c),d>e&&(e=d);var w=h?c:a.tis._rnd(c,r,!1),x=h?d:a.tis._rnd(d,r,!0);if(m&&x>100&&(x=100),m&&!h&&(x=x>0?100:0,w=w<0?-100:0,r=p.unitInterval,(isNaN(r)||r<=0||r>=100)&&(r=10),100%r!=0))for(;r>=1&&100%r!=0;r--);return isNaN(x)||isNaN(w)||isNaN(r)?{}:(isNaN(s)&&(s=parseInt(((x-w)/(0==r?1:r)).toFixed())),h&&!m&&(s=u-t,k=Math.pow(i,s)),s<1?{}:{min:w,max:x,logarithmic:h,logBase:i,base:h?w:g,minPow:t,maxPow:u,sumP:e,sumN:f,mu:r,maxRange:k,intervals:s,hasStackValueReversal:o})},_getDataLen:function(b){var c=this.source;return void 0!=b&&-1!=b&&this.seriesGroups[b].source&&(c=this.seriesGroups[b].source),c instanceof a.tis.dataAdapter&&(c=c.records),c?c.length:0},_getDataValue:function(b,c,d){var e=this.source;if(void 0!=d&&-1!=d&&(e=this.seriesGroups[d].source||e),e instanceof a.tis.dataAdapter&&(e=e.records),!(!e||b<0||b>e.length-1))return a.isFunction(c)?c(b,e):c&&""!=c?e[b][c]:e[b]},_getDataValueAsNumber:function(a,b,c){var d=this._getDataValue(a,b,c);return this._isDate(d)?d.valueOf():("number"!=typeof d&&(d=parseFloat(d)),"number"!=typeof d&&(d=void 0),d)},_isPieGroup:function(a){var b=this.seriesGroups[a];return!(!b||!b.type)&&(-1!=b.type.indexOf("pie")||-1!=b.type.indexOf("donut"))},_renderPieSeries:function(b,c){for(var d=this._getDataLen(b),e=this.seriesGroups[b],f=this._calcGroupOffsets(b,c).offsets,g=0;g<e.series.length;g++){var h=e.series[g];if(!h.customDraw){var i=this._getSerieSettings(b,g),k=(h.colorScheme||e.colorScheme||this.colorScheme,this._getAnimProps(b,g)),l=k.enabled&&d<5e3&&!this._isToggleRefresh&&1!=this._isVML?k.duration:0;a.tis.mobile.isMobileBrowser()&&this.renderer instanceof a.tis.HTML5Renderer&&(l=0);var m=this._get([h.minAngle,h.startAngle]);(isNaN(m)||m<0||m>360)&&(m=0);var n=this._get([h.maxAngle,h.endAngle]);(isNaN(n)||n<0||n>360)&&(n=360);for(var o={rect:c,minAngle:m,maxAngle:n,groupIndex:b,serieIndex:g,settings:i,items:[]},p=0;p<d;p++){var q=f[g][p];if(q.visible){var r=q.fromAngle,s=q.toAngle,t=this.renderer.pieslice(q.x,q.y,q.innerRadius,q.outerRadius,r,0==l?s:r,q.centerOffset);this._setRenderInfo(b,g,p,{element:t});var u={displayValue:q.displayValue,itemIndex:p,visible:q.visible,x:q.x,y:q.y,innerRadius:q.innerRadius,outerRadius:q.outerRadius,fromAngle:r,toAngle:s,centerOffset:q.centerOffset};o.items.push(u)}}this._animatePieSlices(o,0);var v=this;this._enqueueAnimation("series",void 0,void 0,l,function(a,b,c){v._animatePieSlices(b,c)},o)}}},_sliceSortFunction:function(a,b){return a.fromAngle-b.fromAngle},_animatePieSlices:function(a,b){var c;this._elementRenderInfo&&this._elementRenderInfo.length>a.groupIndex&&this._elementRenderInfo[a.groupIndex].series&&this._elementRenderInfo[a.groupIndex].series.length>a.serieIndex&&(c=this._elementRenderInfo[a.groupIndex].series[a.serieIndex]);for(var e=this.seriesGroups[a.groupIndex],f=this._getLabelsSettings(a.groupIndex,a.serieIndex,NaN),g=f.visible,h=[],i=0;i<a.items.length;i++){var j=a.items[i];if(j.visible){var k=j.fromAngle,l=j.fromAngle+b*(j.toAngle-j.fromAngle);if(c&&c[j.displayValue]){var m=c[j.displayValue].fromAngle,n=c[j.displayValue].toAngle;k=m+(k-m)*b,l=n+(l-n)*b}h.push({index:i,from:k,to:l})}}c&&h.sort(this._sliceSortFunction);for(var o=NaN,i=0;i<h.length;i++){var j=a.items[h[i].index],p=this._getRenderInfo(a.groupIndex,a.serieIndex,j.itemIndex),k=h[i].from,l=h[i].to;c&&(!isNaN(o)&&k>o&&(k=o),o=l,i==h.length-1&&l!=h[0].from&&(l=a.maxAngle+h[0].from));var q=this.renderer.pieSlicePath(j.x,j.y,j.innerRadius,j.outerRadius,k,l,j.centerOffset);this.renderer.attr(p.element,{d:q});var r=this._getColors(a.groupIndex,a.serieIndex,j.itemIndex,"radialGradient",j.outerRadius),s=a.settings;p.colors=r,p.settings=s,this.renderer.attr(p.element,{fill:r.fillColor,stroke:r.lineColor,"stroke-width":s.stroke,"fill-opacity":s.opacity,"stroke-opacity":s.opacity,"stroke-dasharray":"none"});e.series[a.serieIndex];g&&this._showPieLabel(a.groupIndex,a.serieIndex,j.itemIndex,f),1==b&&this._installHandlers(p.element,"pieslice",a.groupIndex,a.serieIndex,j.itemIndex)}},_showPieLabel:function(b,c,d,e,f){var g=this._renderData[b].offsets[c][d];if(g.elementInfo.labelElement&&this.renderer.removeElement(g.elementInfo.labelElement),e||(e=this._getLabelsSettings(b,c,NaN)),e.visible){var h=g.fromAngle,i=g.toAngle,j=Math.abs(h-i);j>360&&(h=0,i=360);var n=(Math.PI,Math.PI,j/2+h);n%=360;var p,o=n*Math.PI*2/360;1==e.autoRotate&&(p=n<90||n>270?360-n:180-n);var q=e.linesEnabled,r=this._showLabel(b,c,d,{x:0,y:0,width:0,height:0},"center","center",!0,!1,!1,p),s=e.radius||g.outerRadius+Math.max(r.width,r.height);this._isPercent(s)&&(s=parseFloat(s)/100*Math.min(this._plotRect.width,this._plotRect.height)/2),s+=g.centerOffset,isNaN(f)&&(f=0),s+=f;var t=this.seriesGroups[b],u=t.series[c],v=a.tis.getNum([u.offsetX,t.offsetX,this._plotRect.width/2]),w=a.tis.getNum([u.offsetY,t.offsetY,this._plotRect.height/2]),x=this._plotRect.x+v,y=this._plotRect.y+w,z=this._adjustTextBoxPosition(x,y,r,s,n,g.outerRadius>s,0!=e.linesAngles,1==e.autoRotate),A={};if(g.elementInfo.labelElement=this._showLabel(b,c,d,{x:z.x,y:z.y,width:r.width,height:r.height},"left","top",!1,!1,!1,p,A),s>g.outerRadius+5&&0!=q){var B={lineColor:g.elementInfo.colors.lineColor,stroke:g.elementInfo.settings.stroke,opacity:g.elementInfo.settings.opacity,dashStyle:g.elementInfo.settings.dashStyle};g.elementInfo.labelArrowPath=this._updateLebelArrowPath(g.elementInfo.labelArrowPath,x,y,s,g.outerRadius+f,o,0!=e.linesAngles,B,A)}}},_updateLebelArrowPath:function(b,c,d,e,f,g,h,i,j){var k=a.tis._ptrnd(c+(e-0)*Math.cos(g)),l=a.tis._ptrnd(d-(e-0)*Math.sin(g)),m=a.tis._ptrnd(c+(f+2)*Math.cos(g)),n=a.tis._ptrnd(d-(f+2)*Math.sin(g)),o=[];o.push({x:j.x+j.width/2,y:j.y}),o.push({x:j.x+j.width/2,y:j.y+j.height}),o.push({x:j.x,y:j.y+j.height/2}),o.push({x:j.x+j.width,y:j.y+j.height/2}),h||(o.push({x:j.x,y:j.y}),o.push({x:j.x+j.width,y:j.y}),o.push({x:j.x+j.width,y:j.y+j.height}),o.push({x:j.x,y:j.y+j.height})),o=o.sort(function(b,e){return a.tis._ptdist(b.x,b.y,c,d)-a.tis._ptdist(e.x,e.y,c,d)}),o=o.sort(function(a,b){return Math.abs(a.x-c)+Math.abs(a.y-d)-(Math.abs(b.x-c)+Math.abs(b.y-d))});for(var p=0;p<o.length;p++)o[p].x=a.tis._ptrnd(o[p].x),o[p].y=a.tis._ptrnd(o[p].y);k=o[0].x,l=o[0].y;var q="M "+k+","+l+" L"+m+","+n;return h&&(q="M "+k+","+l+" L"+m+","+l+" L"+m+","+n),b?this.renderer.attr(b,{d:q}):b=this.renderer.path(q,{}),this.renderer.attr(b,{fill:"none",stroke:i.lineColor,"stroke-width":i.stroke,"stroke-opacity":i.opacity,"stroke-dasharray":"none"}),b},_adjustTextBoxPosition:function(b,c,d,e,f,g,h,i){var j=f*Math.PI*2/360,k=a.tis._ptrnd(b+e*Math.cos(j)),l=a.tis._ptrnd(c-e*Math.sin(j));if(i){var m=d.width,n=d.height,o=Math.atan(n/m)%(2*Math.PI),p=j%(2*Math.PI),s=0;p<=o?s=m/2*Math.cos(j):p>=o&&p<Math.PI-o?s=n/2*Math.sin(j):p>=Math.PI-o&&p<Math.PI+o?s=m/2*Math.cos(j):p>=Math.PI+o&&p<2*Math.PI-o?s=n/2*Math.sin(j):p>=2*Math.PI-o&&p<2*Math.PI&&(s=m/2*Math.cos(j)),e+=Math.abs(s)+3;var k=a.tis._ptrnd(b+e*Math.cos(j)),l=a.tis._ptrnd(c-e*Math.sin(j));return k-=d.width/2,l-=d.height/2,{x:k,y:l}}return g?(k-=d.width/2,l-=d.height/2):h?f>=90&&f<270?(l-=d.height/2,k-=d.width):l-=d.height/2:f>=0&&f<45||f>=315&&f<360?l-=d.height/2:f>=45&&f<135?(l-=d.height,k-=d.width/2):f>=135&&f<225?(l-=d.height/2,k-=d.width):f>=225&&f<315&&(k-=d.width/2),{x:k,y:l}},_isColumnType:function(a){return-1!=a.indexOf("column")||-1!=a.indexOf("waterfall")},_getColumnGroupsCount:function(a){var b=0;a=a||"vertical";for(var c=this.seriesGroups,d=0;d<c.length;d++){var e=c[d].orientation||"vertical";this._isColumnType(c[d].type)&&e==a&&b++}return this.columnSeriesOverlap&&(b=1),b},_getColumnGroupIndex:function(a){for(var b=0,c=this.seriesGroups[a].orientation||"vertical",d=0;d<a;d++){var e=this.seriesGroups[d],f=e.orientation||"vertical";this._isColumnType(e.type)&&f==c&&b++}return b},_renderAxisBands:function(b,c,d){var e=d?this._getXAxis(b):this._getValueAxis(b),f=this.seriesGroups[b],g=d?void 0:f.bands;if(!g){for(var h=0;h<b;h++){if((d?this._getXAxis(h):this._getValueAxis(h))==e)return}g=e.bands}if(a.isArray(g)){var j=c,k="horizontal"==f.orientation;k&&(j={x:c.y,y:c.x,width:c.height,height:c.width}),this._calcGroupOffsets(b,j);for(var h=0;h<g.length;h++){var r,l=g[h],m=this._get([l.minValue,l.from]),n=this._get([l.maxValue,l.to]),o=d?this.getXAxisDataPointOffset(m,b):this.getValueAxisDataPointOffset(m,b),p=d?this.getXAxisDataPointOffset(n,b):this.getValueAxisDataPointOffset(n,b),q=Math.abs(o-p);if(f.polar||f.spider){var s=this._renderData[b],t=s.polarCoords;if(d)if(f.spider){p1=this.getPolarDataPointOffset(m,this._stats.seriesGroups[b].max,b),p2=this.getPolarDataPointOffset(n,this._stats.seriesGroups[b].max,b);var D="M "+t.x+","+t.y;D+=" L "+p1.x+","+p1.y,D+=" L "+p2.x+","+p2.y,r=this.renderer.path(D)}else{var L={},M={x:Math.min(o,p),y:c.y,width:q,height:c.height};this._columnAsPieSlice(L,c,t,M),r=L.element}else{var u=this._toPolarCoord(t,c,c.x,s.baseOffset),v=this._toPolarCoord(t,c,c.x,o),w=this._toPolarCoord(t,c,c.x,p),x=a.tis._ptdist(u.x,u.y,v.x,v.y),y=a.tis._ptdist(u.x,u.y,w.x,w.y),z=Math.round(360*-t.startAngle/(2*Math.PI)),A=Math.round(360*-t.endAngle/(2*Math.PI));if(z>A){var B=z;z=A,A=B}if(f.spider){var C=s.xAxis.offsetAngles,D="",E=[y,x],F=C;t.isClosedCircle&&(F=a.extend([],C),F.push(F[0]));for(var G in E){for(var H=0;H<F.length;H++){var I=0==G?H:C.length-H-1,J=t.x+E[G]*Math.cos(F[I]),K=t.y+E[G]*Math.sin(F[I]);D+=""==D?"M ":" L",D+=a.tis._ptrnd(J)+","+a.tis._ptrnd(K)}if(0==G){var J=t.x+E[1]*Math.cos(F[I]),K=t.y+E[1]*Math.sin(F[I]);D+=" L"+a.tis._ptrnd(J)+","+a.tis._ptrnd(K)}}D+=" Z",r=this.renderer.path(D)}else r=this.renderer.pieslice(t.x,t.y,x,y,z,A)}}else{var N={x:Math.min(o,p),y:j.y,width:q,height:j.height};if(d||(N={x:j.x,y:Math.min(o,p),width:j.width,height:q}),k){var B=N.x;N.x=N.y,N.y=B,B=N.width,N.width=N.height,N.height=B}r=0==q||1==q?this.renderer.line(a.tis._ptrnd(N.x),a.tis._ptrnd(N.y),a.tis._ptrnd(N.x+(k?0:N.width)),a.tis._ptrnd(N.y+(k?N.height:0))):this.renderer.rect(N.x,N.y,N.width,N.height)}var O=l.fillColor||l.color||"#AAAAAA",P=l.lineColor||O,Q=l.lineWidth;isNaN(Q)&&(Q=1);var R=l.opacity;(isNaN(R)||R<0||R>1)&&(R=1),this.renderer.attr(r,{fill:O,"fill-opacity":R,stroke:P,"stroke-opacity":R,"stroke-width":Q,"stroke-dasharray":l.dashStyle})}}},_getColumnGroupWidth:function(a,b,c){var d=this.seriesGroups[a],e=-1!=d.type.indexOf("stacked"),g=(e||d.series.length,this._getColumnGroupsCount(d.orientation));(isNaN(g)||0==g)&&(g=1);var h=b.rangeLength>=1?b.itemWidth:.9*c,i=d.columnsMinWidth;isNaN(i)&&(i=1),isNaN(d.columnsMaxWidth)||(i=Math.min(d.columnsMaxWidth,i)),i>h&&b.length>0&&(h=Math.max(h,.9*c/b.length));var j=i;if(!e){var k=d.seriesGapPercent;(isNaN(k)||k<0)&&(k=10),k/=100;var l=i;l*=1+k,j+=d.series.length*l}return{requiredWidth:j,availableWidth:h,targetWidth:Math.max(h/g,j)}},_getColumnSerieWidthAndOffset:function(a,b){var c=this.seriesGroups[a],e=(c.series[b],"horizontal"==c.orientation),f=this._plotRect;e&&(f={x:f.y,y:f.x,width:f.height,height:f.width});var g=this._calcGroupOffsets(a,f);if(g&&0!=g.xoffsets.length){var h=!0,i=this._getColumnGroupsCount(c.orientation);"candlestick"!=c.type&&"ohlc"!=c.type||(i=1);var j=this._getColumnGroupIndex(a),k=this._getColumnGroupWidth(a,g.xoffsets,e?f.height:f.width),l=0,m=k.targetWidth;(1==this.columnSeriesOverlap||Math.round(m)>Math.round(k.availableWidth/i))&&(i=1,j=0),h&&(l-=m*i/2),l+=m*j;var n=c.columnsGapPercent;n<=0&&(n=0),(isNaN(n)||n>=100)&&(n=25),n/=100;var o=m*n;o+k.requiredWidth>k.targetWidth&&(o=Math.max(0,k.targetWidth-k.requiredWidth)),Math.round(m)>Math.round(k.availableWidth)&&(o=0),m-=o,l+=o/2;var p=c.seriesGapPercent;(isNaN(p)||p<0)&&(p=10);var q=-1!=c.type.indexOf("stacked"),r=m;q||(r/=c.series.length);var s=this._get([c.seriesGap,m*p/100/(c.series.length-1)]);(1==c.polar||1==c.spider||q||c.series.length<=1)&&(s=0);var t=s*(c.series.length-1);c.series.length>1&&t>m-1*c.series.length&&(t=m-1*c.series.length,s=t/Math.max(1,c.series.length-1));var u=r-t/c.series.length,v=0,w=c.columnsMaxWidth;isNaN(w)||u>w&&(v=u-w,u=w);var y=0;if(q)y=v/2;else{y=(m-u*c.series.length-t)/2+u*b+Math.max(0,b)*s}return{width:u,offset:l+y}}},_renderColumnSeries:function(b,c){var d=this.seriesGroups[b];if(d.series&&0!=d.series.length){var f=(this._getDataLen(b),"horizontal"==d.orientation),g=c;f&&(g={x:c.y,y:c.x,width:c.height,height:c.width});var h=this._calcGroupOffsets(b,g);if(h&&0!=h.xoffsets.length){var i;1!=d.polar&&1!=d.spider||(i=this._getPolarAxisCoords(b,g));var j={groupIndex:b,rect:c,vertical:!f,seriesCtx:[],renderData:h,polarAxisCoords:i};j.columnGroupWidth=this._getColumnGroupWidth(b,h.xoffsets,f?g.height:g.width);for(var k=this._getGroupGradientType(b),l=0;l<d.series.length;l++){var m=d.series[l];if(!m.customDraw){var o=(m.dataField,this._getAnimProps(b,l)),p=o.enabled&&!this._isToggleRefresh&&h.xoffsets.length<100?o.duration:0,q=this._getColumnSerieWidthAndOffset(b,l),r=this._isSerieVisible(b,l),s=this._getSerieSettings(b,l),t=this._getColors(b,l,NaN,this._getGroupGradientType(b),4),u=[];if(a.isFunction(m.colorFunction)&&!i)for(var v=h.xoffsets.first;v<=h.xoffsets.last;v++)u.push(this._getColors(b,l,v,k,4));var w={seriesIndex:l,serieColors:t,itemsColors:u,settings:s,columnWidth:q.width,xAdjust:q.offset,isVisible:r};j.seriesCtx.push(w)}}this._animColumns(j,0==p?1:0);var x=this;this._enqueueAnimation("series",void 0,void 0,p,function(a,b,c){x._animColumns(b,c)},j)}}},_getPercent:function(a,b,c,d){return isNaN(a)&&(a=b),!isNaN(c)&&!isNaN(a)&&a<c&&(a=c),!isNaN(d)&&!isNaN(a)&&a>d&&(a=d),isNaN(a)?NaN:a},_getColumnVOffsets:function(a,b,c,d,e,f){var g=this.seriesGroups[b],h=this._getPercent(g.columnsTopWidthPercent,100,0,100),i=this._getPercent(g.columnsBottomWidthPercent,100,0,100);0==h&&0==i&&(i=100);for(var j=this._getPercent(g.columnsNeckHeightPercent,NaN,0,100)/100,k=this._getPercent(g.columnsNeckWidthPercent,100,0,100)/100,l=[],m=NaN,n=0;n<c.length;n++){var u,o=c[n],p=o.seriesIndex,r=(g.series[p],a.offsets[p][d].from),s=a.offsets[p][d].to,t=a.xoffsets.data[d],v=o.isVisible;v||(s=r);var w=this._elementRenderInfo;if(v&&w&&w.length>b&&w[b].series.length>p){var x=a.xoffsets.xvalues[d];u=w[b].series[p][x],!u||isNaN(u.from)||isNaN(u.to)||(r=u.from+(r-u.from)*f,s=u.to+(s-u.to)*f,t=u.xoffset+(t-u.xoffset)*f)}u||(s=r+(s-r)*(e?1:f)),isNaN(r)&&(r=isNaN(m)?a.baseOffset:m),m=!isNaN(s)&&e?s:r,isNaN(s)&&(s=r);var y={from:r,to:s,xOffset:t};100==h&&100==i||(y.funnel=!0,y.toWidthPercent=h,y.fromWidthPercent=i),l.push(y)}if(e&&l.length>1&&!(this._elementRenderInfo&&this._elementRenderInfo.length>b)){for(var z=0,A=0,B=-1/0,C=1/0,D=1/0,E=-1/0,F=0;F<l.length;F++){var o=c[F];o.isVisible&&(l[F].to>=l[F].from?(A+=l[F].to-l[F].from,D=Math.min(D,l[F].from),E=Math.max(E,l[F].to)):(z+=l[F].from-l[F].to,B=Math.max(B,l[F].from),C=Math.min(C,l[F].to)))}var G=z,H=A;z*=f,A*=f;for(var I=0,J=0,F=0;F<l.length;F++)if(l[F].to>=l[F].from){var K=l[F].to-l[F].from;K+J>A&&(K=Math.max(0,A-J),l[F].to=l[F].from+K),100==h&&100==i||(l[F].funnel=!0,!isNaN(j)&&H*j>=J?l[F].fromWidthPercent=100*k:l[F].fromWidthPercent=Math.abs(l[F].from-D)/H*(h-i)+i,!isNaN(j)&&H*j>=0+(J+K)?l[F].toWidthPercent=100*k:l[F].toWidthPercent=Math.abs(l[F].to-D)/H*(h-i)+i),J+=K}else{var K=l[F].from-l[F].to;K+I>z&&(K=Math.max(0,z-I),l[F].to=l[F].from-K),100==h&&100==i||(l[F].funnel=!0,!isNaN(j)&&G*j>=I?l[F].fromWidthPercent=100*k:l[F].fromWidthPercent=Math.abs(l[F].from-B)/G*(h-i)+i,!isNaN(j)&&G*j>=0+(I+K)?l[F].toWidthPercent=100*k:l[F].toWidthPercent=Math.abs(l[F].to-B)/G*(h-i)+i),I+=K}}return l},_columnAsPieSlice:function(b,c,d,e){var f=this._toPolarCoord(d,c,e.x,e.y),g=this._toPolarCoord(d,c,e.x,e.y+e.height),h=a.tis._ptdist(d.x,d.y,g.x,g.y),i=a.tis._ptdist(d.x,d.y,f.x,f.y),j=c.width,k=180*Math.abs(d.startAngle-d.endAngle)/Math.PI,l=-(e.x-c.x)*k/j,m=-(e.x+e.width-c.x)*k/j,n=d.startAngle;if(n=360*n/(2*Math.PI),l-=n,m-=n,b)if(void 0!=b.element){var o=this.renderer.pieSlicePath(d.x,d.y,h,i,m,l,0);o+=" Z",this.renderer.attr(b.element,{d:o})}else b.element=this.renderer.pieslice(d.x,d.y,h,i,m,l,0);return{fromAngle:m,toAngle:l,innerRadius:h,outerRadius:i}},_setRenderInfo:function(a,b,c,d){this._renderData[a].offsets[b][c].elementInfo=d},_getRenderInfo:function(a,b,c){return this._renderData[a].offsets[b][c].elementInfo||{}},_animColumns:function(b,c){for(var d=this,e=b.groupIndex,f=this.seriesGroups[e],g=b.renderData,h=-1!=f.type.indexOf("waterfall"),i=this._getXAxis(e),j=-1!=f.type.indexOf("stacked"),k=b.polarAxisCoords,n=(this._getGroupGradientType(e),b.columnGroupWidth.targetWidth,-1),o=0;o<f.series.length;o++)if(this._isSerieVisible(e,o)){n=o;break}for(var p=NaN,q=NaN,o=0;o<b.seriesCtx.length;o++){var r=b.seriesCtx[o];(isNaN(p)||p>r.xAdjust)&&(p=r.xAdjust),(isNaN(q)||q<r.xAdjust+r.columnWidth)&&(q=r.xAdjust+r.columnWidth)}var s=Math.abs(q-p),t=this._get([f.columnsGapPercent,25])/100;(isNaN(t)<0||t>=1)&&(t=.25);for(var u=t*s,v=b.renderData.xoffsets,w=-1,x={},y=1==f.skipOverlappingPoints,z=v.first;z<=v.last;z++){var A=v.data[z];if(!isNaN(A)&&!(-1!=w&&Math.abs(A-w)<s-1+u&&y)){w=A;var B=this._getColumnVOffsets(g,e,b.seriesCtx,z,j,c),C=!1;if(h)for(var D=0;D<f.series.length;D++)f.series[D].summary&&v.xvalues[z][f.series[D].summary]&&(C=!0);for(var D=0;D<b.seriesCtx.length;D++){var r=b.seriesCtx[D],E=r.seriesIndex,F=f.series[E],G=B[D].from,H=B[D].to,I=B[D].xOffset,J=(b.vertical?b.rect.x:b.rect.y)+r.xAdjust,K=r.settings,L=0!=r.itemsColors.length?r.itemsColors[z-g.xoffsets.first]:r.serieColors,M=this._isSerieVisible(e,E);if(M){var A=a.tis._ptrnd(J+I),N={x:A,width:r.columnWidth};B[D].funnel&&(N.fromWidthPercent=B[D].fromWidthPercent,N.toWidthPercent=B[D].toWidthPercent);var O=!0;b.vertical?(N.y=G,N.height=H-G,N.height<0&&(N.y+=N.height,N.height=-N.height,O=!1)):(N.x=G<H?G:H,N.width=Math.abs(G-H),O=G-H<0,N.y=A,N.height=r.columnWidth);var P=G-H;if(!isNaN(P)){P=Math.abs(P);var Q=void 0,R=d._getRenderInfo(e,E,z),S=R.element,T=R.labelElement,U=void 0==S;if(T&&(d.renderer.removeElement(T),T=void 0),k){var W={element:S};Q=this._columnAsPieSlice(W,b.rect,k,N),S=W.element;var L=this._getColors(e,E,void 0,"radialGradient",Q.outerRadius)}else if(B[D].funnel){var V=this._getTrapezoidPath(a.extend({},N),b.vertical,O);U?S=this.renderer.path(V,{}):this.renderer.attr(S,{d:V})}else U?S=this.renderer.rect(N.x,N.y,b.vertical?N.width:0,b.vertical?0:N.height):1==b.vertical?this.renderer.attr(S,{x:N.x,y:N.y,height:P}):this.renderer.attr(S,{x:N.x,y:N.y,width:P});if(P<1&&(1!=c||k)?this.renderer.attr(S,{display:"none"}):this.renderer.attr(S,{display:"block"}),U&&this.renderer.attr(S,{fill:L.fillColor,"fill-opacity":K.opacity,"stroke-opacity":K.opacity,stroke:L.lineColor,"stroke-width":K.stroke,"stroke-dasharray":K.dashStyle}),T&&this.renderer.removeElement(T),!M||0==P&&c<1)R={element:S,labelElement:T},d._setRenderInfo(e,E,z,R);else{if(h&&0!=this._get([F.showWaterfallLines,f.showWaterfallLines])){if(!j||j&&D==n){var X=j?-1:D;if(1==c&&!isNaN(g.offsets[D][z].from)&&!isNaN(g.offsets[D][z].to)){var Y=x[X];if(void 0!=Y){var Z={x:Y.x,y:a.tis._ptrnd(Y.y)},$={x:A,y:Z.y},_=f.columnsTopWidthPercent/100;isNaN(_)?_=1:(_>1||_<0)&&(_=1);var aa=f.columnsBottomWidthPercent/100;isNaN(aa)?aa=1:(aa>1||aa<0)&&(aa=1);var ba=b.vertical?N.width:N.height;if(Z.x=Z.x-ba/2+ba/2*_,C){var ca=ba*_/2;$.x=$.x+ba/2-(i.flip?-ca:ca)}else{var ca=ba*aa/2;$.x=$.x+ba/2-(i.flip?-ca:ca)}b.vertical||(this._swapXY([Z]),this._swapXY([$])),this.renderer.line(Z.x,Z.y,$.x,$.y,{stroke:Y.color,"stroke-width":K.stroke,"stroke-opacity":K.opacity,"fill-opacity":K.opacity,"stroke-dasharray":K.dashStyle})}}}1==c&&0!=P&&(x[j?-1:D]={y:H,x:b.vertical?N.x+N.width:N.y+N.height,color:L.lineColor})}if(k){var ba=(this._toPolarCoord(k,b.rect,N.x+N.width/2,N.y),this._showLabel(e,E,z,N,void 0,void 0,!0)),ea=Q.outerRadius+10;labelOffset=this._adjustTextBoxPosition(k.x,k.y,ba,ea,(Q.fromAngle+Q.toAngle)/2,!0,!1,!1),T=this._showLabel(e,E,z,{x:labelOffset.x,y:labelOffset.y},void 0,void 0,!1,!1,!1)}else T=this._showLabel(e,E,z,N,void 0,void 0,!1,!1,O);R={element:S,labelElement:T},d._setRenderInfo(e,E,z,R),1==c&&this._installHandlers(S,"column",e,E,z)}}}}}}},_getTrapezoidPath:function(b,c,d){var e="",f=b.fromWidthPercent/100,g=b.toWidthPercent/100;if(!c){var h=b.width;b.width=b.height,b.height=h,h=b.x,b.x=b.y,b.y=h}var i=b.x+b.width/2,j=[{x:i-b.width*(d?g:f)/2,y:b.y+b.height},{x:i-b.width*(d?f:g)/2,y:b.y},{x:i+b.width*(d?f:g)/2,y:b.y},{x:i+b.width*(d?g:f)/2,y:b.y+b.height}];c||this._swapXY(j),e+="M "+a.tis._ptrnd(j[0].x)+","+a.tis._ptrnd(j[0].y);for(var k=1;k<j.length;k++)e+=" L "+a.tis._ptrnd(j[k].x)+","+a.tis._ptrnd(j[k].y);return e+=" Z"},_swapXY:function(a){for(var b=0;b<a.length;b++){var c=a[b].x;a[b].x=a[b].y,a[b].y=c}},_renderCandleStickSeries:function(b,c,d){var e=this,f=e.seriesGroups[b];if(f.series&&0!=f.series.length){var g="horizontal"==f.orientation,h=c;g&&(h={x:c.y,y:c.x,width:c.height,height:c.width});var i=e._calcGroupOffsets(b,h);if(i&&0!=i.xoffsets.length){var k;h.width;(f.polar||f.spider)&&(k=e._getPolarAxisCoords(b,h),2*k.r);for(var m=(e._alignValuesWithTicks(b),e._getGroupGradientType(b)),n=[],o=0;o<f.series.length;o++)n[o]=e._getColumnSerieWidthAndOffset(b,o);for(var o=0;o<f.series.length;o++)if(this._isSerieVisible(b,o)){var p=e._getSerieSettings(b,o),q=f.series[o];if(!q.customDraw){var r=a.isFunction(q.colorFunction)?void 0:e._getColors(b,o,NaN,m),s={rect:c,inverse:g,groupIndex:b,seriesIndex:o,symbolType:q.symbolType,symbolSize:q.symbolSize,"fill-opacity":p.opacity,"stroke-opacity":p.opacity,"stroke-width":p.stroke,"stroke-dasharray":p.dashStyle,gradientType:m,colors:r,renderData:i,polarAxisCoords:k,columnsInfo:n,isOHLC:d,items:[],self:e},t=e._getAnimProps(b,o),u=t.enabled&&!e._isToggleRefresh&&i.xoffsets.length<5e3?t.duration:0;e._animCandleStick(s,0);e._enqueueAnimation("series",void 0,void 0,u,function(a,b,c){e._animCandleStick(b,c)},s)}}}}},_animCandleStick:function(b,c){var d=["Open","Low","Close","High"],e=b.columnsInfo[b.seriesIndex].width,f=b.self.seriesGroups[b.groupIndex],g=b.renderData.xoffsets,h=-1,i=Math.abs(g.data[g.last]-g.data[g.first]);i*=c;for(var j=NaN,k=NaN,l=0;l<b.columnsInfo.length;l++){var m=b.columnsInfo[l];(isNaN(j)||j>m.offset)&&(j=m.offset),(isNaN(k)||k<m.offset+m.width)&&(k=m.offset+m.width)}for(var n=Math.abs(k-j),o=0!=f.skipOverlappingPoints,p=g.first;p<=g.last;p++){var q=g.data[p];if(!isNaN(q)&&!(-1!=h&&Math.abs(q-h)<n&&o)){if(Math.abs(g.data[p]-g.data[g.first])>i)break;h=q;var s=b.items[p]=b.items[p]||{};for(var l in d){var t=b.self._getDataValueAsNumber(p,f.series[b.seriesIndex]["dataField"+d[l]],b.groupIndex);if(isNaN(t))break;var u=b.renderData.offsets[b.seriesIndex][p][d[l]];if(isNaN(u))break;s[d[l]]=u}if(q+=b.inverse?b.rect.y:b.rect.x,b.polarAxisCoords){var v=this._toPolarCoord(b.polarAxisCoords,this._plotRect,q,u);q=v.x,u=v.y}q=a.tis._ptrnd(q);for(var w in d)s[w]=a.tis._ptrnd(s[w]);var x=b.colors;if(x||(x=b.self._getColors(b.groupIndex,b.seriesIndex,p,b.gradientType)),b.isOHLC){var B="M"+q+","+s.Low+" L"+q+","+s.High+" M"+(q-e/2)+","+s.Open+" L"+q+","+s.Open+" M"+(q+e/2)+","+s.Close+" L"+q+","+s.Close;b.inverse&&(B="M"+s.Low+","+q+" L"+s.High+","+q+" M"+s.Open+","+(q-e/2)+" L"+s.Open+","+q+" M"+s.Close+","+q+" L"+s.Close+","+(q+e/2));var y=s.lineElement;y||(y=this.renderer.path(B,{}),this.renderer.attr(y,{fill:x.fillColor,"fill-opacity":b["fill-opacity"],"stroke-opacity":b["fill-opacity"],stroke:x.lineColor,"stroke-width":b["stroke-width"],"stroke-dasharray":b["stroke-dasharray"]}),s.lineElement=y),1==c&&this._installHandlers(y,"column",b.groupIndex,b.seriesIndex,p)}else{var y=s.lineElement;y||(y=b.inverse?this.renderer.line(s.Low,q,s.High,q):this.renderer.line(q,s.Low,q,s.High),this.renderer.attr(y,{fill:x.fillColor,"fill-opacity":b["fill-opacity"],"stroke-opacity":b["fill-opacity"],stroke:x.lineColor,"stroke-width":b["stroke-width"],"stroke-dasharray":b["stroke-dasharray"]}),s.lineElement=y);var z=s.stickElement;if(q-=e/2,!z){var A=x.fillColor;s.Close<=s.Open&&x.fillColorAlt&&(A=x.fillColorAlt),z=b.inverse?this.renderer.rect(Math.min(s.Open,s.Close),q,Math.abs(s.Close-s.Open),e):this.renderer.rect(q,Math.min(s.Open,s.Close),e,Math.abs(s.Close-s.Open)),this.renderer.attr(z,{fill:A,"fill-opacity":b["fill-opacity"],"stroke-opacity":b["fill-opacity"],stroke:x.lineColor,"stroke-width":b["stroke-width"],"stroke-dasharray":b["stroke-dasharray"]}),s.stickElement=z}1==c&&this._installHandlers(z,"column",b.groupIndex,b.seriesIndex,p)}}}},_renderScatterSeries:function(b,c,d){var e=this.seriesGroups[b];if(e.series&&0!=e.series.length){var f=-1!=e.type.indexOf("bubble"),g="horizontal"==e.orientation,h=c;g&&(h={x:c.y,y:c.x,width:c.height,height:c.width});var i=this._calcGroupOffsets(b,h);if(i&&0!=i.xoffsets.length){var k,j=h.width;(e.polar||e.spider)&&(k=this._getPolarAxisCoords(b,h),j=2*k.r);var m=(this._alignValuesWithTicks(b),this._getGroupGradientType(b));d||(d="to");for(var n=0;n<e.series.length;n++){var o=this._getSerieSettings(b,n),p=e.series[n];if(!p.customDraw){var q=p.dataField,r=a.isFunction(p.colorFunction),s=this._getColors(b,n,NaN,m),t=NaN,u=NaN;if(f)for(var v=i.xoffsets.first;v<=i.xoffsets.last;v++){var w=this._getDataValueAsNumber(v,p.radiusDataField||p.sizeDataField,b);if("number"!=typeof w)throw"Invalid radiusDataField value at ["+v+"]";isNaN(w)||((isNaN(t)||w<t)&&(t=w),(isNaN(u)||w>u)&&(u=w))}var x=p.minRadius||p.minSymbolSize;isNaN(x)&&(x=j/50);var y=p.maxRadius||p.maxSymbolSize;isNaN(y)&&(y=j/25),x>y&&(y=x);var z=p.radius;z=isNaN(z)&&!isNaN(p.symbolSize)?"circle"==p.symbolType?p.symbolSize/2:p.symbolSize:5;for(var A=this._getAnimProps(b,n),B=A.enabled&&!this._isToggleRefresh&&i.xoffsets.length<5e3?A.duration:0,C={groupIndex:b,seriesIndex:n,symbolType:p.symbolType,symbolSize:p.symbolSize,"fill-opacity":o.opacity,"stroke-opacity":o.opacity,"stroke-width":o.stroke,"stroke-width-symbol":o.strokeSymbol,"stroke-dasharray":o.dashStyle,items:[],polarAxisCoords:k},D=void 0,v=i.xoffsets.first;v<=i.xoffsets.last;v++){var w=this._getDataValueAsNumber(v,q,b);if("number"==typeof w){var E=i.xoffsets.data[v],F=i.xoffsets.xvalues[v],G=i.offsets[n][v][d];if(!(G<h.y||G>h.y+h.height||isNaN(E)||isNaN(G))){if(g){var H=E;E=G,G=H+c.y}else E+=c.x;if(!(!r&&D&&this.enableSampling&&a.tis._ptdist(D.x,D.y,E,G)<1)){D={x:E,y:G};var I=z;if(f){var J=this._getDataValueAsNumber(v,p.radiusDataField||p.sizeDataField,b);if("number"!=typeof J)continue;I=x+(y-x)*(J-t)/Math.max(1,u-t),isNaN(I)&&(I=x)}i.offsets[n][v].radius=I;var K=NaN,L=NaN,M=0,N=this._elementRenderInfo;if(void 0!=F&&N&&N.length>b&&N[b].series.length>n){var O=N[b].series[n][F];if(O&&!isNaN(O.to)){if(K=O.to,L=O.xoffset,M=z,g){var H=L;L=K,K=H+c.y}else L+=c.x;f&&(M=x+(y-x)*(O.valueRadius-t)/Math.max(1,u-t),isNaN(M)&&(M=x))}}r&&(s=this._getColors(b,n,v,m)),C.items.push({from:M,to:I,itemIndex:v,fill:s.fillColor,stroke:s.lineColor,x:E,y:G,xFrom:L,yFrom:K})}}}}this._animR(C,0);var P=this;this._enqueueAnimation("series",void 0,void 0,B,function(a,b,c){P._animR(b,c)},C)}}}}},_animR:function(b,c){for(var d=b.items,e=b.symbolType||"circle",f=b.symbolSize,g=0;g<d.length;g++){var h=d[g],i=h.x,j=h.y,k=Math.round((h.to-h.from)*c+h.from);if(isNaN(h.yFrom)||(j=h.yFrom+(j-h.yFrom)*c),isNaN(h.xFrom)||(i=h.xFrom+(i-h.xFrom)*c),b.polarAxisCoords){var l=this._toPolarCoord(b.polarAxisCoords,this._plotRect,i,j);i=l.x,j=l.y}i=a.tis._ptrnd(i),j=a.tis._ptrnd(j),k=a.tis._ptrnd(k);var m=this._getRenderInfo(b.groupIndex,b.seriesIndex,d[g].itemIndex),n=m.element,o=m.labelElement;"circle"==e?(n||(n=this.renderer.circle(i,j,k),this.renderer.attr(n,{fill:h.fill,"fill-opacity":b["fill-opacity"],"stroke-opacity":b["fill-opacity"],stroke:h.stroke,"stroke-width":b["stroke-width"],"stroke-dasharray":b["stroke-dasharray"]})),this._isVML?this.renderer.updateCircle(n,void 0,void 0,k):this.renderer.attr(n,{r:k,cy:j,cx:i})):(n&&this.renderer.removeElement(n),n=this._drawSymbol(e,i,j,h.fill,b["fill-opacity"],h.stroke,b["stroke-opacity"]||b["fill-opacity"],b["stroke-width-symbol"],b["stroke-dasharray"],f||k)),o&&this.renderer.removeElement(o),o=this._showLabel(b.groupIndex,b.seriesIndex,h.itemIndex,{x:i-k,y:j-k,width:2*k,height:2*k}),c>=1&&this._installHandlers(n,"circle",b.groupIndex,b.seriesIndex,h.itemIndex),this._setRenderInfo(b.groupIndex,b.seriesIndex,d[g].itemIndex,{element:n,labelElement:o})}},_showToolTip:function(b,c,d,e,f){var g=this,h=g._getXAxis(d),i=g._getValueAxis(d);if(!g._ttEl||d!=g._ttEl.gidx||e!=g._ttEl.sidx||f!=g._ttEl.iidx){var j=g.seriesGroups[d],k=j.series[e],l=g.enableCrosshairs;g._pointMarker?(b=parseInt(g._pointMarker.x+5),c=parseInt(g._pointMarker.y-5)):l=!1;var m=l&&0==g.showToolTips;b=a.tis._ptrnd(b),c=a.tis._ptrnd(c);g._ttEl;if(0!=j.showToolTips&&0!=k.showToolTips){var o=g._get([k.toolTipFormatSettings,j.toolTipFormatSettings,i.toolTipFormatSettings,g.toolTipFormatSettings]),p=g._get([k.toolTipFormatFunction,j.toolTipFormatFunction,i.toolTipFormatFunction,g.toolTipFormatFunction]),q=g._getColors(d,e,f),r=g._getDataValue(f,h.dataField,d);void 0!=h.dataField&&""!=h.dataField||(r=f),"date"==h.type&&(r=g._castAsDate(r,(o?o.dateFormat:void 0)||h.dateFormat));var s="";if(a.isFunction(p)){var t={},u=0;for(var v in k)0==v.indexOf("dataField")&&(t[v.substring(9,v.length).toLowerCase()]=g._getDataValue(f,k[v],d),u++);0==u?t=g._getDataValue(f,void 0,d):1==u&&(t=t[""]),s=p(t,f,k,j,r,h)}else{s=g._getFormattedValue(d,e,f,o,p);var w=this._getAxisSettings(h),x=w.toolTipFormatSettings,y=w.toolTipFormatFunction;y||x||"date"!=h.type||(y=this._getDefaultDTFormatFn(h.baseUnit||"day"));var z=g._formatValue(r,x,y,d,e,f);if(g._isPieGroup(d))r=g._getDataValue(f,k.displayText||k.dataField,d),z=g._formatValue(r,x,y,d,e,f),s=z+": "+s;else{var A=h.displayText||h.dataField||"";s=A.length>0?A+": "+z+"<br>"+s:z+"<br>"+s}}if(g._ttEl||(g._ttEl={}),g._ttEl.sidx=e,g._ttEl.gidx=d,g._ttEl.iidx=f,rect=g.renderer.getRect(),l){var B=a.tis._ptrnd(g._pointMarker.x),C=a.tis._ptrnd(g._pointMarker.y),D=g.crosshairsColor||g._defaultLineColor;if(j.polar||j.spider){var E=this._getPolarAxisCoords(d,this._plotRect);if(a.tis._ptdist(B,C,E.x,E.y)>E.r)return;var G=Math.atan2(C-E.y,B-E.x),H=Math.cos(G)*E.r+E.x,I=Math.sin(G)*E.r+E.y;g._ttEl.vLine?g.renderer.attr(g._ttEl.vLine,{x1:E.x,y1:E.y,x2:H,y2:I}):g._ttEl.vLine=g.renderer.line(E.x,E.y,H,I,{stroke:D,"stroke-width":g.crosshairsLineWidth||1,"stroke-dasharray":g.crosshairsDashStyle||""})}else g._ttEl.vLine&&g._ttEl.hLine?(g.renderer.attr(g._ttEl.vLine,{x1:B,x2:B}),g.renderer.attr(g._ttEl.hLine,{y1:C,y2:C})):(g._ttEl.vLine=g.renderer.line(B,g._plotRect.y,B,g._plotRect.y+g._plotRect.height,{stroke:D,"stroke-width":g.crosshairsLineWidth||1,"stroke-dasharray":g.crosshairsDashStyle||""}),g._ttEl.hLine=g.renderer.line(g._plotRect.x,C,g._plotRect.x+g._plotRect.width,C,{stroke:D,"stroke-width":g.crosshairsLineWidth||1,"stroke-dasharray":g.crosshairsDashStyle||""}))}if(!m&&0!=g.showToolTips){var J=k.toolTipClass||j.toolTipClass||this.toThemeProperty("tis-chart-tooltip-text",null),K=k.toolTipBackground||j.toolTipBackground||"#FFFFFF",L=k.toolTipLineColor||j.toolTipLineColor||q.lineColor,M=this._get([k.toolTipOpacity,j.toolTipOpacity,1]),N=this.getItemCoord(d,e,f),O=0;g._pointMarker&&g._pointMarker.element&&(O=k.symbolSizeSelected,isNaN(O)&&(O=k.symbolSize),(isNaN(O)||O>50||O<0)&&(O=j.symbolSize),(isNaN(O)||O>50||O<0)&&(O=8)),g._createTooltip(N,j,s,{css:J,fill:K,stroke:L,fillOpacity:M,symbolSize:O})}}}},_fitTooltip:function(a,b,c,d,e){var f={},g=2+e/2,h=7;if(b.x-c.width-h-g>a.x&&b.y+b.height/2-c.height/2>a.y&&b.y+b.height/2+c.height/2<a.y+a.height&&(f.left={arrowLocation:"right",x:b.x-c.width-h-g,y:b.y+b.height/2-c.height/2,width:c.width+h,height:c.height}),b.x+b.width+c.width+h+g<a.x+a.width&&b.y+b.height/2-c.height/2>a.y&&b.y+b.height/2+c.height/2<a.y+a.height&&(f.right={arrowLocation:"left",x:b.x+b.width+g,y:b.y+b.height/2-c.height/2,width:c.width+h,height:c.height}),b.y-c.height-g-h>a.y&&b.x+b.width/2-c.width/2>a.x&&b.x+b.width/2+c.width/2<a.x+a.width&&(f.top={arrowLocation:"bottom",x:b.x+b.width/2-c.width/2,y:b.y-c.height-g-h,width:c.width,height:c.height+h}),b.y+b.height+c.height+h+g<a.y+a.height&&b.x+b.width/2-c.width/2>a.x&&b.x+b.width/2+c.width/2<a.x+a.width&&(f.bottom={arrowLocation:"top",x:b.x+b.width/2-c.width/2,y:b.y+b.height+g,width:c.width,height:c.height+h}),b.width>b.height||(-1!=d.type.indexOf("stackedcolumn")||-1!=d.type.indexOf("stackedwaterfall"))&&"horizontal"!=d.orientation){if(f.left)return f.left;if(f.right)return f.right}else{if(f.top)return f.top;if(f.bottom)return f.bottom}for(var i in f)if(f[i])return f[i];return{arrowLocation:""}},_createTooltip:function(b,c,d,e){var f=this,g=c.type,h=!1,i=f._ttEl.box;if(!i){h=!0,i=f._ttEl.box=document.createElement("div");var j=1e7;i.style.position="absolute",i.style.cursor="default",a(k).css({"z-index":j,"box-sizing":"content-box"}),a(document.body).append(i);var k=document.createElement("div");k.id="arrowOuterDiv",k.style.width="0px",k.style.height="0px",k.style.position="absolute",a(k).css({"z-index":j+1,"box-sizing":"content-box"});var l=document.createElement("div");l.id="arrowInnerDiv",l.style.width="0px",l.style.height="0px",l.style.position="absolute";var m=document.createElement("div");m.id="contentDiv",m.style.position="absolute",a(m).css({"box-sizing":"content-box"}),a(m).addClass("tis-rc-all tis-button"),a(m).appendTo(a(i)),a(k).appendTo(a(i)),a(l).appendTo(a(i)),a(l).css({"z-index":j+2,"box-sizing":"content-box"})}if(!d||0==d.length)return void a(i).fadeTo(0,0);m=a(i).find("#contentDiv")[0],k=a(i).find("#arrowOuterDiv")[0],l=a(i).find("#arrowInnerDiv")[0],l.style.opacity=k.style.opacity=e.fillOpacity,m.style.backgroundColor=e.fill,m.style.borderColor=e.stroke,m.style.opacity=e.fillOpacity;var n="<span class='"+e.css+"'>"+d+"</span>";a(m).html(n);var o=this._measureHtml(n,"tis-rc-all tis-button");if(rect=f._plotRect,!(o.width>rect.width||o.height>rect.height)){var p={width:o.width,height:o.height};arrowLocation="";var r=7,s=f._isColumnType(g);if(x=Math.max(b.x,rect.x),y=Math.max(b.y,rect.y),"dataPoint"==f.toolTipAlignment){if(-1!=g.indexOf("pie")||-1!=g.indexOf("donut")){var t=(b.fromAngle+b.toAngle)/2;t*=Math.PI/180;var u=!isNaN(b.innerRadius)&&b.innerRadius>0?(b.innerRadius+b.outerRadius)/2:.75*b.outerRadius;x=b.x=b.center.x+Math.cos(t)*u,y=b.y=b.center.y-Math.sin(t)*u,b.width=b.height=1}else s&&(c.polar||c.spider)&&(b.width=b.height=1);var v=this._fitTooltip(this._plotRect,b,p,c,e.symbolSize);""!=v.arrowLocation&&(arrowLocation=v.arrowLocation,x=v.x,y=v.y,p.width=v.width,p.height=v.height)}else arrowLocation="";"top"==arrowLocation||"bottom"==arrowLocation?(p.height+=r,x-=r/2,"bottom"==arrowLocation&&(y-=r)):"left"!=arrowLocation&&"right"!=arrowLocation||(p.width+=r,y-=r/2,"right"==arrowLocation&&(x-=r)),x+p.width>rect.x+rect.width&&(arrowLocation="",x=rect.x+rect.width-p.width),y+p.height>rect.y+rect.height&&(arrowLocation="",y=rect.y+rect.height-p.height);var w={x:0,y:0};a(m).css({width:o.width,height:o.height,left:0,top:0}),k.style["margin-top"]=k.style["margin-left"]=0,l.style["margin-top"]=l.style["margin-left"]=0,m.style["margin-top"]=m.style["margin-left"]=0;var A=r+"px solid",B=r+"px solid transparent";switch(arrowLocation){case"left":w={x:0,y:(o.height-r)/2},contentPostion={x:r,y:0},m.style["margin-left"]=r+"px",k.style["margin-left"]="0px",k.style["margin-top"]=w.y+"px",k.style["border-left"]="",k.style["border-right"]=A+" "+e.stroke,k.style["border-top"]=B,k.style["border-bottom"]=B,l.style["margin-left"]="1px",l.style["margin-top"]=w.y+"px",l.style["border-left"]="",l.style["border-right"]=A+" "+e.fill,l.style["border-top"]=B,l.style["border-bottom"]=B;break;case"right":w={x:p.width-r,y:(o.height-r)/2},contentPostion={x:0,y:0},k.style["margin-left"]=w.x+"px",k.style["margin-top"]=w.y+"px",k.style["border-left"]=A+" "+e.stroke,k.style["border-right"]="",k.style["border-top"]=B,k.style["border-bottom"]=B,l.style["margin-left"]=w.x-1+"px",l.style["margin-top"]=w.y+"px",l.style["border-left"]=A+" "+e.fill,l.style["border-right"]="",l.style["border-top"]=B,l.style["border-bottom"]=B;break;case"top":w={x:p.width/2-r/2,y:0},contentPostion={x:0,y:r},m.style["margin-top"]=contentPostion.y+"px",k.style["margin-left"]=w.x+"px",k.style["border-top"]="",k.style["border-bottom"]=A+" "+e.stroke,k.style["border-left"]=B,k.style["border-right"]=B,l.style["margin-left"]=w.x+"px",l.style["margin-top"]="1px",l.style["border-top"]="",l.style["border-bottom"]=A+" "+e.fill,l.style["border-left"]=B,l.style["border-right"]=B;break;case"bottom":w={x:p.width/2-r/2,y:p.height-r},contentPostion={x:0,y:0},k.style["margin-left"]=w.x+"px",k.style["margin-top"]=w.y+"px",k.style["border-top"]=A+" "+e.stroke,k.style["border-bottom"]="",k.style["border-left"]=B,k.style["border-right"]=B,l.style["margin-left"]=w.x+"px",l.style["margin-top"]=w.y-1+"px",l.style["border-top"]=A+" "+e.fill,l.style["border-bottom"]="",l.style["border-left"]=B,l.style["border-right"]=B}""==arrowLocation?(a(k).hide(),a(l).hide()):(a(k).show(),a(l).show()),a(i).css({width:p.width+"px",height:p.height+"px"});var C=f.host.coord();h&&(a(i).fadeOut(0,0),i.style.left=x+C.left+"px",i.style.top=y+C.top+"px"),a(i).clearQueue(),a(i).animate({left:x+C.left,top:y+C.top,opacity:1},f.toolTipMoveDuration,"easeInOutCirc"),a(i).fadeTo(400,1)}},_measureHtml:function(b,c){var d=this._measureDiv;d||(this._measureDiv=d=document.createElement("div"),d.style.position="absolute",d.style.cursor="default",d.style.overflow="hidden",d.style.display="none",a(d).addClass(c),this.host.append(d)),a(d).html(b);var e={width:a(d).width()+2,height:a(d).height()+2};return a.tis.browser&&a.tis.browser.mozilla&&(e.height+=3),e},_hideToolTip:function(b){this._ttEl&&(this._ttEl.box&&(0==b?a(this._ttEl.box).hide():a(this._ttEl.box).fadeOut()),this._hideCrosshairs(),this._ttEl.gidx=void 0)},_hideCrosshairs:function(){this._ttEl&&(this._ttEl.vLine&&(this.renderer.removeElement(this._ttEl.vLine),this._ttEl.vLine=void 0),this._ttEl.hLine&&(this.renderer.removeElement(this._ttEl.hLine),this._ttEl.hLine=void 0))},_get:function(b){return a.tis.getByPriority(b)},_getAxisSettings:function(a){if(!a)return{};var b=this,c=a.gridLines||{},d={visible:this._get([c.visible,a.showGridLines,!0]),color:b._get([c.color,a.gridLinesColor,b._defaultLineColor]),unitInterval:b._get([c.unitInterval,c.interval,a.gridLinesInterval]),step:b._get([c.step,a.gridLinesStep]),dashStyle:b._get([c.dashStyle,a.gridLinesDashStyle]),width:b._get([c.lineWidth,1]),offsets:[],alternatingBackgroundColor:a.alternatingBackgroundColor,alternatingBackgroundColor2:a.alternatingBackgroundColor2,alternatingBackgroundOpacity:a.alternatingBackgroundOpacity},e=a.tickMarks||{},f={visible:this._get([e.visible,a.showTickMarks,!0]),color:b._get([e.color,a.tickMarksColor,b._defaultLineColor]),unitInterval:b._get([e.unitInterval,e.interval,a.tickMarksInterval]),step:b._get([e.step,a.tickMarksStep]),dashStyle:b._get([e.dashStyle,a.tickMarksDashStyle]),width:b._get([e.lineWidth,1]),size:b._get([e.size,4]),offsets:[]},g=a.title||{},h={visible:b._get([g.visible,!0]),text:b._get([a.description,g.text]),style:b._get([a.descriptionClass,g.class,b.toThemeProperty("tis-chart-axis-description",null)]),halign:b._get([a.horizontalDescriptionAlignment,g.horizontalAlignment,"center"]),valign:b._get([a.verticalDescriptionAlignment,g.verticalAlignment,"center"]),angle:0,rotationPoint:b._get([g.rotationPoint,"centercenter"]),offset:b._get([g.offset,{x:0,y:0}])},i=a.line||{},j={visible:b._get([i.visible,!0]),color:b._get([i.color,d.color,b._defaultLineColor]),dashStyle:b._get([i.dashStyle,d.dashStyle,""]),width:b._get([i.lineWidth,1]),angle:b._get([i.angle,NaN])},k=a.padding||{};k={left:k.left||0,right:k.right||0,top:k.top||0,bottom:k.bottom||0};var l=this._getAxisLabelsSettings(a);return{visible:this._get([a.visible,a.showValueAxis,a.showXAxis,a.showCategoryAxis,!0]),customDraw:this._get([a.customDraw,!1]),gridLines:d,tickMarks:f,line:j,title:h,labels:l,padding:k,toolTipFormatFunction:this._get([a.toolTipFormatFunction,a.formatFunction,l.formatFunction]),toolTipFormatSettings:this._get([a.toolTipFormatSettings,a.formatSettings,l.formatSettings])}},_getAxisLabelsSettings:function(a){var b=this,c=a.labels||{};return{visible:b._get([a.showLabels,c.visible,!0]),unitInterval:b._get([c.unitInterval,c.interval,a.labelsInterval]),step:b._get([c.step,a.labelsStep]),angle:b._get([a.textRotationAngle,c.angle,0]),style:b._get([a.class,c.class,b.toThemeProperty("tis-chart-axis-text",null)]),halign:b._get([a.horizontalTextAlignment,c.horizontalAlignment,"center"]),valign:b._get([a.verticalTextAlignment,c.verticalAlignment,"center"]),textRotationPoint:b._get([a.textRotationPoint,c.rotationPoint,"auto"]),textOffset:b._get([a.textOffset,c.offset,{x:0,y:0}]),autoRotate:b._get([a.labelsAutoRotate,c.autoRotate,!1]),formatSettings:b._get([a.formatSettings,c.formatSettings,void 0]),formatFunction:b._get([a.formatFunction,c.formatFunction,void 0])}},_getLabelsSettings:function(b,c,d,e){for(var f=this.seriesGroups[b],g=f.series[c],h=isNaN(d)?void 0:this._getDataValue(d,g.dataField,b),i=e||["Visible","Offset","Angle","HorizontalAlignment","VerticalAlignment","Class","BackgroundColor","BorderColor","BorderOpacity","Padding","Opacity","BackgroundOpacity","LinesAngles","LinesEnabled","AutoRotate","Radius"],j={},k=0;k<i.length;k++){var l=i[k],m="labels"+l,n="label"+l,o=l.substring(0,1).toLowerCase()+l.substring(1),p=void 0;f.labels&&"object"==typeof f.labels&&(p=f.labels[o]),g.labels&&"object"==typeof g.labels&&void 0!=g.labels[o]&&(p=g.labels[o]),p=this._get([g[m],g[n],p,f[m],f[n]]),a.isFunction(p)?j[o]=p(h,d,g,f):j[o]=p}j.class=j.class||this.toThemeProperty("tis-chart-label-text",null),j.visible=this._get([j.visible,g.showLabels,f.showLabels,void 0!=g.labels||void 0,void 0!=f.labels||void 0]);var q=j.padding||1;return j.padding={left:this._get([q.left,isNaN(q)?1:q]),right:this._get([q.right,isNaN(q)?1:q]),top:this._get([q.top,isNaN(q)?1:q]),bottom:this._get([q.bottom,isNaN(q)?1:q])},j},_showLabel:function(a,b,c,d,e,f,g,h,i,j,k){var o,l=this.seriesGroups[a],n=(l.series[b],{width:0,height:0});if(!isNaN(c)){var p=this._getLabelsSettings(a,b,c);if(!p.visible)return g?n:void 0;if(d.width<0||d.height<0)return g?n:void 0;var q=p.angle;isNaN(j)||(q=j);var r=p.offset||{},s={x:r.x,y:r.y};isNaN(s.x)&&(s.x=0),isNaN(s.y)&&(s.y=0),e=e||p.horizontalAlignment||"center",f=f||p.verticalAlignment||"center";var t=this._getFormattedValue(a,b,c,void 0,void 0,!0),u=d.width,v=d.height;if(1==h&&"center"!=e&&(e="right"==e?"left":"right"),1==i&&"center"!=f&&"middle"!=f&&(f="top"==f?"bottom":"top",s.y*=-1),n=this.renderer.measureText(t,q,{class:p.class}),g)return n;var w=0,x=0;u>0&&(""==e||"center"==e?w+=(u-n.width)/2:"right"==e&&(w+=u-n.width)),v>0&&(""==f||"center"==f?x+=(v-n.height)/2:"bottom"==f&&(x+=v-n.height)),w+=d.x+s.x,x+=d.y+s.y;var y=this._plotRect;w<=y.x&&(w=y.x+2),x<=y.y&&(x=y.y+2);var z={width:Math.max(n.width,1),height:Math.max(n.height,1)};x+z.height>=y.y+y.height&&(x=y.y+y.height-(o?(z.height+o.height)/2:z.height)-2),w+z.width>=y.x+y.width&&(w=y.x+y.width-z.width-2);var A,B=p.backgroundColor,C=p.borderColor,D=p.padding;if(B||C){A=this.renderer.beginGroup();var d=this.renderer.rect(w-D.left,x-D.top,n.width+D.left+D.right,n.height+D.bottom+D.bottom,{fill:B||"transparent","fill-opacity":p.backgroundOpacity||1,stroke:C||"transparent","stroke-opacity":p.borderOpacity,"stroke-width":1})}var E=this.renderer.text(t,w,x,n.width,n.height,q,{class:p.class,opacity:p.opacity||1},!1,"center","center");return k&&(k.x=w-D.left,k.y=x-D.top,k.width=n.width+D.left+D.right,k.height=n.height+D.bottom+D.bottom),this._isVML&&(this.renderer.removeElement(E),this.renderer.getContainer()[0].appendChild(E)),A&&this.renderer.endGroup(),A||E}},_getAnimProps:function(a,b){var c=this.seriesGroups[a],d=isNaN(b)?void 0:c.series[b],e=1==this.enableAnimations;c.enableAnimations&&(e=1==c.enableAnimations),d&&d.enableAnimations&&(e=1==d.enableAnimations);var f=this.animationDuration;isNaN(f)&&(f=1e3);var g=c.animationDuration;if(isNaN(g)||(f=g),d){var h=d.animationDuration;isNaN(h)||(f=h)}return f>5e3&&(f=1e3),{enabled:e,duration:f}},_isColorTransition:function(a,b,c,d){if(d-1<c.xoffsets.first)return!1;var e=this._getColors(a,b,d,this._getGroupGradientType(a)),f=this._getColors(a,b,d-1,this._getGroupGradientType(a));return e.fillColor!=f.fillColor},_renderLineSeries:function(b,c){var d=this.seriesGroups[b];if(d.series&&0!=d.series.length){var e=-1!=d.type.indexOf("area"),f=-1!=d.type.indexOf("stacked"),g=f&&-1!=d.type.indexOf("100"),h=-1!=d.type.indexOf("spline"),i=-1!=d.type.indexOf("step"),j=-1!=d.type.indexOf("range"),k=1==d.polar||1==d.spider;if(k&&(i=!1),!i||!h){var l=this._getDataLen(b),n=(c.width,"horizontal"==d.orientation),o=1==this._getXAxis(b).flip,p=c;n&&(p={x:c.y,y:c.x,width:c.height,height:c.width});var q=this._calcGroupOffsets(b,p);if(q&&0!=q.xoffsets.length){this._linesRenderInfo||(this._linesRenderInfo={}),this._linesRenderInfo[b]={};for(var r=d.series.length-1;r>=0;r--){var s=this._getSerieSettings(b,r),t={groupIndex:b,rect:p,serieIndex:r,swapXY:n,isArea:e,isSpline:h,isRange:j,isPolar:k,settings:s,segments:[],pointsLength:0};if(this._isSerieVisible(b,r)){var v=d.series[r];if(!v.customDraw){var B,w=a.isFunction(v.colorFunction),x=q.xoffsets.first,y=x,z=this._getColors(b,r,NaN,this._getGroupGradientType(b));do{var C=[],D=[],E=[],G=0,H=0,I=NaN,J=NaN,K=NaN;if(!(q.xoffsets.length<1)){var L=this._getAnimProps(b,r),M=L.enabled&&!this._isToggleRefresh&&q.xoffsets.length<1e4&&1!=this._isVML?L.duration:0,N=x;B=!1;for(var P=(this._getColors(b,r,x,this._getGroupGradientType(b)),void 0),Q=x;Q<=q.xoffsets.last;Q++){x=Q;var R=q.xoffsets.data[Q],S=q.xoffsets.xvalues[Q];if(!isNaN(R)&&(R=Math.max(R,1),G=R,H=q.offsets[r][Q].to,!(!w&&P&&this.enableSampling&&a.tis._ptdist(P.x,P.y,G,H)<1))){P={x:G,y:H};var T=q.offsets[r][Q].from;if(isNaN(H)||isNaN(T)){if("connect"==v.emptyPointsDisplay)continue;if("zero"!=v.emptyPointsDisplay){B=!0;break}isNaN(H)&&(H=q.baseOffset),isNaN(T)&&(T=q.baseOffset)}if(w&&this._isColorTransition(b,r,q,x)&&C.length>1){x--;break}var U=this._elementRenderInfo;if(U&&U.length>b&&U[b].series.length>r){var V=U[b].series[r][S],K=a.tis._ptrnd(V?V.to:void 0),W=a.tis._ptrnd(p.x+(V?V.xoffset:void 0));E.push(n?{y:W,x:K,index:Q}:{x:W,y:K,index:Q})}y=Q,s.stroke<2&&(H-p.y<=1&&(H=p.y+1),T-p.y<=1&&(T=p.y+1),p.y+p.height-H<=1&&(H=p.y+p.height-1),p.y+p.height-T<=1&&(T=p.y+p.height-1)),!e&&g&&(H<=p.y&&(H=p.y+1),H>=p.y+p.height&&(H=p.y+p.height-1),T<=p.y&&(T=p.y+1),T>=p.y+p.height&&(T=p.y+p.height-1)),R=Math.max(R,1),G=R+p.x,1==d.skipOverlappingPoints&&!isNaN(I)&&Math.abs(I-G)<=1||(!i||isNaN(I)||isNaN(J)||J!=H&&C.push(n?{y:G,x:a.tis._ptrnd(J)}:{x:G,y:a.tis._ptrnd(J)}),C.push(n?{y:G,x:a.tis._ptrnd(H),index:Q}:{x:G,y:a.tis._ptrnd(H),index:Q}),D.push(n?{y:G,x:a.tis._ptrnd(T),index:Q}:{x:G,y:a.tis._ptrnd(T),index:Q}),I=G,J=H,isNaN(K)&&(K=H))}}if(0!=C.length){var X=C[C.length-1].index;w&&(z=this._getColors(b,r,X,this._getGroupGradientType(b)));var Y=p.x+q.xoffsets.data[N],Z=p.x+q.xoffsets.data[y];if(e&&1==d.alignEndPointsWithIntervals){if(Y>p.x&&(Y=p.x),Z<p.x+p.width&&(Z=p.x+p.width),o){var _=Y;Y=Z,Z=_}}Z=a.tis._ptrnd(Z),Y=a.tis._ptrnd(Y);var aa=q.baseOffset;K=a.tis._ptrnd(K);var ba=a.tis._ptrnd(H)||aa;j&&(C=C.concat(D.reverse())),t.pointsLength+=C.length;var ca={lastItemIndex:X,colorSettings:z,pointsArray:C,pointsStart:E,left:Y,right:Z,pyStart:K,pyEnd:ba,yBase:aa,labelElements:[],symbolElements:[]};t.segments.push(ca)}else x++}}while(x<q.xoffsets.length-1||B);this._linesRenderInfo[b][r]=t}}else this._linesRenderInfo[b][r]=t}var da=this._linesRenderInfo[b],ea=[];for(var Q in da)ea.push(da[Q]);ea=ea.sort(function(a,b){return a.serieIndex-b.serieIndex}),e&&f&&ea.reverse();for(var Q=0;Q<ea.length;Q++){var t=ea[Q];this._animateLine(t,0==M?1:0);var fa=this;this._enqueueAnimation("series",void 0,void 0,M,function(a,b,c){fa._animateLine(b,c)},t)}}}}},_animateLine:function(a,b){var c=a.settings,d=a.groupIndex,e=a.serieIndex,f=this.seriesGroups[d],g=f.series[e],h=this._getSymbol(d,e),i=this._getLabelsSettings(d,e,NaN,["Visible"]).visible,j=!0;a.isPolar&&(isNaN(f.endAngle)||360==Math.round(Math.abs((isNaN(f.startAngle)?0:f.startAngle)-f.endAngle))||(j=!1));for(var k=0,l=0;l<a.segments.length;l++){var m=a.segments[l],n=this._calculateLine(d,a.pointsLength,k,m.pointsArray,m.pointsStart,m.yBase,b,a.isArea,a.swapXY);if(k+=m.pointsArray.length,""!=n){var o=n.split(" "),q=(o.length,n);q=""!=q?this._buildLineCmd(n,a.isRange,m.left,m.right,m.pyStart,m.pyEnd,m.yBase,a.isArea,a.isPolar,j,a.isSpline,a.swapXY):"M 0 0";var r=m.colorSettings;if(m.pathElement?this.renderer.attr(m.pathElement,{d:q}):(m.pathElement=this.renderer.path(q,{"stroke-width":c.stroke,stroke:r.lineColor,"stroke-opacity":c.opacity,"fill-opacity":c.opacity,"stroke-dasharray":c.dashStyle,fill:a.isArea?r.fillColor:"none"}),this._installHandlers(m.pathElement,"path",d,e,m.lastItemIndex)),m.labelElements){for(var s=0;s<m.labelElements.length;s++)this.renderer.removeElement(m.labelElements[s]);m.labelElements=[]}if(m.symbolElements){for(var s=0;s<m.symbolElements.length;s++)this.renderer.removeElement(m.symbolElements[s]);m.symbolElements=[]}if(m.pointsArray.length==o.length&&("none"!=h||i))for(var t=g.symbolSize,u=this._plotRect,s=0;s<o.length;s++){var v=o[s].split(",");if(v={x:parseFloat(v[0]),y:parseFloat(v[1])},!(v.x<u.x||v.x>u.x+u.width||v.y<u.y||v.y>u.y+u.height)){if("none"!=h){var w=this._getColors(d,e,m.pointsArray[s].index,this._getGroupGradientType(d)),x=this._drawSymbol(h,v.x,v.y,w.fillColorSymbol,c.opacity,w.lineColorSymbol,c.opacity,c.strokeSymbol,void 0,t);m.symbolElements.push(x)}if(i){var y=(s>0?o[s-1]:o[s]).split(",");y={x:parseFloat(y[0]),y:parseFloat(y[1])};var z=(s<o.length-1?o[s+1]:o[s]).split(",");if(z={x:parseFloat(z[0]),y:parseFloat(z[1])},v=this._adjustLineLabelPosition(d,e,m.pointsArray[s].index,v,y,z)){var A=this._showLabel(d,e,m.pointsArray[s].index,{x:v.x,y:v.y,width:0,height:0});m.labelElements.push(A)}}}}if(1==b&&"none"!=h)for(var s=0;s<m.symbolElements.length;s++)isNaN(m.pointsArray[s].index)||this._installHandlers(m.symbolElements[s],"symbol",d,e,m.pointsArray[s].index)}}},_adjustLineLabelPosition:function(a,b,c,d,e,f){var g=this._showLabel(a,b,c,{width:0,height:0},"","",!0);if(g){var h={x:d.x-g.width/2,y:0};return h.y=d.y-1.5*g.height,h}},_calculateLine:function(b,c,d,e,f,g,h,i,j){var l,k=this.seriesGroups[b];1!=k.polar&&1!=k.spider||(l=this._getPolarAxisCoords(b,this._plotRect));var m="",n=e.length;if(!i&&0==f.length){n=c*h-d}for(var q=0;q<n+1&&q<e.length;q++){q>0&&(m+=" ");var r=e[q].y,s=e[q].x,t=i?g:r,u=s;if(f&&f.length>q&&(t=f[q].y,u=f[q].x,(isNaN(t)||isNaN(u))&&(t=r,u=s)),u,n<=e.length&&q>0&&q==n&&(u=e[q-1].x,t=e[q-1].y),j?(s=a.tis._ptrnd((s-t)*(i?h:1)+t),r=a.tis._ptrnd(r)):(s=a.tis._ptrnd((s-u)*h+u),r=a.tis._ptrnd((r-t)*h+t)),l){var v=this._toPolarCoord(l,this._plotRect,s,r);s=v.x,r=v.y}m+=s+","+r}return m},_buildLineCmd:function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a,n=l?g+","+c:c+","+g,o=l?g+","+d:d+","+g;!h||i||b||(m=n+" "+a+" "+o),k&&(m=this._getBezierPoints(m));var p=m.split(" ");if(0==p.length)return"";if(1==p.length){var q=p[0].split(",");return"M "+p[0]+" L"+(parseFloat(q[0])+1)+","+(parseFloat(q[1])+1)}var r=p[0].replace("M","");return h&&!i?m=b?"M "+r+" L "+r+(k?"":" L "+r+" ")+m:"M "+n+" L "+r+" "+m:k||(m="M "+r+" L "+r+" "+m),(i&&j||b)&&(m+=" Z"),m},_getSerieSettings:function(a,b){var c=this.seriesGroups[a],d=-1!=c.type.indexOf("area"),e=-1!=c.type.indexOf("line"),f=c.series[b],g=f.dashStyle||c.dashStyle||"",h=f.opacity||c.opacity;(isNaN(h)||h<0||h>1)&&(h=1);var i=f.lineWidth;isNaN(i)&&"auto"!=i&&(i=c.lineWidth),("auto"==i||isNaN(i)||i<0||i>15)&&(i=d?2:e?3:1);var j=f.lineWidthSymbol;return isNaN(j)&&(j=1),{stroke:i,strokeSymbol:j,opacity:h,dashStyle:g}},_getColors:function(b,c,d,e,f){var g=this.seriesGroups[b],h=g.series[c],i=this._get([h.useGradientColors,g.useGradientColors,g.useGradient,!0]),j=this._getSeriesColors(b,c,d);j.fillColor||(j.fillColor=t,j.fillColorSelected=a.tis.adjustColor(t,1.1),j.fillColorAlt=a.tis.adjustColor(t,4),j.fillColorAltSelected=a.tis.adjustColor(t,3),j.lineColor=j.symbolColor=a.tis.adjustColor(t,.9),j.lineColorSelected=j.symbolColorSelected=a.tis.adjustColor(t,.9));var k=[[0,1.4],[100,1]],l=[[0,1],[25,1.1],[50,1.4],[100,1]],m=[[0,1.3],[90,1.2],[100,1]],n=NaN;if(isNaN(f)||(n=2==f?k:l),i){var o={};for(var p in j)o[p]=j[p];if(j=o,"verticalLinearGradient"==e||"horizontalLinearGradient"==e){var q="verticalLinearGradient"==e?n||k:n||l,r=["fillColor","fillColorSelected","fillColorAlt","fillColorAltSelected"];for(var s in r){var t=j[r[s]];t&&(j[r[s]]=this.renderer._toLinearGradient(t,"verticalLinearGradient"==e,q))}}else if("radialGradient"==e){var u,n=k;("pie"==g.type||"donut"==g.type||g.polar)&&void 0!=d&&this._renderData[b]&&this._renderData[b].offsets[c]&&(u=this._renderData[b].offsets[c][d],n=m),j.fillColor=this.renderer._toRadialGradient(j.fillColor,n,u),j.fillColorSelected=this.renderer._toRadialGradient(j.fillColorSelected,n,u)}}return j},_installHandlers:function(a,b,c,d,e){if(!this.enableEvents)return!1;var f=this,g=this.seriesGroups[c],h=this.seriesGroups[c].series[d],i=-1!=g.type.indexOf("line")||-1!=g.type.indexOf("area");i||0==g.enableSelection||0==h.enableSelection||(this.renderer.addHandler(a,"mousemove",function(a){var b=f._selected;if(!b||!b.isLineType||"click"!=b.linesUnselectMode||b.group==c&&b.series==d){var g=a.pageX||a.clientX||a.screenX,h=a.pageY||a.clientY||a.screenY,i=f.host.offset();g-=i.left,h-=i.top,f._mouseX==g&&f._mouseY==h||f._ttEl&&f._ttEl.gidx==c&&f._ttEl.sidx==d&&f._ttEl.iidx==e||f._startTooltipTimer(c,d,e)}}),this.renderer.addHandler(a,"mouseout",function(a){return})),0!=g.enableSelection&&0!=h.enableSelection&&this.renderer.addHandler(a,"mouseover",function(g){var h=f._selected;h&&h.isLineType&&"click"==h.linesUnselectMode&&(h.group!=c||h.series!=d)||f._select(a,b,c,d,e,e)}),this.renderer.addHandler(a,"click",function(a){clearTimeout(f._hostClickTimer),f._lastClickTs=(new Date).valueOf(),i&&"symbol"!=b&&"pointMarker"!=b||(f._isColumnType(g.type)&&f._unselect(),isNaN(e)||(a.stopImmediatePropagation(),f._raiseItemEvent("click",g,h,e)))})},_getHorizontalOffset:function(b,c,d,e){var f=this._plotRect;if(0==this._getDataLen(b))return{index:void 0,value:d};var h=this._calcGroupOffsets(b,this._plotRect);if(0==h.xoffsets.length)return{index:void 0,value:void 0};var l,i=d,j=e,k=this.seriesGroups[b];(k.polar||k.spider)&&(l=this._getPolarAxisCoords(b,f));for(var n,o,p,q,r=(this._getXAxis(b).flip,h.xoffsets.first);r<=h.xoffsets.last;r++){var s=h.xoffsets.data[r],t=h.offsets[c][r].to,u=0;if(l){var v=this._toPolarCoord(l,f,s+f.x,t);s=v.x,t=v.y,u=a.tis._ptdist(i,j,s,t)}else if("horizontal"==k.orientation){s+=f.y;var w=t;t=s,s=w,u=a.tis._ptdist(i,j,s,t)}else s+=f.x,u=Math.abs(i-s);(isNaN(n)||n>u)&&(n=u,o=r,p=s,q=t)}return{index:o,value:h.xoffsets.data[o],polarAxisCoords:l,x:p,y:q}},onmousemove:function(b,c){if((this._mouseX!=b||this._mouseY!=c)&&(this._mouseX=b,this._mouseY=c,this._selected)){var d=this._selected.group,e=this._selected.series,f=this.seriesGroups[d],g=f.series[e],h=this._plotRect;if(this.renderer&&(h=this.renderer.getRect(),h.x+=5,h.y+=5,h.width-=10,h.height-=10),b<h.x||b>h.x+h.width||c<h.y||c>h.y+h.height)return this._hideToolTip(),void this._unselect();var i="horizontal"==f.orientation,h=this._plotRect;if(-1!=f.type.indexOf("line")||-1!=f.type.indexOf("area")){var j=this._getHorizontalOffset(d,this._selected.series,b,c),k=j.index;if(void 0==k)return;if(this._selected.item!=k){for(var l=this._linesRenderInfo[d][e].segments,m=0;k>l[m].lastItemIndex;)if(++m>=l.length)return;var n=l[m].pathElement,o=l[m].lastItemIndex;this._unselect(!1),this._select(n,"path",d,e,k,o)}var p=this._getSymbol(this._selected.group,this._selected.series);"none"==p&&(p="circle");var q=this._calcGroupOffsets(d,h),r=q.offsets[this._selected.series][k].to,s=r;-1!=f.type.indexOf("range")&&(s=q.offsets[this._selected.series][k].from);var t=i?b:c;if(c=!isNaN(s)&&Math.abs(t-s)<Math.abs(t-r)?s:r,isNaN(c))return;if(b=j.value,i){var u=b;b=c,c=u+h.y}else b+=h.x;if(j.polarAxisCoords&&(b=j.x,c=j.y),c=a.tis._ptrnd(c),b=a.tis._ptrnd(b),this._pointMarker&&this._pointMarker.element&&(this.renderer.removeElement(this._pointMarker.element),this._pointMarker.element=void 0),isNaN(b)||isNaN(c))return;var v=this._getSeriesColors(d,e,k),w=this._getSerieSettings(d,e),x=g.symbolSizeSelected;isNaN(x)&&(x=g.symbolSize),(isNaN(x)||x>50||x<0)&&(x=f.symbolSize),(isNaN(x)||x>50||x<0)&&(x=8),(this.showToolTips||this.enableCrosshairs)&&(this._pointMarker={type:p,x:b,y:c,gidx:d,sidx:e,iidx:k},this._pointMarker.element=this._drawSymbol(p,b,c,v.fillColorSymbolSelected,w.opacity,v.lineColorSymbolSelected,w.opacity,w.strokeSymbol,w.dashStyle,x),this._installHandlers(this._pointMarker.element,"pointMarker",d,e,k)),this._startTooltipTimer(d,this._selected.series,k)}}},_drawSymbol:function(a,b,c,d,e,f,g,h,i,j){var k,l=j||6,m=l/2;switch(a){case"none":return;case"circle":k=this.renderer.circle(b,c,l/2);break;case"square":l-=1,m=l/2,k=this.renderer.rect(b-m,c-m,l,l);break;case"diamond":var n="M "+(b-m)+","+c+" L"+b+","+(c-m)+" L"+(b+m)+","+c+" L"+b+","+(c+m)+" Z";k=this.renderer.path(n);break;case"triangle_up":case"triangle":var n="M "+(b-m)+","+(c+m)+" L "+(b+m)+","+(c+m)+" L "+b+","+(c-m)+" Z";k=this.renderer.path(n);break;case"triangle_down":var n="M "+(b-m)+","+(c-m)+" L "+b+","+(c+m)+" L "+(b+m)+","+(c-m)+" Z";k=this.renderer.path(n);break;case"triangle_left":var n="M "+(b-m)+","+c+" L "+(b+m)+","+(c+m)+" L "+(b+m)+","+(c-m)+" Z";k=this.renderer.path(n);break;case"triangle_right":var n="M "+(b-m)+","+(c-m)+" L "+(b-m)+","+(c+m)+" L "+(b+m)+","+c+" Z";k=this.renderer.path(n);break;default:k=this.renderer.circle(b,c,l)}return this.renderer.attr(k,{fill:d,"fill-opacity":e,stroke:f,"stroke-width":h,"stroke-opacity":g,"stroke-dasharray":i||""}),"circle"!=a&&(this.renderer.attr(k,{r:l/2}),"square"!=a&&this.renderer.attr(k,{x:b,y:c})),k},_getSymbol:function(a,b){var f,c=["circle","square","diamond","triangle_up","triangle_down","triangle_left","triangle_right"],d=this.seriesGroups[a],e=d.series[b];return void 0!=e.symbolType&&(f=e.symbolType),void 0==f&&(f=d.symbolType),"default"==f?c[b%c.length]:void 0!=f?f:"none"},_startTooltipTimer:function(a,b,c,d,e,f,g){this._cancelTooltipTimer();var h=this,j=(h.seriesGroups[a],this.toolTipShowDelay||this.toolTipDelay);(isNaN(j)||j>1e4||j<0)&&(j=500),(this._ttEl||1==this.enableCrosshairs&&0==this.showToolTips)&&(j=0),isNaN(f)||(j=f),clearTimeout(this._tttimerHide),isNaN(d)&&(d=h._mouseX),isNaN(e)&&(e=h._mouseY-3),0==j&&h._showToolTip(d,e,a,b,c),this._tttimer=setTimeout(function(){0!=j&&h._showToolTip(d,e,a,b,c);var f=h.toolTipHideDelay;isNaN(g)||(f=g),isNaN(f)&&(f=4e3),h._tttimerHide=setTimeout(function(){h._hideToolTip(),h._unselect()},f)},j)},_cancelTooltipTimer:function(){clearTimeout(this._tttimer)},_getGroupGradientType:function(a){var b=this.seriesGroups[a];return-1!=b.type.indexOf("area")?"horizontal"==b.orientation?"horizontalLinearGradient":"verticalLinearGradient":this._isColumnType(b.type)||-1!=b.type.indexOf("candle")?b.polar?"radialGradient":"horizontal"==b.orientation?"verticalLinearGradient":"horizontalLinearGradient":-1!=b.type.indexOf("scatter")||-1!=b.type.indexOf("bubble")||this._isPieGroup(a)?"radialGradient":void 0},_select:function(a,b,c,d,e,f){if(this._selected){if(this._selected.item==e&&this._selected.series==d&&this._selected.group==c)return;this._unselect()}var g=this.seriesGroups[c],h=g.series[d];if(0!=g.enableSelection&&0!=h.enableSelection){var i=-1!=g.type.indexOf("line")&&-1==g.type.indexOf("area");this._selected={element:a,type:b,group:c,series:d,item:e,iidxBase:f,isLineType:i,linesUnselectMode:h.linesUnselectMode||g.linesUnselectMode};var j=this._getColors(c,d,f||e,this._getGroupGradientType(c)),k=j.fillColorSelected;i&&(k="none");var l=this._getSerieSettings(c,d),m="symbol"==b?j.lineColorSymbolSelected:j.lineColorSelected;k="symbol"==b?j.fillColorSymbolSelected:k;var n="symbol"==b?1:l.stroke;this.renderer.getAttr(a,"fill")==j.fillColorAlt&&(k=j.fillColorAltSelected),this.renderer.attr(a,{stroke:m,fill:k,"stroke-width":n}),-1==g.type.indexOf("pie")&&-1==g.type.indexOf("donut")||this._applyPieSelect(),this._raiseItemEvent("mouseover",g,h,e)}},_applyPieSelect:function(){var a=this;a._createAnimationGroup("animPieSlice");var b=this._selected;if(b){var c=this.getItemCoord(b.group,b.series,b.item);if(c){var d=this._getRenderInfo(b.group,b.series,b.item),e={element:d,coord:c};this._enqueueAnimation("animPieSlice",void 0,void 0,300,function(c,d,e){var f=d.coord,g=f.selectedRadiusChange*e,h=a.renderer.pieSlicePath(f.center.x,f.center.y,0==f.innerRadius?0:f.innerRadius+g,f.outerRadius+g,f.fromAngle,f.toAngle,f.centerOffset);a.renderer.attr(d.element.element,{d:h}),a._showPieLabel(b.group,b.series,b.item,void 0,g)},e),a._startAnimation("animPieSlice")}}},_applyPieUnselect:function(){this._stopAnimations();var a=this._selected;if(a){var b=this.getItemCoord(a.group,a.series,a.item);if(b&&b.center){var c=this.renderer.pieSlicePath(b.center.x,b.center.y,b.innerRadius,b.outerRadius,b.fromAngle,b.toAngle,b.centerOffset);this.renderer.attr(a.element,{d:c}),this._showPieLabel(a.group,a.series,a.item,void 0,0)}}},_unselect:function(){var a=this;if(a._selected){var b=a._selected.group,c=a._selected.series,d=a._selected.item,e=a._selected.iidxBase,f=a._selected.type,g=a.seriesGroups[b],h=g.series[c],i=-1!=g.type.indexOf("line")&&-1==g.type.indexOf("area"),j=a._getColors(b,c,e||d,a._getGroupGradientType(b)),k=j.fillColor;i&&(k="none");var l=a._getSerieSettings(b,c),m="symbol"==f?j.lineColorSymbol:j.lineColor;k="symbol"==f?j.fillColorSymbol:k,this.renderer.getAttr(a._selected.element,"fill")==j.fillColorAltSelected&&(k=j.fillColorAlt);var n="symbol"==f?1:l.stroke;a.renderer.attr(a._selected.element,{stroke:m,fill:k,"stroke-width":n}),-1==g.type.indexOf("pie")&&-1==g.type.indexOf("donut")||this._applyPieUnselect(),a._selected=void 0,isNaN(d)||a._raiseItemEvent("mouseout",g,h,d)}a._pointMarker&&(a._pointMarker.element&&(a.renderer.removeElement(a._pointMarker.element),a._pointMarker.element=void 0),a._pointMarker=void 0,a._hideCrosshairs())},_raiseItemEvent:function(b,c,d,e){for(var f=d[b]||c[b],g=0;g<this.seriesGroups.length&&this.seriesGroups[g]!=c;g++);if(g!=this.seriesGroups.length){var h={event:b,seriesGroup:c,serie:d,elementIndex:e,elementValue:this._getDataValue(e,d.dataField,g)};f&&a.isFunction(f)&&f(h),this._raiseEvent(b,h)}},_raiseEvent:function(b,c){var d=new a.Event(b);return d.owner=this,c.event=b,d.args=c,this.host.trigger(d)},_calcInterval:function(a,b,c){var d=Math.abs(b-a),e=d/c,f=[1,2,3,4,5,10,15,20,25,50,100],g=[.5,.25,.125,.1],h=.1,i=f;e<1&&(i=g,h=10);var j=0;do{j=0,e>=1?h*=10:h/=10;for(var k=1;k<i.length&&Math.abs(i[j]*h-e)>Math.abs(i[k]*h-e);k++)j=k}while(j==i.length-1);return i[j]*h},_renderDataClone:function(){if(this._renderData&&!this._isToggleRefresh){var a=this._elementRenderInfo=[];if(!this._isSelectorRefresh)for(var b=0;b<this._renderData.length;b++){for(this._getXAxis(b).dataField;a.length<=b;)a.push({});var d=a[b],e=this._renderData[b];if(e.offsets){if(e.valueAxis){d.valueAxis={itemOffsets:{}};for(var f in e.valueAxis.itemOffsets)d.valueAxis.itemOffsets[f]=e.valueAxis.itemOffsets[f]}if(e.xAxis){d.xAxis={itemOffsets:{}};for(var f in e.xAxis.itemOffsets)d.xAxis.itemOffsets[f]=e.xAxis.itemOffsets[f]}d.series=[];for(var g=d.series,h=this._isPieGroup(b),i=0;i<e.offsets.length;i++){g.push({});for(var j=0;j<e.offsets[i].length;j++)if(h){var k=e.offsets[i][j];g[i][k.displayValue]={value:k.value,x:k.x,y:k.y,fromAngle:k.fromAngle,toAngle:k.toAngle}}else g[i][e.xoffsets.xvalues[j]]={value:e.offsets[i][j].value,valueRadius:e.offsets[i][j].valueRadius,xoffset:e.xoffsets.data[j],from:e.offsets[i][j].from,to:e.offsets[i][j].to}}}}}},getPolarDataPointOffset:function(a,b,c){var d=this._renderData[c];if(!d)return{x:NaN,y:NaN};var e=this.getValueAxisDataPointOffset(b,c),f=this.getXAxisDataPointOffset(a,c),g=this._toPolarCoord(d.polarCoords,d.xAxis.rect,f,e);return{x:g.x,y:g.y}},_getDataPointOffsetDiff:function(a,b,c,d,e,f,g){var h=this._getDataPointOffset(a,c,d,e,f,g),i=this._getDataPointOffset(b,c,d,e,f,g);return Math.abs(h-i)},_getXAxisRenderData:function(a){if(!(a>=this._renderData.length)){var b=this.seriesGroups[a],c=this._renderData[a].xAxis;if(c){if(void 0==b.xAxis){for(var d=0;d<=a&&void 0!=this.seriesGroups[d].xAxis;d++);c=this._renderData[d].xAxis}return c}}},getXAxisDataPointOffset:function(a,b){var c=this.seriesGroups[b];if(isNaN(a))return NaN;if(renderData=this._getXAxisRenderData(b),!renderData)return NaN;var d=renderData.data.axisStats,e=d.min.valueOf(),f=d.max.valueOf(),g=f-e;if(0==g&&(g=1),a.valueOf()>f||a.valueOf()<e)return NaN;var h=this._getXAxis(b),i="horizontal"==c.orientation?"height":"width",j="horizontal"==c.orientation?"y":"x",k=(a.valueOf()-e)/g,l=renderData.rect[i]-renderData.data.padding.left-renderData.data.padding.right;if(c.polar||c.spider){this._renderData[b].polarCoords.isClosedCircle&&(l=renderData.data.axisSize)}return this._plotRect[j]+renderData.data.padding.left+l*(h.flip?1-k:k)},getValueAxisDataPointOffset:function(a,b){var c=this._getValueAxis(b);if(!c)return NaN;var d=this._renderData[b];if(!d)return NaN;var e=1==c.flip,f=d.logBase,g=d.scale,h=d.gbase,i=d.baseOffset;return this._getDataPointOffset(a,h,f,g,i,e)},_getDataPointOffset:function(b,c,d,e,f,g){var h;return isNaN(b)&&(b=c),h=isNaN(d)?(b-c)*e:(a.tis.log(b,d)-a.tis.log(c,d))*e,this._isVML&&(h=Math.round(h)),h=g?f+h:f-h},_calcGroupOffsets:function(b,c){for(var d=this.seriesGroups[b];this._renderData.length<b+1;)this._renderData.push({});if(null!=this._renderData[b]&&void 0!=this._renderData[b].offsets)return this._renderData[b];if(this._isPieGroup(b))return this._calcPieSeriesGroupOffsets(b,c);var e=this._getValueAxis(b);if(!e||!d.series||0==d.series.length)return this._renderData[b];var f=1==e.flip,g=1==e.logarithmicScale,h=e.logarithmicScaleBase||10,i=[],j=-1!=d.type.indexOf("stacked"),k=j&&-1!=d.type.indexOf("100"),l=-1!=d.type.indexOf("range"),m=this._isColumnType(d.type),n=-1!=d.type.indexOf("waterfall"),o=this._getDataLen(b),p=d.baselineValue||e.baselineValue||0;k&&(p=0);var q=this._stats.seriesGroups[b];if(q&&q.isValid){var r=q.hasStackValueReversal;if(r&&(p=0),n&&j){if(r)return;p=q.base}p>q.max&&(p=q.max),p<q.min&&(p=q.min);var s=k||g?q.maxRange:q.max-q.min,t=q.min,u=q.max,v=c.height/(g?q.intervals:s),w=0;k?t*u<0?(s/=2,w=-(s+p)*v):w=-p*v:w=-(p-t)*v,f?w=c.y-w:w+=c.y+c.height;var A,x=[],y=[],z=[];g&&(A=a.tis.log(u,h)-a.tis.log(p,h),j&&(A=q.intervals,p=k?0:t),q.intervals-A,f||(w=c.y+A/q.intervals*c.height)),w=a.tis._ptrnd(w);var C=t*u<0?c.height/2:c.height,D=[],E=[],F=j&&(m||g),G=[];i=new Array(d.series.length);for(var H=0;H<d.series.length;H++)i[H]=new Array(o);for(var I=0;I<o;I++){!n&&j&&(E=[]);for(var H=0;H<d.series.length;H++){!j&&g&&(D=[]);var J=d.series[H],K=J.dataField,L=J.dataFieldFrom,M=J.dataFieldTo,N=J.radiusDataField||J.sizeDataField;i[H][I]={};var O=this._isSerieVisible(b,H);if(-1==d.type.indexOf("candle")&&-1==d.type.indexOf("ohlc")){if(j)for(;E.length<=I;)E.push(0);var S=NaN;l&&(S=this._getDataValueAsNumber(I,L,b),isNaN(S)&&(S=p));var T=NaN;T=l?this._getDataValueAsNumber(I,M,b):this._getDataValueAsNumber(I,K,b);var U=this._getDataValueAsNumber(I,N,b);if(j&&(E[I]+=O?T:0),O||(T=NaN),isNaN(T)||g&&T<=0)i[H][I]={from:void 0,to:void 0};else{var V;j&&(F?V=T>=p?x:y:T=E[I]);var W=v*(T-p);if(l&&(W=v*(T-S)),j&&F&&(G[I]?W=v*T:(G[I]=!0,W=v*(T-p))),g){for(;D.length<=I;)D.push({p:{value:0,height:0},n:{value:0,height:0}});var X=l||l?S:p,Y=T>X?D[I].p:D[I].n;Y.value+=T,k?(T=Y.value/(q.psums[I]+q.nsums[I])*100,W=(a.tis.log(T,h)-q.minPow)*v):(W=a.tis.log(Y.value,h)-a.tis.log(X,h),W*=v),W-=Y.height,Y.height+=W}var Z=w;if(l){var $=0;$=g?(a.tis.log(S,h)-a.tis.log(p,h))*v:(S-p)*v,Z+=f?$:-$}if(j){if(k&&!g){var _=q.psums[I]-q.nsums[I];T>p?(W=q.psums[I]/_*C,0!=q.psums[I]&&(W*=T/q.psums[I])):(W=q.nsums[I]/_*C,0!=q.nsums[I]&&(W*=T/q.nsums[I]))}F&&(isNaN(V[I])&&(V[I]=Z),Z=V[I])}isNaN(z[I])&&(z[I]=0);var aa=z[I];W=Math.abs(W);var ba=W;if(W>=1&&(h_new=this._isVML?Math.round(W):a.tis._ptrnd(W)-1,W=Math.abs(W-h_new)>.5?Math.round(W):h_new),aa+=W-ba,j||(aa=0),Math.abs(aa)>.5&&(aa>0?(W-=1,aa-=1):(W+=1,aa+=1)),z[I]=aa,H==d.series.length-1&&k){for(var ca=0,da=0;da<H;da++)ca+=Math.abs(i[da][I].to-i[da][I].from);if((ca+=W)<C)if(W>.5)W=a.tis._ptrnd(W+C-ca);else for(var da=H-1;da>=0;){var ea=Math.abs(i[da][I].to-i[da][I].from);if(ea>1){i[da][I].from>i[da][I].to&&(i[da][I].from+=C-ca);break}da--}}f&&(W*=-1);var fa=T<p;l&&(fa=S>T);var ga=isNaN(S)?T:{from:S,to:T};fa?(F&&(V[I]+=W),i[H][I]={from:Z,to:Z+W,value:ga,valueRadius:U}):(F&&(V[I]-=W),i[H][I]={from:Z,to:Z-W,value:ga,valueRadius:U})}}else{var P=["Open","Close","High","Low"];for(var Q in P){var R="dataField"+P[Q];J[R]&&(i[H][I][P[Q]]=this._getDataPointOffset(this._getDataValueAsNumber(I,J[R],b),p,g?h:NaN,v,w,f))}}}}var ha=this._renderData[b];return ha.baseOffset=w,ha.gbase=p,ha.logBase=g?h:NaN,ha.scale=v,ha.offsets=n?this._applyWaterfall(i,o,b,w,p,g?h:NaN,v,f,j):i,ha.xoffsets=this._calculateXOffsets(b,c.width),this._renderData[b]}},_isPercent:function(a){return"string"==typeof a&&a.length>0&&a.indexOf("%")==a.length-1},_calcPieSeriesGroupOffsets:function(b,c){for(var d=this,e=this._getDataLen(b),f=this.seriesGroups[b],g=this._renderData[b]={},h=g.offsets=[],i=0;i<f.series.length;i++){var j=f.series[i],k=this._get([j.minAngle,j.startAngle]);(isNaN(k)||k<0||k>360)&&(k=0);var l=this._get([j.maxAngle,j.endAngle]);(isNaN(l)||l<0||l>360)&&(l=360);var m=l-k,n=j.initialAngle||0;n<k&&(n=k),n>l&&(n=l);var o=j.centerOffset||0,p=a.tis.getNum([j.offsetX,f.offsetX,c.width/2]),q=a.tis.getNum([j.offsetY,f.offsetY,c.height/2]),r=Math.min(c.width,c.height)/2,s=n,t=j.radius;d._isPercent(t)&&(t=parseFloat(t)/100*r),isNaN(t)&&(t=.4*r);var u=j.innerRadius;d._isPercent(u)&&(u=parseFloat(u)/100*r),(isNaN(u)||u>=t)&&(u=0);var v=j.selectedRadiusChange;d._isPercent(v)&&(v=parseFloat(v)/100*(t-u)),isNaN(v)&&(v=.1*(t-u)),h.push([]);for(var w=0,x=0,y=0;y<e;y++){var z=this._getDataValueAsNumber(y,j.dataField,b);isNaN(z)||(this._isSerieVisible(b,i,y)||1==j.hiddenPointsDisplay)&&(z>0?w+=z:x+=z)}var A=w-x;0==A&&(A=1);for(var y=0;y<e;y++){var z=this._getDataValueAsNumber(y,j.dataField,b);if(isNaN(z))h[i].push({});else{var B=j.displayText||j.displayField,C=this._getDataValue(y,B,b);void 0==C&&(C=y);var D=0,E=this._isSerieVisible(b,i,y);(E||1==j.hiddenPointsDisplay)&&(D=Math.abs(z)/A*m);var F=c.x+p,G=c.y+q,H=o;a.isFunction(o)&&(H=o({seriesIndex:i,seriesGroupIndex:b,itemIndex:y})),isNaN(H)&&(H=0);var I={key:b+"_"+i+"_"+y,value:z,displayValue:C,x:F,y:G,fromAngle:s,toAngle:s+D,centerOffset:H,innerRadius:u,outerRadius:t,selectedRadiusChange:v,visible:E};h[i].push(I),s+=D}}}return g},_isPointSeriesOnly:function(){for(var a=0;a<this.seriesGroups.length;a++){var b=this.seriesGroups[a];if(-1==b.type.indexOf("line")&&-1==b.type.indexOf("area")&&-1==b.type.indexOf("scatter")&&-1==b.type.indexOf("bubble"))return!1}return!0},_hasColumnSeries:function(){for(var a=["column","ohlc","candlestick","waterfall"],b=0;b<this.seriesGroups.length;b++){var c=this.seriesGroups[b];for(var d in a)if(-1!=c.type.indexOf(a[d]))return!0}return!1},_alignValuesWithTicks:function(a){var b=this._isPointSeriesOnly(),c=this.seriesGroups[a],d=this._getXAxis(a),e=void 0==d.valuesOnTicks?b:0!=d.valuesOnTicks;return d.logarithmicScale&&(e=!0),void 0==a?e:void 0==c.valuesOnTicks?e:c.valuesOnTicks},_getYearsDiff:function(a,b){return b.getFullYear()-a.getFullYear()},_getMonthsDiff:function(a,b){return 12*(b.getFullYear()-a.getFullYear())+b.getMonth()-a.getMonth()},_getDateDiff:function(b,c,d,e){var f=0;switch("year"!=d&&"month"!=d&&(f=c.valueOf()-b.valueOf()),d){case"year":f=this._getYearsDiff(b,c);break;case"month":f=this._getMonthsDiff(b,c);break;case"day":f/=864e5;break;case"hour":f/=36e5;break;case"minute":f/=6e4;break;case"second":f/=1e3}return"year"!=d&&"month"!=d&&0!=e&&(f=a.tis._rnd(f,1,!0)),f},_getBestDTUnit:function(a,b,c,d,e){var f="day",g=b.valueOf()-a.valueOf();f=g<1e3?"second":g<36e5?"minute":g<864e5?"hour":g<2592e6?"day":g<31104e6?"month":"year";for(var h=[{key:"year",cnt:g/31536e6},{key:"month",cnt:g/2592e6},{key:"day",cnt:g/864e5},{key:"hour",cnt:g/36e5},{key:"minute",cnt:g/6e4},{key:"second",cnt:g/1e3},{key:"millisecond",cnt:g}],i=-1,j=0;j<h.length;j++)if(h[j].key==f){i=j;break}for(var k=-1,l=-1;i<h.length&&!(h[i].cnt/100>d);i++){var m=this._estAxisInterval(a,b,c,d,h[i].key,e),n=this._getDTIntCnt(a,b,m,h[i].key);(-1==k||k<n)&&(k=n,l=i)}return f=h[l].key},_getXAxisStats:function(b,c,d){var e=this._getDataLen(b),f="date"==c.type||"time"==c.type;if(f&&!this._autoDateFormats){this._autoDateFormats||(this._autoDateFormats=[]);var g=this._testXAxisDateFormat();g&&this._autoDateFormats.push(g)}var h=f?this._castAsDate(c.minValue,c.dateFormat):this._castAsNumber(c.minValue),i=f?this._castAsDate(c.maxValue,c.dateFormat):this._castAsNumber(c.maxValue);if(this._selectorRange&&this._selectorRange[b]){var j=this._selectorRange[b].min;isNaN(j)||(h=f?this._castAsDate(j,c.dateFormat):this._castAsNumber(j));var k=this._selectorRange[b].max;isNaN(k)||(i=f?this._castAsDate(k,c.dateFormat):this._castAsNumber(k))}for(var n,o,l=h,m=i,p=void 0==c.type||"auto"==c.type,q=p||"basic"==c.type,r=0,s=0,t=0;t<e&&c.dataField;t++){var u=this._getDataValue(t,c.dataField,b);u=f?this._castAsDate(u,c.dateFormat):this._castAsNumber(u),isNaN(u)||(f?r++:s++,(isNaN(n)||u<n)&&(n=u),(isNaN(o)||u>=o)&&(o=u))}p&&(!f&&s==e||f&&r==e)&&(q=!1),q&&(n=0,o=Math.max(0,e-1)),isNaN(l)&&(l=n),isNaN(m)&&(m=o),f?(this._isDate(l)||(l=this._isDate(m)?m:new Date),this._isDate(m)||(m=this._isDate(l)?l:new Date)):(isNaN(l)&&(l=0),isNaN(m)&&(m=q?Math.max(0,e-1):l)),void 0==n&&(n=l),void 0==o&&(o=m);var v=c.rangeSelector;if(v){var w=v.minValue||l;w&&f&&(w=this._castAsDate(w,v.dateFormat||c.dateFormat));var x=v.maxValue||m;x&&f&&(x=this._castAsDate(x,v.dateFormat||c.rangeSelector)),l<w&&(l=w),m<w&&(m=x),l>x&&(l=w),m>x&&(m=x)}var z,A,y=c.unitInterval;f&&(z=c.baseUnit,z||(z=this._getBestDTUnit(l,m,b,d)),A="hour"==z||"minute"==z||"second"==z||"millisecond"==z);var B=1==c.logarithmicScale,C=c.logarithmicScaleBase;(isNaN(C)||C<=1)&&(C=10);var y=c.unitInterval;B?y=1:(isNaN(y)||y<=0)&&(y=this._estAxisInterval(l,m,b,d,z));var D={min:l,max:m},E=this.seriesGroups[b];if(B){l||(l=1,m&&l>m&&(l=m)),m||(m=l),D={min:l,max:m};var F=a.tis._rnd(a.tis.log(l,C),1,!1),G=a.tis._rnd(a.tis.log(m,C),1,!0);m=Math.pow(C,G),l=Math.pow(C,F)}else f||!E.polar&&!E.spider||(l=a.tis._rnd(l,y,!1),m=a.tis._rnd(m,y,!0));return{min:l,max:m,logAxis:{enabled:B,base:C,minPow:F,maxPow:G},dsRange:{min:n,max:o},filterRange:D,useIndeces:q,isDateTime:f,isTimeUnit:A,dateTimeUnit:z,interval:y}},_getDefaultDTFormatFn:function(a){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return"year"==a||"month"==a||"day"==a?function(a){return a.getDate()+"-"+b[a.getMonth()]+"-"+a.getFullYear()}:function(a){return a.getDate()+"-"+b[a.getMonth()]+"-"+a.getFullYear()+"<br>"+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}},_getDTIntCnt:function(a,b,c,d){var e=0,f=new Date(a),g=new Date(b);if(g=g.valueOf(),c<=0)return 1;for(;f.valueOf()<g;)"millisecond"==d?f=new Date(f.valueOf()+c):"second"==d?f=new Date(f.valueOf()+1e3*c):"minute"==d?f=new Date(f.valueOf()+6e4*c):"hour"==d?f=new Date(f.valueOf()+6e4*c*24):"day"==d?f.setDate(f.getDate()+c):"month"==d?f.setMonth(f.getMonth()+c):"year"==d&&f.setFullYear(f.getFullYear()+c),e++;return e},_estAxisInterval:function(a,b,c,d,e,f){if(isNaN(a)||isNaN(b))return NaN;var g=[1,2,5,10,15,20,50,100,200,500],h=0,i=d/(!isNaN(f)&&f>0?f:50);if(this._renderData&&this._renderData.length>c&&this._renderData[c].xAxis&&!isNaN(this._renderData[c].xAxis.avgWidth)){var j=Math.max(1,this._renderData[c].xAxis.avgWidth);0!=j&&isNaN(f)&&(i=.9*d/j)}if(i<=1)return Math.abs(b-a);for(;;){var l=h>=g.length?Math.pow(10,3+h-g.length):g[h];if((this._isDate(a)&&this._isDate(b)?this._getDTIntCnt(a,b,l,e):(b-a)/l)<=i)break;h++}var m=this.seriesGroups[c];return(m.spider||m.polar)&&2*l>b-a&&(l=b-a),l},_getPaddingSize:function(a,b,c,d,e,f,g){var h=a.min,i=a.max;a.logAxis.enabled&&(h=a.logAxis.minPow,i=a.logAxis.maxPow);var j=a.interval,k=a.dateTimeUnit;if(e){var l=d/Math.max(1,i-h+j)*j;return f?{left:0,right:l}:c?{left:0,right:0}:{left:l/2,right:l/2}}if(c&&!g)return{left:0,right:0};if(this._isDate(h)&&this._isDate(i)){var m=this._getDTIntCnt(h,i,Math.min(j,i-h),k),n=d/Math.max(2,m);return{left:n/2,right:n/2}}var m=Math.max(1,i-h);if(1==m)return sz=d/4,{left:sz,right:sz};var n=d/(m+1);return{left:n/2,right:n/2}},_calculateXOffsets:function(b,c){var d=this.seriesGroups[b],e=this._getXAxis(b),f=[],g=[],h=this._getDataLen(b),i=this._getXAxisStats(b,e,c),j=i.min,k=i.max,l=i.isDateTime,m=i.isTimeUnit,n=this._hasColumnSeries(),o=d.polar||d.spider,p=this._get([d.startAngle,d.minAngle,0]),q=this._get([d.endAngle,d.maxAngle,360]),r=o&&!(Math.abs(Math.abs(q-p)-360)>1e-4),s=this._alignValuesWithTicks(b),t=this._getPaddingSize(i,e,s,c,o,r,n),u=k-j,v=i.filterRange;0==u&&(u=1);var w=c-t.left-t.right;o&&s&&!r&&(t.left=t.right=0);for(var x=-1,y=-1,z=0;z<h;z++){var A=void 0===e.dataField?z:this._getDataValue(z,e.dataField,b);if(i.useIndeces){if(z<v.min||z>v.max){f.push(NaN),g.push(void 0);continue}if(C=t.left+(z-j)/u*w,1==i.logAxis.enabled){var B=i.logAxis.base;C=this._tisPlot.scale(A,{min:j.valueOf(),max:k.valueOf(),type:"logarithmic",base:B},{min:0,max:w,flip:!1})}f.push(a.tis._ptrnd(C)),g.push(A),-1==x&&(x=z),(-1==y||y<z)&&(y=z)}else if(A=l?this._castAsDate(A,e.dateFormat):this._castAsNumber(A),isNaN(A)||A<v.min||A>v.max)f.push(NaN),g.push(void 0);else{var C=0;if(1==i.logAxis.enabled){var B=i.logAxis.base;C=this._tisPlot.scale(A,{min:j.valueOf(),max:k.valueOf(),type:"logarithmic",base:B},{min:0,max:w,flip:!1})}else!l||l&&m?(diffFromMin=A-j,C=(A-j)*w/u):C=(A.valueOf()-j.valueOf())/(k.valueOf()-j.valueOf())*w;C=a.tis._ptrnd(t.left+C),f.push(C),g.push(A),-1==x&&(x=z),(-1==y||y<z)&&(y=z)}}if(1==e.flip)for(var z=0;z<f.length;z++)isNaN(f[z])||(f[z]=c-f[z]);(m||l)&&(u=this._getDateDiff(j,k,e.baseUnit),u=a.tis._rnd(u,1,!1));var D=Math.max(1,u),E=w/D;return x==y&&1==D&&(f[x]=t.left+w/2),{axisStats:i,data:f,xvalues:g,first:x,last:y,length:-1==y?0:y-x+1,itemWidth:E,intervalWidth:E*i.interval,rangeLength:u,useIndeces:i.useIndeces,padding:t,axisSize:w}},_getXAxis:function(a){return void 0==a||this.seriesGroups.length<=a?this.categoryAxis||this.xAxis:this.seriesGroups[a].categoryAxis||this.seriesGroups[a].xAxis||this.categoryAxis||this.xAxis},_isGreyScale:function(a,b){var c=this.seriesGroups[a],d=c.series[b];return 1==d.greyScale||0!=d.greyScale&&(1==c.greyScale||0!=c.greyScale&&1==this.greyScale)},_getSeriesColors:function(b,c,d){var e=this._getSeriesColorsInternal(b,c,d);if(this._isGreyScale(b,c))for(var f in e)e[f]=a.tis.toGreyScale(e[f]);return e},_getColorFromScheme:function(a,b,c){var d="#000000",e=this.seriesGroups[a],f=e.series[b];if(this._isPieGroup(a)){var g=this._getDataLen(a);d=this._getItemColorFromScheme(f.colorScheme||e.colorScheme||this.colorScheme,b*g+c,a,b)}else{for(var h=0,i=0;i<=a;i++)for(var j in this.seriesGroups[i].series){if(i==a&&j==b)break;h++}var k=this.colorScheme;if(e.colorScheme&&(k=e.colorScheme,sidex=seriesIndex),void 0!=k&&""!=k||(k=this.colorSchemes[0].name),!k)return d;for(var i=0;i<this.colorSchemes.length;i++){var l=this.colorSchemes[i];if(l.name==k){for(;h>l.colors.length;)h-=l.colors.length,++i>=this.colorSchemes.length&&(i=0),l=this.colorSchemes[i];d=l.colors[h%l.colors.length]}}}return d},_createColorsCache:function(){this._colorsCache={get:function(a){if(this._store[a])return this._store[a]},set:function(a,b){this._size<1e4&&(this._store[a]=b,this._size++)},clear:function(){this._store={},this._size=0},_size:0,_store:{}}},_getSeriesColorsInternal:function(b,c,d){var e=this.seriesGroups[b],f=e.series[c];a.isFunction(f.colorFunction)||"pie"==e.type||"donut"==e.type||(d=NaN);var g=b+"_"+c+"_"+(isNaN(d)?"NaN":d);if(this._colorsCache.get(g))return this._colorsCache.get(g);var i,h={lineColor:"#222222",lineColorSelected:"#151515",lineColorSymbol:"#222222",lineColorSymbolSelected:"#151515",fillColor:"#222222",fillColorSelected:"#333333",fillColorSymbol:"#222222",fillColorSymbolSelected:"#333333",fillColorAlt:"#222222",fillColorAltSelected:"#333333"};if(a.isFunction(f.colorFunction)){var j=isNaN(d)?NaN:this._getDataValue(d,f.dataField,b);if(-1!=e.type.indexOf("range")&&!isNaN(d)){j={from:this._getDataValue(d,f.dataFieldFrom,b),to:this._getDataValue(d,f.dataFieldTo,b)}}if("object"==typeof(i=f.colorFunction(j,d,f,e)))for(var m in i)h[m]=i[m];else h.fillColor=i}else{for(var m in h)f[m]&&(h[m]=f[m]);f.fillColor||f.color?f.fillColor=f.fillColor||f.color:h.fillColor=this._getColorFromScheme(b,c,d)}var n={fillColor:{baseColor:"fillColor",adjust:1},fillColorSelected:{baseColor:"fillColor",adjust:1.1},fillColorSymbol:{baseColor:"fillColor",adjust:1},fillColorSymbolSelected:{baseColor:"fillColorSymbol",adjust:2},fillColorAlt:{baseColor:"fillColor",adjust:4},fillColorAltSelected:{baseColor:"fillColor",adjust:3},lineColor:{baseColor:"fillColor",adjust:.95},lineColorSelected:{baseColor:"lineColor",adjust:.95},lineColorSymbol:{baseColor:"lineColor",adjust:1},lineColorSymbolSelected:{baseColor:"lineColorSelected",adjust:1}};for(var m in h)"object"==typeof i&&i[m]||f[m]&&(h[m]=f[m]);for(var m in h)"object"==typeof i&&i[m]||f[m]||(h[m]=a.tis.adjustColor(h[n[m].baseColor],n[m].adjust));return this._colorsCache.set(g,h),h},_getItemColorFromScheme:function(b,c,d,e){void 0!=b&&""!=b||(b=this.colorSchemes[0].name);for(var f=0;f<this.colorSchemes.length&&b!=this.colorSchemes[f].name;f++);for(var g=0;g<=c;){f==this.colorSchemes.length&&(f=0);var h=this.colorSchemes[f].colors.length;if(!(g+h<=c)){var i=this.colorSchemes[f].colors[c-g];return this._isGreyScale(d,e)&&0==i.indexOf("#")&&(i=a.tis.toGreyScale(i)),i}g+=h,f++}},getColorScheme:function(a){for(var b=0;b<this.colorSchemes.length;b++)if(this.colorSchemes[b].name==a)return this.colorSchemes[b].colors},addColorScheme:function(a,b){for(var c=0;c<this.colorSchemes.length;c++)if(this.colorSchemes[c].name==a)return void(this.colorSchemes[c].colors=b);this.colorSchemes.push({name:a,colors:b})},removeColorScheme:function(a){for(var b=0;b<this.colorSchemes.length;b++)if(this.colorSchemes[b].name==a){this.colorSchemes.splice(b,1);break}},colorSchemes:[{name:"scheme01",colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]},{name:"scheme12",colors:["#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932"]},{name:"scheme13",colors:["#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54"]},{name:"scheme14",colors:["#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3"]},{name:"scheme15",colors:["#444546","#FFBB6E","#F28D00","#D94F00","#7F203B"]},{name:"scheme16",colors:["#583C39","#674E49","#948658","#F0E99A","#564E49"]},{name:"scheme17",colors:["#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17"]},{name:"scheme18",colors:["#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5"]},{name:"scheme19",colors:["#844341","#D5CC92","#BBA146","#897B26","#55591C"]},{name:"scheme20",colors:["#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472"]},{name:"scheme21",colors:["#96003A","#FF7347","#FFBC7B","#FF4154","#642223"]},{name:"scheme22",colors:["#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E"]},{name:"scheme23",colors:["#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7"]},{name:"scheme24",colors:["#7B1A25","#BF5322","#9DA860","#CEA457","#B67818"]},{name:"scheme25",colors:["#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46"]},{name:"scheme26",colors:["#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800"]},{name:"scheme27",colors:["#FF6800","#A0A700","#FF8D00","#678900","#0069A5"]}],_formatValue:function(b,c,d,e,f,g){if(void 0==b)return"";if(this._isObject(b)&&!this._isDate(b)&&!d)return"";if(d){if(!a.isFunction(d))return b.toString();try{return d(b,g,f,e)}catch(a){return a.message}}return this._isNumber(b)?this._formatNumber(b,c):this._isDate(b)?this._formatDate(b,c):c?(c.prefix||"")+b.toString()+(c.sufix||""):b.toString()},_getFormattedValue:function(b,c,d,e,f,g){var h=this.seriesGroups[b],i=h.series[c],j="",k=e,l=f;l||(l=i.formatFunction||h.formatFunction),k||(k=i.formatSettings||h.formatSettings),!i.formatFunction&&i.formatSettings&&(l=void 0);var m={},n=0;for(var o in i)0==o.indexOf("dataField")&&(m[o.substring(9).toLowerCase()]=this._getDataValue(d,i[o],b),n++);if(0==n&&(m=this._getDataValue(d,void 0,b)),-1!=h.type.indexOf("waterfall")&&this._isSummary(b,d)&&(m=this._renderData[b].offsets[c][d].value,n=0),l&&a.isFunction(l))try{return l(1==n?m[""]:m,d,i,h)}catch(a){return a.message}if(1==n&&this._isPieGroup(b))return this._formatValue(m[""],k,l,b,c,d);if(n>0){var p=0;for(var o in m){p>0&&""!=j&&(j+="<br>");var q="dataField"+(o.length>0?o.substring(0,1).toUpperCase()+o.substring(1):""),r="displayText"+(o.length>0?o.substring(0,1).toUpperCase()+o.substring(1):""),s=i[r]||i[q],t=m[o];void 0!=t&&(t=this._formatValue(t,k,l,b,c,d),j+=!0===g?t:s+": "+t,p++)}}else void 0!=m&&(j=this._formatValue(m,k,l,b,c,d));return j||""},_isNumberAsString:function(b){if("string"!=typeof b)return!1;b=a.trim(b);for(var c=0;c<b.length;c++){var d=b.charAt(c);if(!(d>="0"&&d<="9"||","==d||"."==d)&&(("-"!=d||0!=c)&&!("("==d&&0==c||")"==d&&c==b.length-1)))return!1}return!0},_castAsDate:function(b,c){if(b instanceof Date&&!isNaN(b))return b;if("string"==typeof b){var d;if(c&&(d=a.tis.dataFormat.parsedate(b,c),this._isDate(d)))return d;if(this._autoDateFormats)for(var e=0;e<this._autoDateFormats.length;e++)if(d=a.tis.dataFormat.parsedate(b,this._autoDateFormats[e]),this._isDate(d))return d;var f=this._detectDateFormat(b);return f&&(d=a.tis.dataFormat.parsedate(b,f),this._isDate(d))?(this._autoDateFormats.push(f),d):(d=new Date(b),this._isDate(d)&&-1==b.indexOf(":")&&d.setHours(0,0,0,0),d)}},_castAsNumber:function(a){if(a instanceof Date&&!isNaN(a))return a.valueOf();if("string"==typeof a)if(this._isNumber(a))a=parseFloat(a);else if(!/[a-zA-Z]/.test(a)){var b=new Date(a);void 0!=b&&(a=b.valueOf())}return a},_isNumber:function(a){return"string"==typeof a&&this._isNumberAsString(a)&&(a=parseFloat(a)),"number"==typeof a&&isFinite(a)},_isDate:function(a){return a instanceof Date&&!isNaN(a.getDate())},_isBoolean:function(a){return"boolean"==typeof a},_isObject:function(b){return b&&("object"==typeof b||a.isFunction(b))||!1},_formatDate:function(b,c){var d=b.toString();return c&&(c.dateFormat&&(d=a.tis.dataFormat.formatDate(b,c.dateFormat)),d=(c.prefix||"")+d+(c.sufix||"")),d},_formatNumber:function(a,b){if(!this._isNumber(a))return a;b=b||{};var c=".",d="",e=this;e.localization&&(c=e.localization.decimalSeparator||e.localization.decimalseparator||c,d=e.localization.thousandsSeparator||e.localization.thousandsseparator||d),b.decimalSeparator&&(c=b.decimalSeparator),b.thousandsSeparator&&(d=b.thousandsSeparator);var f=b.prefix||"",g=b.sufix||"",h=b.decimalPlaces;isNaN(h)&&(h=this._getDecimalPlaces([a],void 0,3));var i=b.negativeWithBrackets||!1,j=a<0;j&&i&&(a*=-1);var l,k=a.toString(),m=Math.pow(10,h);if(k=(Math.round(a*m)/m).toString(),isNaN(k)&&(k=""),l=k.lastIndexOf("."),h>0)for(l<0?(k+=c,l=k.length-1):"."!==c&&(k=k.replace(".",c));k.length-1-l<h;)k+="0";l=k.lastIndexOf(c),l=l>-1?l:k.length;for(var n=k.substring(l),o=0,p=l;p>0;p--,o++)o%3==0&&p!==l&&(!j||p>1||j&&i)&&(n=d+n),n=k.charAt(p-1)+n;return k=n,j&&i&&(k="("+k+")"),f+k+g},_defaultNumberFormat:{prefix:"",sufix:"",decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,negativeWithBrackets:!1},_calculateControlPoints:function(a,b){var c=a[b],d=a[b+1],e=a[b+2],f=a[b+3],g=a[b+4],h=a[b+5],i=.4,j=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),k=Math.sqrt(Math.pow(g-e,2)+Math.pow(h-f,2)),l=j+k;0==l&&(l=1);var m=i*j/l,n=i-m;return[e+m*(c-g),f+m*(d-h),e-n*(c-g),f-n*(d-h)]},_getBezierPoints:function(b){for(var c="",d=[],e=[],f=b.split(" "),g=0;g<f.length;g++){var h=f[g].split(",");d.push(parseFloat(h[0])),d.push(parseFloat(h[1])),!isNaN(d[d.length-1])&&isNaN(d[d.length-2])}var i=d.length;if(i<=1)return"";if(2==i)return c="M"+a.tis._ptrnd(d[0])+","+a.tis._ptrnd(d[1])+" L"+a.tis._ptrnd(d[0]+1)+","+a.tis._ptrnd(d[1]+1)+" ";for(var g=0;g<i-4;g+=2)e=e.concat(this._calculateControlPoints(d,g));for(var g=2;g<i-5;g+=2)c+=" C"+a.tis._ptrnd(e[2*g-2])+","+a.tis._ptrnd(e[2*g-1])+" "+a.tis._ptrnd(e[2*g])+","+a.tis._ptrnd(e[2*g+1])+" "+a.tis._ptrnd(d[g+2])+","+a.tis._ptrnd(d[g+3])+" ";return c=i<=4||Math.abs(d[0]-d[2])<3||Math.abs(d[1]-d[3])<3||this._isVML?"M"+a.tis._ptrnd(d[0])+","+a.tis._ptrnd(d[1])+" L"+a.tis._ptrnd(d[2])+","+a.tis._ptrnd(d[3])+" "+c:"M"+a.tis._ptrnd(d[0])+","+a.tis._ptrnd(d[1])+" Q"+a.tis._ptrnd(e[0])+","+a.tis._ptrnd(e[1])+" "+a.tis._ptrnd(d[2])+","+a.tis._ptrnd(d[3])+" "+c,i>=4&&(Math.abs(d[i-2]-d[i-4])<3||Math.abs(d[i-1]-d[i-3])<3||this._isVML)?c+=" L"+a.tis._ptrnd(d[i-2])+","+a.tis._ptrnd(d[i-1])+" ":i>=5&&(c+=" Q"+a.tis._ptrnd(e[2*i-10])+","+a.tis._ptrnd(e[2*i-9])+" "+a.tis._ptrnd(d[i-2])+","+a.tis._ptrnd(d[i-1])+" "),c},_animTickInt:50,_createAnimationGroup:function(a){this._animGroups||(this._animGroups={}),this._animGroups[a]={animations:[],startTick:NaN}},_startAnimation:function(a){var b=new Date,c=b.getTime();this._animGroups[a].startTick=c,this._runAnimation(),this._enableAnimTimer()},_enqueueAnimation:function(a,b,c,d,e,f,g){d<0&&(d=0),void 0==g&&(g="easeInOutSine"),this._animGroups[a].animations.push({key:b,properties:c,duration:d,fn:e,context:f,easing:g})},_stopAnimations:function(){clearTimeout(this._animtimer),this._animtimer=void 0,this._animGroups=void 0},_enableAnimTimer:function(){if(!this._animtimer){var a=this;this._animtimer=setTimeout(function(){a._runAnimation()},this._animTickInt)}},_runAnimation:function(b){if(this._animGroups){var c=new Date,d=c.getTime(),e={};for(var f in this._animGroups){for(var g=this._animGroups[f].animations,h=this._animGroups[f].startTick,i=0,j=0;j<g.length;j++){var k=g[j],l=d-h;k.duration>i&&(i=k.duration);var m=k.duration>0?l/k.duration:1,n=m;if(k.easing&&0!=k.duration&&(n=a.easing[k.easing](m,l,0,1,k.duration)),m>1&&(m=1,n=1),k.fn)k.fn(k.key,k.context,n);else{for(var o={},f=0;f<k.properties.length;f++){var p=k.properties[f],q=0;q=1==m?p.to:easeParecent*(p.to-p.from)+p.from,o[p.key]=q}this.renderer.attr(k.key,o)}}h+i>d&&(e[f]={startTick:h,animations:g})}this._animGroups=e,this.renderer instanceof a.tis.HTML5Renderer&&this.renderer.refresh()}this._animtimer=null;for(var f in this._animGroups){this._enableAnimTimer();break}},_fixCoords:function(a,b){if("horizontal"!=this.seriesGroups[b].orientation)return a;var d=a.x;a.x=a.y,a.y=d+this._plotRect.y-this._plotRect.x;var d=a.width;return a.width=a.height,a.height=d,a},getItemCoord:function(a,b,c){var d=this;if(d._isPieGroup(a)&&(!d._isSerieVisible(a,b,c)||!d._renderData||d._renderData.length<=a))return{x:NaN,y:NaN};if(!d._isSerieVisible(a,b)||!d._renderData||d._renderData.length<=a)return{x:NaN,y:NaN};var e=d.seriesGroups[a],f=e.series[b],g=d._getItemCoord(a,b,c);if(d._isPieGroup(a)){if(isNaN(g.x)||isNaN(g.y)||isNaN(g.fromAngle)||isNaN(g.toAngle))return{x:NaN,y:NaN};var h=this._plotRect,i=g.fromAngle*(Math.PI/180),j=g.toAngle*(Math.PI/180);x1=h.x+g.center.x+Math.cos(i)*g.outerRadius,x2=h.x+g.center.x+Math.cos(j)*g.outerRadius,y1=h.y+g.center.y-Math.sin(i)*g.outerRadius,y2=h.y+g.center.y-Math.sin(j)*g.outerRadius;var k=Math.min(x1,x2),l=Math.abs(x2-x1),m=Math.min(y1,y2);return g={x:k,y:m,width:l,height:Math.abs(y2-y1),center:g.center,centerOffset:g.centerOffset,innerRadius:g.innerRadius,outerRadius:g.outerRadius,selectedRadiusChange:g.selectedRadiusChange,fromAngle:g.fromAngle,toAngle:g.toAngle}}if(-1!=e.type.indexOf("column")||-1!=e.type.indexOf("waterfall")){var o=this._getColumnSerieWidthAndOffset(a,b);g.height=Math.abs(g.y.to-g.y.from),g.y=Math.min(g.y.to,g.y.from),g.x+=o.offset,g.width=o.width}else if(-1!=e.type.indexOf("ohlc")||-1!=e.type.indexOf("candlestick")){var o=this._getColumnSerieWidthAndOffset(a,b),m=g.y,p=Math.min(m.Open,m.Close,m.Low,m.High),q=Math.max(m.Open,m.Close,m.Low,m.High);g.height=Math.abs(q-p),g.y=p,g.x+=o.offset,g.width=o.width}else if(-1!=e.type.indexOf("line")||-1!=e.type.indexOf("area"))g.width=g.height=0,g.y=g.y.to;else if(-1!=e.type.indexOf("bubble")||-1!=e.type.indexOf("scatter")){g.center={x:g.x,y:g.y.to};var r=g.y.radius;"circle"!=f.symbolType&&void 0!=f.symbolType&&(r/=2),g.y=g.y.to,g.radius=r,g.width=2*r,g.height=2*r}if(g=this._fixCoords(g,a),e.polar||e.spider){var s=this._toPolarCoord(this._renderData[a].polarCoords,this._plotRect,g.x,g.y);g.x=s.x,g.y=s.y,g.center&&(g.center=this._toPolarCoord(this._renderData[a].polarCoords,this._plotRect,g.center.x,g.center.y))}return-1==e.type.indexOf("bubble")&&-1==e.type.indexOf("scatter")||(g.x-=r,g.y-=r),g},_getItemCoord:function(a,b,c){var e,f,d=this.seriesGroups[a];if(!d||!this._renderData)return{x:NaN,y:NaN};if(!d.series[b])return{x:NaN,y:NaN};var h=this._plotRect;if(this._isPieGroup(a)){var i=this._renderData[a].offsets[b][c];if(!i)return{x:NaN,y:NaN};var j=(i.fromAngle+i.toAngle)/2*(Math.PI/180);return e=h.x+i.x+Math.cos(j)*i.outerRadius,f=h.y+i.y-Math.sin(j)*i.outerRadius,{x:e,y:f,center:{x:i.x,y:i.y},centerOffset:i.centerOffset,innerRadius:i.innerRadius,outerRadius:i.outerRadius,selectedRadiusChange:i.selectedRadiusChange,fromAngle:i.fromAngle,toAngle:i.toAngle}}if(e=h.x+this._renderData[a].xoffsets.data[c],f=this._renderData[a].offsets[b][c],isNaN(e)||!f)return{x:NaN,y:NaN};var k={};for(var l in f)k[l]=f[l];return{x:e,y:k}},getXAxisValue:function(b,c){var d=this.seriesGroups[c];if(d){var e=this._getXAxis(c),f=this._plotRect,g=0,h=NaN,i=this._renderData[0].xoffsets.axisStats,j=0,k=0;if(d.polar||d.spider){if(isNaN(b.x)||isNaN(b.y))return NaN;var l=this._getPolarAxisCoords(c,f);if(a.tis._ptdist(b.x,b.y,l.x,l.y)>l.r)return NaN;var n=Math.atan2(l.y-b.y,b.x-l.x);n=Math.PI/2-n,n<0&&(n=2*Math.PI+n),h=n*l.r;var o=l.startAngle+Math.PI/2,p=l.endAngle+Math.PI/2;j=o*l.r,k=p*l.r,g=(p-o)*l.r;var q=this._getPaddingSize(i,e,e.valuesOnTicks,g,!0,l.isClosedCircle,this._hasColumnSeries());l.isClosedCircle?(g-=q.left+q.right,k-=q.left+q.right):e.valuesOnTicks||(j+=q.left,k-=q.right)}else{if("horizontal"!=d.orientation){if(b<f.x||b>f.x+f.width)return NaN;h=b-f.x,g=f.width}else{if(b<f.y||b>f.y+f.height)return NaN;h=b-f.y,g=f.height}if(this._renderData[c]&&this._renderData[c].xoffsets){var q=this._renderData[c].xoffsets.padding;g-=q.left+q.right,h-=q.left}k=g}return this._tisPlot.scale(h,{min:j,max:k},{min:i.min.valueOf(),max:i.max.valueOf(),type:i.logAxis.enabled?"logarithmic":"linear",base:i.logAxis.base,flip:e.flip})}},getValueAxisValue:function(b,c){var d=this.seriesGroups[c];if(d){var e=this._getValueAxis(c),f=this._plotRect,g=0,h=NaN;if(d.polar||d.spider){if(isNaN(b.x)||isNaN(b.y))return NaN;var i=this._getPolarAxisCoords(c,f);h=a.tis._ptdist(b.x,b.y,i.x,i.y),g=i.r,h=g-h}else if("horizontal"==d.orientation){if(b<f.x||b>f.x+f.width)return NaN;h=b-f.x,g=f.width}else{if(b<f.y||b>f.y+f.height)return NaN;h=b-f.y,g=f.height}var j=this._stats.seriesGroups[c];return this._tisPlot.scale(h,{min:0,max:g},{min:j.min.valueOf(),max:j.max.valueOf(),type:j.logarithmic?"logarithmic":"linear",base:j.logBase,flip:!e.flip})}},_detectDateFormat:function(b,c){var d={en_US_d:"M/d/yyyy",en_US_D:"dddd, MMMM dd, yyyy",en_US_t:"h:mm tt",en_US_T:"h:mm:ss tt",en_US_f:"dddd, MMMM dd, yyyy h:mm tt",en_US_F:"dddd, MMMM dd, yyyy h:mm:ss tt",en_US_M:"MMMM dd",en_US_Y:"yyyy MMMM",en_US_S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",en_CA_d:"dd/MM/yyyy",en_CA_D:"MMMM-dd-yy",en_CA_f:"MMMM-dd-yy h:mm tt",en_CA_F:"MMMM-dd-yy h:mm:ss tt",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",de_DE_d:"dd.MM.yyyy",de_DE_D:"dddd, d. MMMM yyyy",de_DE_t:"HH:mm",de_DE_T:"HH:mm:ss",de_DE_f:"dddd, d. MMMM yyyy HH:mm",de_DE_F:"dddd, d. MMMM yyyy HH:mm:ss",de_DE_M:"dd MMMM",de_DE_Y:"MMMM yyyy",fr_FR_d:"dd/MM/yyyy",fr_FR_D:"dddd d MMMM yyyy",fr_FR_t:"HH:mm",fr_FR_T:"HH:mm:ss",fr_FR_f:"dddd d MMMM yyyy HH:mm",fr_FR_F:"dddd d MMMM yyyy HH:mm:ss",fr_FR_M:"d MMMM",fr_FR_Y:"MMMM yyyy",it_IT_d:"dd/MM/yyyy",it_IT_D:"dddd d MMMM yyyy",it_IT_t:"HH:mm",it_IT_T:"HH:mm:ss",it_IT_f:"dddd d MMMM yyyy HH:mm",it_IT_F:"dddd d MMMM yyyy HH:mm:ss",it_IT_M:"dd MMMM",it_IT_Y:"MMMM yyyy",ru_RU_d:"dd.MM.yyyy",ru_RU_D:"d MMMM yyyy '?.'",ru_RU_t:"H:mm",ru_RU_T:"H:mm:ss",ru_RU_f:"d MMMM yyyy '?.' H:mm",ru_RU_F:"d MMMM yyyy '?.' H:mm:ss",ru_RU_Y:"MMMM yyyy",cs_CZ_d:"d.M.yyyy",cs_CZ_D:"d. MMMM yyyy",cs_CZ_t:"H:mm",cs_CZ_T:"H:mm:ss",cs_CZ_f:"d. MMMM yyyy H:mm",cs_CZ_F:"d. MMMM yyyy H:mm:ss",cs_CZ_M:"dd MMMM",cs_CZ_Y:"MMMM yyyy",he_IL_d:"dd MMMM yyyy",he_IL_D:"dddd dd MMMM yyyy",he_IL_t:"HH:mm",he_IL_T:"HH:mm:ss",he_IL_f:"dddd dd MMMM yyyy HH:mm",he_IL_F:"dddd dd MMMM yyyy HH:mm:ss",he_IL_M:"dd MMMM",he_IL_Y:"MMMM yyyy",hr_HR_d:"d.M.yyyy.",hr_HR_D:"d. MMMM yyyy.",hr_HR_t:"H:mm",hr_HR_T:"H:mm:ss",hr_HR_f:"d. MMMM yyyy. H:mm",hr_HR_F:"d. MMMM yyyy. H:mm:ss",hr_HR_M:"d. MMMM",hu_HU_d:"yyyy.MM.dd.",hu_HU_D:"yyyy. MMMM d.",hu_HU_t:"H:mm",hu_HU_T:"H:mm:ss",hu_HU_f:"yyyy. MMMM d. H:mm",hu_HU_F:"yyyy. MMMM d. H:mm:ss",hu_HU_M:"MMMM d.",hu_HU_Y:"yyyy. MMMM",jp_JP_d:"gg y/M/d",jp_JP_D:"gg y'?'M'?'d'?'",jp_JP_t:"H:mm",jp_JP_T:"H:mm:ss",jp_JP_f:"gg y'?'M'?'d'?' H:mm",jp_JP_F:"gg y'?'M'?'d'?' H:mm:ss",jp_JP_M:"M'?'d'?'",jp_JP_Y:"gg y'?'M'?'",lt_LT_d:"yyyy.MM.dd",lt_LT_D:"yyyy 'm.' MMMM d 'd.'",lt_LT_t:"HH:mm",lt_LT_T:"HH:mm:ss",lt_LT_f:"yyyy 'm.' MMMM d 'd.' HH:mm",lt_LT_F:"yyyy 'm.' MMMM d 'd.' HH:mm:ss",lt_LT_M:"MMMM d 'd.'",lt_LT_Y:"yyyy 'm.' MMMM",sa_IN_d:"dd-MM-yyyy",sa_IN_D:"dd MMMM yyyy dddd",sa_IN_t:"HH:mm",sa_IN_T:"HH:mm:ss",sa_IN_f:"dd MMMM yyyy dddd HH:mm",sa_IN_F:"dd MMMM yyyy dddd HH:mm:ss",sa_IN_M:"dd MMMM",basic_y:"yyyy",basic_ym:"yyyy-MM",basic_d:"yyyy-MM-dd",basic_dhm:"yyyy-MM-dd hh:mm",basic_bhms:"yyyy-MM-dd hh:mm:ss",basic2_ym:"MM-yyyy",basic2_d:"MM-dd-yyyy",basic2_dhm:"MM-dd-yyyy hh:mm",basic2_dhms:"MM-dd-yyyy hh:mm:ss",basic3_ym:"yyyy/MM",basic3_d:"yyyy/MM/dd",basic3_dhm:"yyyy/MM/dd hh:mm",basic3_bhms:"yyyy/MM/dd hh:mm:ss",basic4_ym:"MM/yyyy",basic4_d:"MM/dd/yyyy",basic4_dhm:"MM/dd/yyyy hh:mm",basic4_dhms:"MM/dd/yyyy hh:mm:ss"};c&&(d=a.extend({},d,c));var e=[];a.isArray(b)?e=b:e.push(b);for(var f in d)d[f]={format:d[f],count:0};for(var g=0;g<e.length;g++)if(value=e[g],null!=value&&void 0!=value)for(var f in d){var h=a.tis.dataFormat.parsedate(value,d[f].format);null!=h&&d[f].count++}var i={key:void 0,count:0};for(var f in d)d[f].count>i.count&&(i.key=f,i.count=d[f].count);return i.key?d[i.key].format:""},_testXAxisDateFormat:function(a){var b=this,c=b._getXAxis(a),d=b._getDataLen(a),e={};if(b.localization&&b.localization.patterns)for(var f in b.localization.patterns)e["local_"+f]=b.localization.patterns[f];for(var g=[],h=0;h<d&&h<10;h++)value=b._getDataValue(h,c.dataField,a),null!=value&&void 0!=value&&g.push(value);return b._detectDateFormat(g,e)}})}(tisBaseFramework);